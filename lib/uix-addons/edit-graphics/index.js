!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("PDFViewCtrl"),require("UIExtension")):"function"==typeof define&&define.amd?define(["PDFViewCtrl","UIExtension"],t):"object"==typeof exports?exports.UIExtension_EditGraphicsAddon=t(require("PDFViewCtrl"),require("UIExtension")):e.UIExtension_EditGraphicsAddon=t(e.PDFViewCtrl,e.UIExtension)}(self,(function(e,t){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=n(5),i=(a(n(16)),a(n(24)));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}var c=r.Deps.jQuery,u=r.shared.browser.getPtPxRatio,p=r.Events,l=(r.shared.activation.ActivationGroup,function(e){function t(n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this));return i.graphicsObject=n,i.pageRender=r,i.dependences=o,i}return s(t,e),t.prototype.doActive=function(){var e=this.$handler,t=this.dependences.pdfViewer;if(!e){e=this.initUI(),this.$handler=e;var n=this.getContextMenuConfig();n&&!this.contextmenu&&(this.contextmenu=t.viewerUI.createContextMenu(this,e.get(0),n))}e.addClass("fwr__active"),this.updateShapeControl(),this.bindEvent(),this.undoSwitchBinder=t.switchKeyboardEventBinder(o.ACTIVATION_ANNOTATION_BINDER)},t.prototype.getContextMenuConfig=function(){},t.prototype.getContextMenuComponentName=function(){(0,i.default)()},t.prototype.removeGraphicObject=function(){this.remove()},t.prototype.remove=function(){var e=this;if(this.isActive){var t=this.dependences.pdfViewer;t.getAllActiveElements().forEach((function(t){t.unActive(),t!==e&&t.remove&&t.remove()})),0===t.getAllActiveElements().length&&t.activeElement()}},t.prototype.bindEvent=function(){var e=this,t=this.dependences.pdfViewer;this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=t.getKeyboardEventBinder(o.ACTIVATION_ANNOTATION_BINDER).on(o.KEY_MAP_DELETE_ANNOTATION,(function(t){e.removeGraphicObject(),t.stopPropagation(),e.__off__delete__event__()})),this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=t.getKeyboardEventBinder(o.EDIT_TEXT_OBJECT_BINDER).on(o.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT,(function(t){e.unActive(!0),t.stopPropagation()})),this.__off_active_escape_event&&this.__off_active_escape_event(),this.__off_active_escape_event=t.getKeyboardEventBinder(o.ACTIVATION_ANNOTATION_BINDER).on(o.KEY_MAP_UNACTIVE_ANNOTATION,(function(t){e.unActive()}))},t.prototype.unBindEvent=function(){this.__off__delete__event__&&this.__off__delete__event__(),this.__off__delete__event__=function(){},this.__off__esc__event__&&this.__off__esc__event__(),this.__off__esc__event__=function(){},this.__off_active_escape_event&&this.__off_active_escape_event(),delete this.__off_active_escape_event},t.prototype.translateContextMenuName=function(e){for(var t in e)switch(t){case"items":var n=e[t],r=this.dependences.pdfViewer.i18n;for(var o in n){var i=n[o];i.nameI18nKey&&(i.name=r.t(i.nameI18nKey))}}return e},t.prototype.updateShapeControl=function(){var e=this.getBoundary(),t=this._getShapeControllerBoundaryBox();this.shapeControl&&this.shapeControl.active(this.$handler,e,t)},t.prototype.unActive=function(){this.isActive&&(e.prototype.unActive.call(this),this.$handler&&(this.$handler.removeClass("fwr__active"),this.shapeControl&&this.shapeControl.deactive(),this.dependences.pdfViewer.eventEmitter.off(p.zoomToSuccess,this.afterZoom),this.$handler&&this.$handler.remove(),this.$handler=null,this.unBindEvent(),this.undoSwitchBinder&&this.undoSwitchBinder(),this.$charEditContainer&&this.$charEditContainer.off("focus")))},t.prototype.doDeactive=function(){},t.prototype.destroy=function(){this.unActive(),this.shapeControl.destroy(),this.contextmenu&&this.contextmenu.destroy()},t.prototype.getModel=function(){return this.graphicsObject},t.prototype._getShapeControllerBoundaryBox=function(){var e=this.pageRender.page,t=u()*this.pageRender.getScale(),n=e.getPxWidth()*t,r=e.getPxHeight()*t;if(this.pageRender.rotate%180!=0){var o=[n,r];r=o[0],n=o[1]}return{left:0,top:0,width:n,height:r}},t.prototype.getBoundary=function(){var e=this.pageRender.page,t=this.graphicsObject.getRect(),n=e.getDeviceRect(t,this.pageRender.getScale(),this.pageRender.getRotation());return{left:n.left,top:n.top,width:n.right-n.left,height:n.bottom-n.top}},t.prototype.initUI=function(){var e=this;if(!this.$handler){var t=this.$handler=c('<div class="fwr__graphics-object-handler"\n        ></div>');this.pageRender.pageHandler.$handler.append(t),t.get(0).__graphics_object_component=this,this.shapeControl=new r.ShapeControl({prestart:function(){return e.onPrestart()},start:function(t,n,r){return e.onStartUpdateShape(t,n,r)},moving:function(t,n,r){var o=r.offsetX,i=r.offsetY;return e.onShapeMoving(t,n,o,i)},update:function(t,n){return e.onShapeUpdating(t,n)},end:function(t,n,r,o){return e.onShapeUpdateEnd(t,n,r,o)},afterEnd:function(t){return e.onAfterShapeCtrlEnd(t)},resizable:!0,enableDiagonally:!0,enableFrame:!0,previewer:!0});var n=this;return this.dependences.pdfViewer.eventEmitter.on(p.zoomToSuccess,this.afterZoom=function(){n.updateShapeControl()}),this.$handler}},t.prototype.onPrestart=function(){var e=this;this.dependences.pdfViewer.getAllActiveElements().forEach((function(n){n!==e&&n instanceof t&&e.shapeControl.companion(n.shapeControl)}))},t.prototype.onAfterShapeCtrlEnd=function(e){this.shapeControl.clearCompanions()},t.prototype.onStartUpdateShape=function(e,t,n){var r=this;if("move"){if(this.dependences.pdfViewer.getAllActiveElements().length>1)return;c(this.shapeControl.ui.querySelector(".fv__shape-control-previewer")).show(),this.graphicsObject.getBitmap(this.pageRender.getScale(),this.pageRender.getRotation()).then((function(e){if(e){var t=r.shapeControl.getPreviewerContext();c(t.canvas).attr({width:e.width,height:e.height});var n=t.createImageData(e.width,e.height+1),o=new(Uint8ClampedArray||Uint8Array)(e.buffer);n.data.set(o),t.putImageData(n,0,0)}}))}},t.prototype.onShapeMoving=function(e,t){},t.prototype.onShapeUpdating=function(e,t){},t.prototype.onShapeUpdateEnd=function(e,t,n){var r=this,o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=Object.assign({},e);i.right=i.left+i.width,i.bottom=i.top+i.height,i=this.pageRender.page.reverseDeviceRect(i,this.pageRender.getScale(),this.pageRender.getRotation()),this.graphicsObject.setRect(i,o).then((function(e){c(r.shapeControl.ui.querySelector(".fv__shape-control-previewer")).hide(),r.updateShapeControl()}))},t.prototype.setColor=function(e){return this.graphicsObject.setBorderColor(e)},t.prototype.setBorderStyle=function(e,t){var n=this;return this.graphicsObject.setBorderStyle(e,t).then((function(e){n.updateShapeControl()}))},t.prototype.setOpacity=function(e){return this.graphicsObject.setOpacity(e)},t.prototype.setFillColor=function(e){return this.graphicsObject.setFillColor(e)},t.prototype.setBorderWidth=function(e){var t=this;return this.graphicsObject.setBorderWidth(e).then((function(e){t.updateShapeControl()}))},t.prototype.moveToPosition=function(e,t){var n=this;return this.graphicsObject.moveToPosition(e,t).then((function(e){n.updateShapeControl()}))},t}(r.shared.activation.Activatable));t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getClientX=function(e){if("clientX"in e)return e.clientX;switch(e.type){case"touchstart":case"touchmove":return e.touches[0].clientX;case"touchend":case"touchcancel":return e.changedTouches[0].clientX}},t.getClientY=function(e){if("clientY"in e)return e.clientY;switch(e.type){case"touchstart":case"touchmove":return e.touches[0].clientY;case"touchend":case"touchcancel":return e.changedTouches[0].clientY}}},function(e,t,n){"use strict";function r(e,t){if(!e)throw new Error(t)}function o(e){return"number"==typeof e}function i(e){return o(e)&&Math.floor(e)===e}function a(e){return Math.pow(Math.floor(e),2)!==e}function s(e){return(e%360+360)%360%90==0}function c(e,t,n,r,o){return void 0===r&&(r=!1),void 0===o&&(o=!1),(r?e>=t:e>t)&&(o?e<=n:e<n)}function u(e,t,n){return void 0===n&&(n=.01),Math.abs(e-t)<n}function p(e,t,n){return void 0===n&&(n=.01),u(e.x,t.x)&&u(e.y,t.y)}n.r(t),n.d(t,"assertThat",(function(){return r})),n.d(t,"isNumber",(function(){return o})),n.d(t,"isInteger",(function(){return i})),n.d(t,"isSquaredNumber",(function(){return a})),n.d(t,"isValidRotationAngle",(function(){return s})),n.d(t,"isNumberInRange",(function(){return c})),n.d(t,"isSamePoint",(function(){return p}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.KEY_MAP_SELECT_ALL_ANNOTATIONS="selectAllAnnotations",t.KEY_MAP_POLYLINE_DELETE_LAST_POINT="createPolyline_DeleteLastPoint",t.KEY_MAP_DOCUMENT_UNDO="undo",t.KEY_MAP_DOCUMENT_REDO="redo",t.KEY_MAP_ZOOM_IN="pageZoomIn",t.KEY_MAP_ZOOM_OUT="pageZoomOut",t.KEY_MAP_DELETE_ANNOTATION="delete-annotation",t.KEY_MAP_ESC_CREATING_DRAWING="cancel-creating-drawing-annot",t.KEY_MAP_UNACTIVE_ANNOTATION="unactive-annotation",t.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT="unfocus-from-editting-text-object",t.KEY_MAP_FIELD_TAB_NEXT="FIELD_TAB_ACTION",t.KEY_MAP_FIELD_TAB_PREVIOUS="FIELD_TAB_PREVIOUS_ACTION",t.KEY_MAP_FIELD_LEFT="FIELD_LEFT_ACTION",t.KEY_MAP_FIELD_RIGHT="FIELD_RIGHT_ACTION",t.KEY_MAP_FIELD_DOWN="FIELD_DOWN_ACTION",t.KEY_MAP_FIELD_UP="FIELD_UP_ACTION",t.KEY_MAP_FIELD_ENTER="FIELD_ENTER_ACTION",t.KEY_MAP_COPY_TEXT_IMAGE="copy-text-image",t.GLOBAL_BINDER="global-keyboard-event-binder",t.VIEWER_BINDER="pdf-viewer-keyboard-event-binder",t.ANNOTATION_PROPERTIES_BINDER="annotation-properties-keyboard-event-binder",t.ACTIVATION_ANNOTATION_BINDER="activation-annotation-keyboard-event-binder",t.DOCUMENT_PROPERTIES_BINDER="document-properties-keyboard-event-binder",t.FOCUS_ELEMENT_BINDER="focus-element-keyboard-event-binder",t.EDIT_TEXT_OBJECT_BINDER="focus-text-object-event-binder",t.ANNOTATION_CREATING_BINDER="create-annotation-keyboard-event-binder",t.SELECT_TEXT_IMAGE_BINDER="select-text-image-keyboard-event-binder",t.CUSTOM_COMMAND="custom-command",t.CUSTOM_BINDER="custom-keyboard-event-binder"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={textObjectActive:"text-object-active",textObjectUnActive:"text-object-unactive",addTextObjectParamTransfer:"add-text-object-param-transfer"}},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var o=function(){var e=navigator.appVersion.match(/iphone/gi),t="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;return e&&(t=Math.min(2,t)),t}();var i=void 0,a=void 0,s=void 0;function c(){return i||(i=function(){if("undefined"!=typeof screen&&screen.deviceXDPI)return{x:screen.deviceXDPI,y:screen.deviceYDPI};if("undefined"!=typeof document){var e=document.createElement("div");e.style.cssText="width:1in;height:1in;position:absolute;top:20in;border:none;padding:0;",document.body.appendChild(e);var t={x:parseInt(e.offsetWidth),y:parseInt(e.offsetHeight)};return e.parentNode.removeChild(e),t}return{x:96,y:96}}()),i}var u=void 0;t.getDPI=c,t.getPtPxRatio=function(){if(void 0===a){var e=c();a=e.x/72}return a},t.getPxPtRatio=function(){if(void 0===s){var e=c();s=72/e.x}return s},t.dpr=o,t.copyText=function(e){var t=u||((u=document.createElement("input")).type="text",u.style.opacity="0",u.style.top="-999px",u.style["z-index"]=-1,u.style.position="absolute",document.body.appendChild(u),u);t.value=e,t.select(),t.focus(),t.setSelectionRange(0,t.value.length);var n=document.execCommand("copy",!1,t.value);return t.blur(),n},t.eventPath=function(e){var t=e.composedPath&&e.composedPath()||e.path,n=e.target;return null!=t?t.indexOf(window)<0?t.concat(window):t:n===window?[window]:[n].concat(function e(t,n){n=n||[];var r=t.parentNode;return r?e(r,n.concat(r)):n}(n),window)},t.isIE10=function(){var e=navigator.userAgent.toLowerCase(),t=void 0;return!(!("ActiveXObject"in self)||!(t=e.match(/msie ([\d\.]+)/)))&&10===parseInt(t[1])},t.getCanvasPixelRatio=function(){if("object"!==("undefined"==typeof window?"undefined":r(window)))return 1;var e=window.devicePixelRatio||1,t=document.createElement("canvas").getContext("2d");return e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},t.isRunningInWorker=function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope},t.isRunningInBrowser=function(){return"undefined"!=typeof window}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(r(this,e),t instanceof e){var c=t;t=c.a,n=c.b,o=c.c,i=c.d,a=c.e,s=c.f}else if(t instanceof Array){var u=t;t=u[0],n=u[1],o=u[2],i=u[3],a=u[4],s=u[5]}this.a=t,this.b=n,this.c=o,this.d=i,this.e=a,this.f=s}return e.Concat2mt=function(t,n){return new e(t.a*n.a+t.b*n.c,t.a*n.b+t.b*n.d,t.c*n.a+t.d*n.c,t.c*n.b+t.d*n.d,t.e*n.a+t.f*n.c+n.e,t.e*n.b+t.f*n.d+n.f)},e.prototype.set=function(e,t,n,r,o,i){this.a=e,this.b=t,this.c=n,this.d=r,this.e=o,this.f=i},e.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0},e.prototype.reverse=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=t.a*t.d-t.b*t.c;if(0==n)return t;var r=-n,o=t.d/n,i=t.b/r,a=t.c/r,s=t.a/n,c=(t.c*t.f-t.d*t.e)/n,u=(t.a*t.f-t.b*t.e)/r;return new e(o,i,a,s,c,u)},e.prototype.setReverse=function(e){var t=this.reverse(e);this.set(t.a,t.b,t.c,t.d,t.e,t.f)},e.prototype.rotate=function(t,n){var r=Math.cos(t),o=Math.sin(t),i=new e(r,o,-o,r,0,0),a=void 0;a=n?e.Concat2mt(i,this):e.Concat2mt(this,i),this.set(a.a,a.b,a.c,a.d,a.e,a.f)},e.prototype.rotateAt=function(e,t,n,r){this.translate(e,t,r),this.rotate(n,r),this.translate(-e,-t,r)},e.prototype.translate=function(e,t,n){n?(this.e+=e*this.a+t*this.c,this.f+=t*this.d+e*this.b):(this.e+=e,this.f+=t)},e.prototype.concat=function(t,n,r,o,i,a,s){var c=void 0;t instanceof e?(c=t,s=n):c=new e(t,n,r,o,i,a);var u=void 0;u=s?e.Concat2mt(c,this):e.Concat2mt(this,c),this.set(u.a,u.b,u.c,u.d,u.e,u.f)},e.prototype.is90Rotated=function(){var e=1e3*this.a;e<0&&(e*=-1);var t=1e3*this.d;t<0&&(t*=-1);var n=this.b;n<0&&(n*=-1);var r=this.c;return r<0&&(r*=-1),e<n&&t<r},e.prototype.isScaled=function(){var e=1e3*this.b;e<0&&(e*=-1);var t=1e3*this.c;t<0&&(t*=-1);var n=this.a;n<0&&(n*=-1);var r=this.d;return r<0&&(r*=-1),e<n&&t<r},e.prototype.getA=function(){return this.a},e.prototype.getB=function(){return this.b},e.prototype.getC=function(){return this.c},e.prototype.getD=function(){return this.d},e.prototype.getE=function(){return this.e},e.prototype.getF=function(){return this.f},e.prototype.scale=function(e,t,n){this.a*=e,this.d*=t,n?(this.b*=e,this.c*=t):(this.b*=t,this.c*=e,this.e*=e,this.f*=t)},e.prototype.transformXDistance=function(e){var t=this.a*e,n=this.b*e;return Math.sqrt(t*t+n*n)},e.prototype.transformYDistance=function(e){var t=this.c*e,n=this.d*e;return Math.sqrt(t*t+n*n)},e.prototype.transformDistance=function(e,t){var n=this.a*e+this.c*t,r=this.b*e+this.d*t;return Math.sqrt(n*n+r*r)},e.prototype.transformPoint=function(e,t){return[this.a*e+this.c*t+this.e,this.b*e+this.d*t+this.f]},e.prototype.transformRect=function(e,t,n,r){for(var o=[e,e,n,n],i=[t,r,t,r],a=void 0,s=0;s<4;s++)a=this.transformPoint(o[s],i[s]),o[s]=a[0],i[s]=a[1];for(var c=[o[0],o[0],i[0],i[0]],u=1;u<4;u++)c[0]>o[u]&&(c[0]=o[u]),c[1]<o[u]&&(c[1]=o[u]),c[2]>i[u]&&(c[2]=i[u]),c[3]<i[u]&&(c[3]=i[u]);return[c[0],c[2],c[1],c[3]]},e.prototype.getXUnit=function(){var e=this.a,t=this.b;return 0===t?Math.abs(e):0===e?Math.abs(t):Math.sqrt(e*e+t*t)},e.prototype.getYUnit=function(){var e=this.c,t=this.d;return 0===e?Math.abs(t):0===t?Math.abs(e):Math.sqrt(e*e+t*t)},e.prototype.getUnitRect=function(){return this.transformRect(0,0,1,1)},e.prototype.matchRect=function(e,t){var n=t[0]-t[2];this.a=Math.abs(n)<.001?1:(e[0]-e[2])/n,n=t[3]-t[1],this.d=Math.abs(n)<.001?1:(e[3]-e[1])/n,this.e=e[0]-t[0]*this.a,this.f=e[3]-t[3]*this.d,this.b=0,this.c=0},e.prototype.getAngle=function(){return Math.atan2(this.b,this.a)},e.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.e,this.f]},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.convertFromNumberToHex=function(e){if("number"!=typeof e)throw new TypeError("Unexpected color value:"+e);if(e<0)return-1;var t=e.toString(16),n=6;e>16777215&&(n=8);for(;t.length<n;)t="0"+t;return"#"+t},t.convertFromNumberToRGBA=function(e){var t=void 0;e<16777216?t=255:(t=e/o&255,e&=16777215);return{r:e>>16&255,g:e>>8&255,b:255&e,a:t}},t.colorConvertor=i,t.standardColorAsARGBNumber=function(e){if(e<=16777215)return 4278190080+e;if(e>16777215)return e;if("string"==typeof e){if((e=e.replace("#","").trim()).match(/^[0-9A-F]{8}$/i))return parseInt(e,16);if(e.match(/^[0-9A-F]{6}$/i))return 4278190080+parseInt(e,16);if(e.match(/^rgb\(\d{1,3}(,\d{1,3}){2}\)$/i)){var t=e.split(/\D+/).map((function(e){return parseInt(e)})),n=r(t,4),o=n[1],i=n[2],a=n[3];return 4278190080+(o<<16)+(i<<8)+a}if(e.match(/^rgba\(\d{1,3}(,\d{1,3}){3}\)$/i)){var s=e.split(/\D+/).map((function(e){return parseInt(e)})),c=r(s,5),u=c[1],p=c[2],l=c[3],f=c[4];return Math.floor(4278190080*f)+(u<<16)+(p<<8)+l}}throw new Error('incorrect color format: "'+e+'"')},t.convertFromNumberToJSColor=function(e){return["RGB",((16711680&e)>>16)/255,((65280&e)>>8)/255,(255&e)/255]},t.getTransparentOrColor=function(e){var t=void 0;t=0===e?"transparent":i(16777215&e,"#");return t};var o=Math.pow(2,24);function i(e){var t,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a="",s=void 0;switch("number"==typeof e&&(e=["int",e]),e[0]){case"int":t=(16711680&e[1])>>16,n=(65280&e[1])>>8,r=255&e[1];break;case"T":t=0,n=0,r=0,i=0;break;case"G":t=n=r=255*e[1];break;case"RGB":t=255*e[1],n=255*e[2],r=255*e[3];break;case"CMYK":t=(1-e[4])*(1-e[1])*255,n=(1-e[4])*(1-e[2])*255,r=(1-e[4])*(1-e[3])*255;break;case"r":t=+(s=e.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/))[1],n=+s[2],r=+s[3];var c=s[4];void 0!==c&&(i=+c);break;case"#":var u=4==e.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;s=e.match(u),t=parseInt(s[1],16),n=parseInt(s[2],16),r=parseInt(s[3],16);break;default:throw new Error("Unsupported color format")}switch(o){case"HTML":a=t===n&&n===r&&-1===r?"transparent":"rgba("+parseInt(t)+","+parseInt(n)+","+parseInt(r)+","+i+")";break;case"RGB":a=["RGB",t/255,n/255,r/255];break;case"#":a+=t<16?"#0"+t.toString(16):"#"+t.toString(16),a+=n<16?"0"+n.toString(16):n.toString(16),a+=r<16?"0"+r.toString(16):r.toString(16);break;case"int":a=0,a|=(i*=255)<<24,a|=t<<16,a|=n<<8,a|=r,a>>>=0}return a}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(42);Object.defineProperty(t,"MARKUP_ANNOTATION_STATE",{enumerable:!0,get:function(){return(e=r,e&&e.__esModule?e:{default:e}).default;var e}});t.BORDER_STYLE={SOLID:0,DASHED:1,UNDERLINE:2,BEVELED:3,INSET:4,CLOUDY:5},t.POINT_TYPE={MOVE_TO:1,LINE_TO:2,LINE_TO_CLOSE_FIGURE:3,BEZIER_TO:4,BEZIER_TO_CLOSE_FIGURE:5},t.Intents={LINE_ARROW:"LineArrow",LINE_DIMENSION:"LineDimension",POLYGON_CLOUD:"PolygonCloud",POLYGON_DIMENSION:"PolygonDimension",POLYLINE_DIMENSION:"PolyLineDimension",CIRCLE_DIMENSION:"CircleDimension",FREETEXT_TYPEWRITER:"FreeTextTypewriter",FREETEXT_CALLOUT:"FreeTextCallout",STRIKEOUT_TEXTEDIT:"StrikeOutTextEdit"};var o=t.LineEndingName={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"};t.LineEndingStyle=Object.keys(o).reduce((function(e,t){return e[o[t]]=Number(t),e}),{}),t.LINE_CAPTION_POSITION={POS_INLINE:0,POS_TOP:1},t.AnnotFlagsName={0:"invisible",1:"hidden",2:"print",3:"nozoom",4:"norotate",5:"noview",6:"readonly",7:"locked",8:"togglenoview"},t.PDFDocPermission={PrintLowQuality:4,ModifyDocument:8,Extract:16,AnnotForm:32,FillForm:256,ExtractAccess:512,Assemble:1024,PrintHighQuality:2048},t.MeasureType={MeasureTypeX:0,MeasureTypeY:1,MeasureTypeD:2,MeasureTypeA:3,MeasureTypeT:4,MeasureTypeS:5},t.STORE_NAMES={SELECTION_INFO:"viewer--store-selection-info"},t.CREATING_MEASUREMENT_CONTEXTMENU="creating-measurement-contextmenu",t.HIGHLIGHTING_MODE={NONE:0,INVERT:1,OUTLINE:2,PUSH:3,TOGGLE:4},t.RESOLVED_PROMISE_VOID=Promise.resolve(),t.DISTANCE_TOLERANCE=2,t.POINT_TOLERANCE=.01,t.POS_TYPE={FIRST:0,LAST:1,AFTER:2,BEFORE:3},t.STANDARD_HTML_ELEMENTS=["html","a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],t.EMPTY_STR="",t.DB_PREFIX="FoxitPDFSDKForWeb_",t.SET_FORM_CREATION_CONTINUOUSLY="set_form_creation_continuously",t.HIDE_FORM_FIELD_PROPERTY_BOX="hideFormFieldPropertyBox",t.HIDE_FORM_FIELD_SIMPLE_PROPERTY_BOX="hideFormFieldSimplePropertyBox"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1));n(7);var o=n(13),i=p(n(40)),a=p(n(41)),s=p(n(43)),c=p(n(44)),u=p(n(45));function p(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}var h=function(e){function t(){return l(this,t),f(this,e.apply(this,arguments))}return d(t,e),t.getName=function(){return"edit-graphics"},t.getLoader=function(){return i.default},t.initOnLoad=function(){var e=r.modular.module("edit-graphics",[]);e.registerController(c.default),e.registerController(a.default),e.registerController(s.default),e.registerController(u.default),e.registerPreConfiguredComponent("contextmenu-item-properties",{template:'<contextmenu-item @controller="edit-graphics:ShowGraphicsObjectPropertiesController">ega:contextmenu.properties</contextmenu-item>'}),e.registerPreConfiguredComponent("contextmenu-item-set-to-front",{template:'<contextmenu-item @controller="edit-graphics:MoveFrontGraphicsObjectController">ega:contextmenu.set-to-front</contextmenu-item>'}),e.registerPreConfiguredComponent("contextmenu-item-set-to-back",{template:'<contextmenu-item @controller="edit-graphics:MoveBackGraphicsObjectController">ega:contextmenu.set-to-back</contextmenu-item>'}),e.registerPreConfiguredComponent("contextmenu-item-delete",{template:'<contextmenu-item @controller="edit-graphics:DeleteGraphicsObjectController">ega:contextmenu.delete</contextmenu-item>'}),e.registerPreConfiguredComponent("image-contextmenu",{template:'\n            <contextmenu name="fv--image-graphics-object-contextmenu">\n                <edit-graphics:contextmenu-item-set-to-front name="fv--contextmenu-item-image-graphics-object-set-to-front"></edit-graphics:contextmenu-item-set-to-front>\n                <edit-graphics:contextmenu-item-set-to-back name="fv--contextmenu-item-image-graphics-object-set-to-back"></edit-graphics:contextmenu-item-set-to-back>\n                <edit-graphics:contextmenu-separator></edit-graphics:contextmenu-separator>\n                <edit-graphics:contextmenu-item-delete name="fv--contextmenu-item-image-graphics-object-delete"></edit-graphics:contextmenu-item-delete>\n                <edit-graphics:contextmenu-separator></edit-graphics:contextmenu-separator>\n                <edit-graphics:contextmenu-item-properties name="fv--contextmenu-item-image-graphics-object-properties"></edit-graphics:contextmenu-item-properties>\n            </contextmenu>\n            '})},t.prototype.init=function(t){e.prototype.init.call(this,t),t.getPDFViewer().then((function(e){new o.EditGraphicsAddon(e).init()}))},t}(r.UIXAddon);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditGraphicsAddonEvents=t.EditGraphicsAddon=void 0;var r=i(n(14)),o=i(n(6));function i(e){return e&&e.__esModule?e:{default:e}}t.EditGraphicsAddon=r.default,t.EditGraphicsAddonEvents=o.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(0));var r=p(n(15)),o=p(n(31)),i=p(n(32));n(7);var a=p(n(33)),s=p(n(36)),c=p(n(37)),u=p(n(38));function p(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pdfViewer=t,this.graphicsManager=new r.default}return e.prototype.init=function(){var e=(0,i.default)(this),t=(0,o.default)(this,2),n=(0,o.default)(this,3),r=(0,u.default)(this);a.default.setAddon(this),s.default.setAddon(this);var p=(0,c.default)(this),l=this.pdfViewer.getStateHandlerManager();l.register(e),l.register(t),l.register(n),l.register(r),l.register(a.default),l.register(p),l.register(s.default),this.pdfViewer.addDestroyHook((function(){a.default.setAddon(null),s.default.setAddon(null)}))},e.prototype.getGraphicsManager=function(){return this.graphicsManager},e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(2)),o=s(n(25)),i=s(n(27)),a=s(n(28));s(n(30));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.matchRules=[]}return e.prototype.registerMatchRule=function(e){return this.matchRules.push(e),e},e.prototype.unRegisterMatchRule=function(e){var t=this.matchRules.indexOf(e);-1!==t&&this.matchRules.splice(t,1)},e.prototype.get=function(e){for(var t=this.matchRules,n=this.getDefault(e),r=t.length;r--;){var o=t[r];if("function"==typeof o){var i=o(e,n);if(i)return i}}return n},e.prototype.getDefault=function(e){switch(e.getType()){case 1:return o.default;case 2:return i.default;case 3:return a.default;default:return r.default}},e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(17)),o=n(8),i=u(n(19)),a=u(n(9)),s=n(20),c=n(22);function u(e){return e&&e.__esModule?e:{default:e}}var p=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.page=n,this.doc=n.doc,this.engine=r,this.info=t}return e.prototype.destroy=function(){this.page=null,this.doc=null,this.engine=null,this.info=null},e.prototype.getId=function(){return this.info.id},e.prototype.getPDFPage=function(){return this.page},e.prototype.getBitmap=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getPDFPage();return n.doc.api.getGraphicsObjectBitmap(n.getPDFDoc().getId(),n.getId(),this.getId(),e*(0,o.getPtPxRatio)(),t)},e.prototype.getRect=function(){return this.info.rect},e.prototype.setRect=function(e){var t=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();this.info.rect=e;var o=arguments[1];return n.doc.api.setGraphicsObjectRect(n.getPDFDoc().getId(),n.getId(),this.getId(),e).then((function(e){t.info=e,o&&t.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},e.prototype.setMatrix=function(e){var t=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.matrix=e,n.doc.api.setGraphicsObjectMatrix(n.getPDFDoc().getId(),n.getId(),this.getId(),e).then((function(e){t.info=e,t.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},e.prototype.getMatrix=function(){var e=this.info.matrix;return new a.default(e.a,e.b,e.c,e.d,e.e,e.f)},e.prototype.getDeviceMatrix=function(){var e=this.getMatrix();e.translate(0,-this.getPDFPage().getHeight());var t=(0,s.pt2px)(1);return e.scale(t,-t),e},e.prototype.getType=function(){return this.info.type},e.prototype.getBorderDashes=function(){return l(this.getType()),this.info.graphState.dashes},e.prototype.getBorderStyle=function(){return l(this.getType()),this.info.graphState.dashes.length>0?1:0},e.prototype.setBorderStyle=function(e,t){var n=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");l(this.getType());var o=this.getPDFPage();return this.info.graphState.dashes=t,o.doc.api.setGraphicsObjectBorderStyle(o.getPDFDoc().getId(),o.getId(),this.getId(),e,t).then((function(e){n.info=e,n.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,o)}))},e.prototype.getBorderWidth=function(){return l(this.getType()),this.info.graphState.lineWidth},e.prototype.setBorderWidth=function(e){var t=this;if(l(this.getType()),!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return this.info.graphState.lineWidth=e,n.doc.api.setGraphicsObjectBorderWidth(n.getPDFDoc().getId(),n.getId(),this.getId(),e).then((function(e){t.info=e,t.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},e.prototype.getBorderColor=function(){return l(this.getType()),(4278190080|this.info.strokeColor)>>>0},e.prototype.setBorderColor=function(e){var t=this;if(l(this.getType()),!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return n.doc.api.setGraphicsObjectBorderColor(n.getPDFDoc().getId(),n.getId(),this.getId(),e).then((function(e){t.info=e||t.info,t.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},e.prototype.getFillColor=function(){return l(this.getType()),(4278190080|this.info.fillColor)>>>0},e.prototype.setFillColor=function(e){var t=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");l(this.getType());var n=this.getPDFPage();return n.doc.api.setGraphicsObjectFillColor(n.getPDFDoc().getId(),n.getId(),this.getId(),e).then((function(e){t.info=e,t.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},e.prototype.getOpacity=function(){return((4278190080&this.info.strokeColor)>>>0)/4278190080},e.prototype.setOpacity=function(e){var t=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var n=this.getPDFPage();return n.doc.api.setGraphicsObjectOpacity(n.getPDFDoc().getId(),n.getId(),this.getId(),e).then((function(e){t.info=e,t.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,n)}))},e.prototype.remove=function(){if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");return this.getPDFPage().removeGraphicsObject(this)},e.prototype.moveToPosition=function(e,t){var n=this;if(!this.doc.checkPermission(i.default.modify))throw new Error("Permission error");var o=this.getPDFPage();if(-1===Object.values(c.PosType).findIndex((function(t){return t==e})))throw new Error("Type error");var a=null;return e!=c.PosType.first&&e!=c.PosType.last&&(a=t.getId()),o.doc.api.moveGraphicsObjectByPosition(o.getPDFDoc().getId(),o.getId(),this.getId(),e,a).then((function(e){n.doc.engine.eventEmitter.emit(r.default.graphicsUpdated,o)}))},e}();t.default=p;var l=function(e){if(1!=e&&2!=e&&5!=e)throw new Error("only text, path object are supported")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18),o={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",annotationLoaded:"annotation-loaded",actionUpdated:"action-updated",actionAdd:"action-add",actionRemove:"action-remove",layerVisibleChange:"layer-visible-change",bookmarkAdded:"bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageRotationChange:"page-rotation-change",imageAdded:"image-added",watermarkAdded:"watermark-added",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:(0,r.identity)("doc-password-changed"),drmEncryptSuccess:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:(0,r.identity)("remove-password-and-permission"),pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",importPages:"import-pages",applyRedaction:"apply-redaction",removeReviewState:"remove-review-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded",COChange:"COChange",pagesMoved:"pages-moved",pagesRemoved:"pages-removed",pagesRotated:"pages-rotated"};t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.T=function(){return!0},t.F=function(){return!1},t.identity=function(e){return e},t.prop=function(e,t){return t[e]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={print:4,modify:8,extract:16,annotForm:32,fillForm:256,extractAccess:512,assemble:1024,printHigh:2048}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRotatedRect=t.getSmartScale=t.getWHByMatrix=t.pxDPRpt=t.ptDPRpx=t.multiDPR=t.px2pt=t.pt2px=void 0;var r,o=n(8),i=(n(21),n(46)),a=(r=i)&&r.__esModule?r:{default:r},s=n(4);var c=void 0;function u(e){return function(){if(!c){var e=(0,o.getDPI)();c=[e.x,e.y]}return c}()[e]}t.pt2px=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e*u(t)/72},t.px2pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 72*e/u(t)},t.multiDPR=function(e){return e*o.dpr},t.ptDPRpx=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.dpr*e*u(t)/72},t.pxDPRpt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e/o.dpr/u(t)*72},t.getWHByMatrix=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new a.default(e,t,0).scale(n).rotateZ(r);return[Math.round(Math.abs(o.a)),Math.round(Math.abs(o.b))]},t.getSmartScale=function(e,t,n){return Math.min(Math.max(Math.ceil(4*e)/4,t),n)},t.getRotatedRect=function(e,t,n,r){switch((0,s.assertThat)((0,s.isValidRotationAngle)(r),"Illegal rotation value: "+r),r=(r%360+360)%360){case 0:return e;case 90:return{left:e.bottom,right:e.top,top:e.left,bottom:e.right};case 180:return{left:t-e.right,right:t-e.left,top:n-e.bottom,bottom:n-e.top};case 270:return{left:e.top,right:e.bottom,top:e.right,bottom:e.left}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pageMatrix=void 0;var r,o=n(9),i=(r=o)&&r.__esModule?r:{default:r};function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}t.pageMatrix=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=void 0;switch(r%360){case 0:o=[n,0,0,n,0,0];break;case 90:o=[0,n,-n,0,n*t,0];break;case 180:o=[-n,0,0,-1,n*e,n*t];break;case 270:o=[0,-n,n,0,0,n*e];break;default:throw new Error("Unsupported rotation value: "+r)}return new(Function.prototype.bind.apply(i.default,[null].concat(a(o))))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PosType=t.MK_Properties=t.Graphics_ObjectType=t.Graphics_FillMode=t.Font_CIDCharset=t.Font_Charset=t.Font_Styles=t.Font_StandardID=t.Text_Mode=t.Box_Type=t.Calc_Margin_Mode=t.Action_Trigger=t.Signature_Ap_Flags=t.Signature_State=t.Error_Code=t.Font_Descriptor_Flags=t.page_Number_Format=t.date_Format=t.Rendering_Usage=t.Rendering_Content=t.Range_Filter=t.Saving_Flag=t.Search_Flag=t.Rotation_Degree=t.Rotation=t.Standard_Font=t.Watermark_Flag=t.Position=t.Flatten_Option=t.File_Type=t.Relationship=t.Highlight_Mode=t.Action_Type=t.Point_Type=t.Alignment=t.Ending_Style=t.Note_Icon=t.FileAttachment_Icon=t.Border_Style=t.Font_Style=t.Additional_Permission=void 0;var r,o=n(23),i=(r=o)&&r.__esModule?r:{default:r};t.Additional_Permission={download:1},t.Font_Style={normal:0,italic:1,bold:2},t.Border_Style={solid:0,dashed:1,underline:2,beveled:3,inset:4,cloudy:5},t.FileAttachment_Icon={graph:"Graph",pushPin:"PushPin",paperclip:"Paperclip",tag:"Tag"},t.Note_Icon={Check:"Check",Circle:"Circle",Comment:"Comment",Cross:"Cross",Help:"Help",Insert:"Insert",Key:"Key",NewParagraph:"NewParagraph",Note:"Note",Paragraph:"Paragraph",RightArrow:"RightArrow",RightPointer:"RightPointer",Star:"Star",UpArrow:"UpArrow",UpLeftArrow:"UpLeftArrow"},t.Ending_Style={None:0,Square:1,Circle:2,Diamond:3,OpenArrow:4,ClosedArrow:5,Butt:6,ReverseOpenArrow:7,ReverseClosedArrow:8,Slash:9},t.Alignment={left:0,center:1,right:2},t.Point_Type={moveTo:1,lineTo:2,lineToCloseFigure:3,bezierTo:4,bezierToCloseFigure:5},t.Action_Type={goto:"TypeGoto",launch:"TypeLaunch",uri:"TypeURI",named:"TypeNamed",submitForm:"TypeSubmitForm",resetForm:"TypeResetForm",javaScript:"TypeJavaScript",importData:"TypeImportData",hide:"TypeHide"},t.Highlight_Mode={none:0,invert:1,outline:2,push:3,toggle:4},t.Relationship={firstChild:0,lastChild:1,previousSibling:2,nextSibling:3,firstSibling:4,lastSibling:5},t.File_Type={fdf:0,xfdf:1,xml:2,csv:3,txt:4},t.Flatten_Option={all:0,field:1,annot:2},t.Position={topLeft:"TopLeft",topCenter:"TopCenter",topRight:"TopRight",centerLeft:"CenterLeft",center:"Center",centerRight:"CenterRight",bottomLeft:"BottomLeft",bottomCenter:"BottomCenter",bottomRight:"BottomRight"},t.Watermark_Flag={asContent:0,asAnnot:1,onTop:2,unprintable:4,display:8},t.Standard_Font={courier:0,courierBold:1,courierBoldOblique:2,courierOblique:3,helvetica:4,helveticaBold:5,helveticaBoldOblique:6,helveticaOblique:7,timesRoman:8,timesBold:9,timesBoldItalic:10,timesItalic:11,symbol:12,zapfDingbats:13},t.Rotation={rotation0:0,rotation1:1,rotation2:2,rotation3:3},t.Rotation_Degree={rotation0:0,rotation90:90,rotation180:180,rotation270:270},t.Search_Flag={caseSensitive:1,wholeWord:2,consecutively:4},t.Saving_Flag={normal:0,incremental:1,noOriginal:2,XRefStream:8,linearized:4096,removeRedundantObjects:16},t.Range_Filter={all:0,even:1,odd:2},t.Rendering_Content={page:"page",annot:"annot"},t.Rendering_Usage={print:"print",view:"view"},t.date_Format={MSlashD:0,MSlashDSlashYY:1,MSlashDSlashYYYY:2,MMSlashDDSlashYY:3,MMSlashDDSlashYYYY:4,DSlashMSlashYY:5,DSlashMSlashYYYY:6,DDSlashMMSlashYY:7,DDSlashMMSlashYYYY:8,MMSlashYY:9,MMSlashYYYY:10,MDotDDotYY:11,MDotDDotYYYY:12,MMDotDDDotYY:13,MMDotDDDotYYYY:14,MMDotYY:15,DDotMDotYYYY:16,DDDotMMDotYY:17,DDDotMMDotYYYY:18,YYHyphenMMHyphenDD:19,YYYYHyphenMMHyphenDD:20},t.page_Number_Format={default:0,numberOfCount:1,numberSlashCount:2,pageNumber:3,pageNumberOfCount:4},t.Font_Descriptor_Flags={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144},t.Error_Code=i.default,t.Signature_State={verifyChange:128,verifyIncredible:256,verifyNoChange:1024,stateVerifyIssueUnknown:2048,verifyIssueValid:4096,verifyIssueUnknown:8192,verifyIssueRevoke:16384,verifyIssueExpire:32768,verifyIssueUncheck:65536,verifyIssueCurrent:131072,verifyTimestampNone:262144,verifyTimestampDoc:524288,verifyTimestampValid:1048576,verifyTimestampInvalid:2097152,verifyTimestampExpire:4194304,verifyTimestampIssueUnknown:8388608,verifyTimestampIssueValid:16777216,verifyTimestampTimeBefore:33554432,verifyChangeLegal:134217728,verifyChangeIllegal:268435456},t.Signature_Ap_Flags={showTagImage:1,showLabel:2,showReason:4,showDate:8,showDistinguishName:16,showLocation:32,showSigner:64,showBitmap:128,showText:256},t.Action_Trigger={click:-1,keyStroke:7,format:8,validate:9,calculate:10,mouseEnter:11,mouseExit:12,mouseDown:13,mouseUp:14,onFocus:15,onBlur:16},t.Calc_Margin_Mode={CalcContentsBox:0,CalcDetection:1},t.Box_Type={MediaBox:0,CropBox:1,TrimBox:2,ArtBox:3,BleedBox:4},t.Text_Mode={Fill:0,Stroke:1,FillStroke:2,Invisible:3,FillClip:4,StrokeClip:5,FillStrokeClip:6,Clip:7},t.Font_StandardID={Courier:0,CourierB:1,CourierBI:2,CourierI:3,Helvetica:4,HelveticaB:5,HelveticaBI:6,HelveticaI:7,Times:8,TimesB:9,TimesBI:10,TimesI:11,Symbol:12,ZapfDingbats:13},t.Font_Styles={FixedPitch:1,Serif:2,Symbolic:4,Script:8,NonSymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,Bold:262144},t.Font_Charset={ANSI:0,Default:1,Symbol:2,Shift_JIS:128,Hangeul:129,GB2312:134,ChineseBig5:136,Thai:222,EastEurope:238,Russian:204,Greek:161,Turkish:162,Hebrew:177,Arabic:178,Baltic:186},t.Font_CIDCharset={Unknown:0,GB1:1,CNS1:2,JAPAN1:3,KOREA1:4,UNICODE:5},t.Graphics_FillMode={None:0,Alternate:1,Winding:2},t.Graphics_ObjectType={All:0,Text:1,Path:2,Image:3,Shading:4,FormXObject:5},t.MK_Properties={borderColor:"borderColor",fillColor:"fillColor",normalCaption:"normalCaption",downCaption:"downCaption",rolloverCaption:"rolloverCaption"},t.PosType={first:0,last:1,after:2,before:3}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={success:0,file:1,format:2,password:3,handle:4,certificate:5,unknown:6,invalidLicense:7,param:8,unsupported:9,outOfMemory:10,securityHandler:11,notParsed:12,notFound:13,invalidType:14,conflict:15,unknownState:16,dataNotReady:17,invalidData:18,xFALoadError:19,notLoaded:20,invalidState:21,notCDRM:22,canNotConnectToServer:23,invalidUserToken:24,noRights:25,rightsExpired:26,deviceLimitation:27,canNotRemoveSecurityFromServer:28,canNotGetACL:29,canNotSetACL:30,isAlreadyCPDF:31,isAlreadyCDRM:32,canNotUploadDocInfo:33,canNotUploadCDRMInfo:34,invalidWrapper:35,canNotGetClientID:36,canNotGetUserToken:37,invalidACL:38,invalidClientID:39,OCREngineNotInit:40,diskFull:41,OCRTrialIsEnd:42,filePathNotExist:43,complianceEngineNotInit:44,complianceEngineInvalidUnlockCode:45,complianceEngineInitFailed:46,timeStampServerMgrNotInit:47,LTVVerifyModeNotSet:48,LTVRevocationCallbackNotSet:49,LTVCannotSwitchVersion:50,LTVCannotCheckDTS:51,LTVCannotLoadDSS:52,LTVCannotLoadDTS:53,needSigned:54,complianceResourceFile:55,timeStampServerMgrNoDefaltServer:56,defaultTimeStampServer:57,noConnectedPDFModuleRight:58,noXFAModuleRight:59,noRedactionModuleRight:60,noRMSModuleRight:61,noOCRModuleRight:62,noComparisonModuleRight:63,noComplianceModuleRight:64,noOptimizerModuleRight:65,noConversionModuleRight:66,collaborationSession:1400}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){throw new Error("Method not implemented")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=p(n(2)),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=p(n(6)),s=n(26),c=n(5),u=n(10);function p(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}var f=i.Deps.jQuery,d=i.shared.browser.getPtPxRatio,h=i.ViewerEvents.beforeZoomTo,v=i.ViewerEvents.renderPageSuccess,g=i.ViewerEvents.switchStateHandler,y=function(e){function t(n,r,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r,o))}return l(t,e),t.prototype.initUI=function(){var e=this,t=this.$handler=f('<div class="fwr__graphics-object-handler fwr__text-object-edit"\n        ></div>');this.pageRender.pageHandler.$handler.after(t),t.get(0).__graphics_object_component=this;this.shapeControl=new i.ShapeControl({prestart:function(){return e.onPrestart()},start:function(t,n,r){return e.onStartUpdateShape(t,n,r)},moving:function(t,n,r){var o=r.offsetX,i=r.offsetY;return e.onShapeMoving(t,n,o,i)},update:function(t,n){return e.onShapeUpdating(t,n)},rotate:function(t,n){return e.onRotate(t,n)},end:function(t,n,r,o){return e.onShapeUpdateEnd(t,n,r,o)},afterEnd:function(t){return e.onAfterShapeCtrlEnd(t)},resizable:!0,enableDiagonally:!0,enableFrame:!0,previewer:!0});return t.on("dblclick",(function(){e.unActive(),e.activeCharEdit()})),this.$handler},t.prototype.reActive=function(){},t.prototype.active=function(){var t=this;e.prototype.active.call(this),this.reActive=function(){t.unActive(),t.active()};var n=this.pageRender.pdfViewer.getEventEmitter();n.emit(a.default.textObjectActive,this),n.once(h,this.beforeZoomToBind=e.prototype.unActive.bind(this)),this.pageRedrawBind&&n.off(v,this.pageRedrawBind),n.on(v,this.pageRedrawBind=function(e){e.index===t.getModel().getPDFPage().getIndex()&&t.reActive()}),n.on(g,this.switchStateHandlerBind=function(){t.eCharInput&&t.applyEdit()})},t.prototype.unActive=function(){this.dependences.pdfViewer._setSaveBefore(),e.prototype.unActive.call(this),this.unActiveCharEdit();var t=this.pageRender.pdfViewer.getEventEmitter();t.off(h,this.beforeZoomToBind),t.off(v,this.pageRedrawBind),t.off(g,this.switchStateHandlerBind),t.emit(a.default.textObjectUnActive,this)},t.prototype.unActiveCharEdit=function(){this.$charEditContainer&&this.$charEditContainer.remove(),this.$charEditContainer=null,this.unswitchBinder&&this.unswitchBinder()},t.prototype.applyEdit=function(){var e=this;if(!this.eCharInput)return Promise.reject(new Error("text input box has not been initialized!"));var t=this.eCharInput.innerText;return"string"!=typeof t&&(t=this.eCharInput.textContent),this.isApplyEdit=!0,this.setTextChar(t).then((function(){e.unActive()})).finally((function(){e.isApplyEdit=!1}))},t.prototype.initCharEditContainer=function(){var e=this,t=f('<div class="fv__text-object-edit-char-container"><div class="fv__text-object-edit-char-mask-layer"></div><span class="fv__text-object-edit-char-input" contenteditable autofocus></span></div>');t.get(0).__graphics_object_component=this,this.pageRender.$handler.after(t);var n=t.find(".fv__text-object-edit-char-input"),r=n[0];return this.eCharInput=r,n.on("keydown",(function(t){t.shiftKey||13===t.keyCode&&(t.preventDefault(),e.applyEdit())})),t},t.prototype.activeCharEdit=function(e){var t=this;this.isActive=!0;var n=this.$charEditContainer=this.$charEditContainer||this.initCharEditContainer(),o=n.find(".fv__text-object-edit-char-mask-layer"),p=n.find(".fv__text-object-edit-char-input");this.dependences.pdfViewer._setSaveBefore((function(){return t.applyEdit()}));var l=this.graphicsObject,f=l.getRect(),y=this.pageRender,m=y.pdfViewer;return p.off("focus").on("focus",(function(){var e=m.keyboard.getBinder(c.EDIT_TEXT_OBJECT_BINDER);if(!(m.keyboard.activeBinders.indexOf(e)>-1)){var n=e.on(c.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT,(function(){var e=t.eCharInput.innerText;"string"!=typeof e&&(e=t.eCharInput.textContent),t.setTextChar(e).then((function(){t.unActive()}))})),r=m.switchKeyboardEventBinder(c.EDIT_TEXT_OBJECT_BINDER);t.unswitchBinder=function(){r(),n()}}})),m.getEventEmitter().on(g,this.switchStateHandlerBind=function(){t.eCharInput&&t.applyEdit()}),Promise.all([y.getPDFPage(),y.getScale(),y.getRotation()]).then((function(e){var t=r(e,3),n=t[0],o=t[1],i=t[2];return[n.getDeviceRect(f,o,i),n,o,i]})).then((function(c){var p=r(c,4),f=p[0],g=p[1],y=p[2],m=p[3];n.css({left:f.left+"px",top:f.bottom+"px"});var b=n.find(".fv__text-object-edit-char-input"),_=b[0];o.css({width:f.right-f.left+"px",height:f.bottom-f.top+"px"});var O=l.info.textState.text;void 0===e&&(e=O,_.focus()),"string"==typeof _.innerText?_.innerText=O:_.textContent=O;var w=l.info.textState.size,E=l.getMatrix().toArray().slice(0,4);w*d()<12&&(w*=12,E[0]/=12,E[1]/=12,E[2]/=12,E[3]/=12),E[0]*=y,E[1]*=-y,E[2]*=-y,E[3]*=y;var P=new i.Matrix(E[0],E[1],E[2],E[3],0,0),C=g.getRotationAngle()+m;P.rotate(C/180*Math.PI);switch(l.info.textState.font.baseName){case"TimesNewRoman":"Times New Roman"}b.css({fontFamily:'"'+[l.info.textState.font.baseName,l.info.textState.font.familyName,l.info.textState.font.nameKey,l.info.textState.font.name,"FoxitPDFSDKForWeb"].join('","')+'"',fontSize:w+"pt",fontWeight:l.info.textState.font.isBold?700:400,fontStyle:l.info.textState.font.isItalic?"italic":"",transform:"matrix("+P.toArray().join(",")+")",color:(0,u.colorConvertor)(16777215&l.getFillColor(),"#")});var T=b.height(),S=b.width(),x=P.transformPoint(S,T),R=x[0],A=x[1],D=void 0,I=void 0;R>=0&&A>0?(D=-P.transformPoint(S,0)[1]-T,I=0):R<0&&A>=0?(D=-P.transformPoint(S,0)[1]-T,I=-P.transformPoint(0,S)[1]):R<=0&&A<0?(D=P.transformPoint(0,T)[1]-T,I=-R+P.transformPoint(0,T)[0]):R>0&&A<=0&&(D=-P.transformPoint(0,T)[1]-T,I=R-P.transformPoint(S,0)[0]),b.css({top:D+"px",left:I+"px",transformOrigin:"left "+T+"px",bottom:"auto"}),e!==O&&("string"==typeof _.innerText?_.innerText=e:_.textContent=e),(0,s.addFont)(l.info.textState.font.nameKey||l.info.textState.font.name,l.getWoff.bind(l)).catch((function(){})),t.reActive=function(e){t.unActive(),t.activeCharEdit(e)};var j=t.pageRender.pdfViewer.getEventEmitter();j.emit(a.default.textObjectActive,t),t.beforeZoomToBind&&j.off(h,t.beforeZoomToBind),t.pageRedrawBind&&j.off(v,t.pageRedrawBind),j.once(h,t.beforeZoomToBind=t.unActiveCharEdit.bind(t)),j.on(v,t.pageRedrawBind=function(n){n.index===t.getModel().getPDFPage().getIndex()&&(e="string"==typeof _.innerText?_.innerText:_.textContent,t.reActive(e))})}))},t.prototype.setTextChar=function(e){return this.graphicsObject.setText(e)},t.prototype.getContextMenuConfig=function(){},t.prototype.getTextChar=function(){if(this.$charEditContainer){var e=this.$charEditContainer.find(".fv__text-object-edit-char-input")[0],t=e.innerText;return"string"!=typeof t&&(t=e.textContent),t}return this.getModel().getText()},t.prototype.textCharSure=function(){if(!this.isApplyEdit&&this.$charEditContainer){var e=this.$charEditContainer.find(".fv__text-object-edit-char-input")[0],t=e.textContent;return"string"!=typeof t&&(t=e.innerText),this.getModel().setText(t)}return Promise.resolve()},t.prototype.remove=function(){e.prototype.remove.call(this),this.graphicsObject.remove(),this.dependences.pdfViewer.unActiveElement(this),this.destroy()},t}(o.default);t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=void 0,o=void 0,i={};"function"==typeof FontFace?(t.addFont=r=function(e,t){return i[e]?i[e]:i[e]=new Promise((function(n,r){t().then((function(t){if(!t)return r(),void i[e];var o=new FontFace(e,t.buffer||t.url);o.load().then((function(){document.fonts.add(o),n(o)}),(function(){r(),delete i[e]}))}),(function(){r(),delete i[e]}))}))},t.removeFont=o=function(e){i[e]&&i[e].then((function(t){delete i[e],document.fonts.delete(t)}))}):(t.addFont=r=function(e,t){return i[e]?i[e]:i[e]=new Promise((function(n,r){t().then((function(t){return t?t.buffer?URL.createObjectURL(new Blob([t.buffer],"application/x-font-woff")):t.url:(r("woff is invalid"),void delete i[e])})).then((function(t){if(!t)return r();var o=document.createElement("style");o.innerHTML='@font-face{font-family:"'+e+'"; src:url("'+t+'");}',document.head.appendChild(o),n(o)}))}))},t.removeFont=o=function(e){i[e]&&i[e].then((function(t){delete i[e],t.parentNode.removeChild(t)}))}),t.addFont=r,t.removeFont=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=(r=o)&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),s=n(3),c=n(10);function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}var p=a.Deps.jQuery,l=function(e){function t(n,r,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r,o))}return u(t,e),t.prototype.active=function(){e.prototype.active.call(this)},t.prototype.getPropertyOptions=function(){var e=this.graphicsObject,t=e.getBorderColor();t=this.graphicsObject.needStroke()?(0,c.colorConvertor)(t||4278190080,"#"):0;var n=e.getFillColor();0==e.getFillMode()&&(n=0);var r=e.getBorderWidth();return{color:t,borderTransparent:!0,opacity:e.getOpacity(),fillColor:n,borderWidth:r}},t.prototype.initUI=function(){var t=this;e.prototype.initUI.call(this),this.$tip=p('<div class="fwr__path-object-tip"></div>'),this.$tip.appendTo(this.$handler);var n=this.rectHammer=new Hammer.Manager(this.$handler[0],{recognizers:[[Hammer.Press]]});return this.$handler.on("mousemove",(function(e){t.$tip.hide()})),n.on("press",(function(e){if(!p(".fv__ui-mobile").length){var n=t.graphicsObject.getRect(),r=f(t.$handler.parent()[0],e),o={left:r.x+"px",top:r.y+20+"px"};r=t.pageRender.page.reverseDevicePoint([r.x,r.y],t.pageRender.getScale(),t.pageRender.getRotation()),t.$tip.show().css(o).html("object : x:"+n.left.toFixed(2)+",y:"+n.bottom.toFixed(2)+"<br/>mouse: x:"+r[0].toFixed(2)+",y:"+r[1].toFixed(2))}})),this.$handler},t.prototype.showPropertiesDialog=function(e){var t=this.dependences.pdfViewer.activePropertiesDialog;this.dependences.pdfViewer.activePropertiesDialog?(t.show(e),t.setViewerComponent(this),this.activePropertiesDialog=t):this.propertiesControl=new a.PropertiesControl(this)},t.prototype.getContextMenuComponentName=function(){return"fv--path-graphics-object-contextmenu"},t.prototype.getContextMenuConfig=function(){var e=this;return{selector:"div.fv__shape-control",items:{properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,n,r){e.showPropertiesDialog(r)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){e.remove()}}}}},t.prototype.unActive=function(t){var n=this.activePropertiesDialog;n&&n.viewerComponent===this&&n.hide(),e.prototype.unActive.call(this,t)},t.prototype.remove=function(){e.prototype.remove.call(this),this.graphicsObject.remove(),this.dependences.pdfViewer.unActiveElement(this),this.destroy()},t.prototype.destroy=function(){this.contextmenu&&this.contextmenu.destroy(),this.propertiesControl&&this.propertiesControl.close(),this.propertiesControl=null,this.rectHammer&&this.rectHammer.destroy(),e.prototype.destroy.call(this)},t}(i.default);t.default=l;var f=function(e,t){var n=e.getBoundingClientRect(),r=t.srcEvent,o=(0,s.getClientX)(r),i=(0,s.getClientY)(r);return{x:o-n.left-t.deltaX,y:i-n.top-t.deltaY}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2),i=(r=o)&&r.__esModule?r:{default:r},a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),s=n(29);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}var l=a.Deps.jQuery,f=a.Events,d=function(e){function t(){return c(this,t),u(this,e.apply(this,arguments))}return p(t,e),t.prototype._resize=function(t,n,r){t==s.DIR_NORTH||t==s.DIR_SOUTH||t==s.DIR_EAST||t==s.DIR_WEST?this.enableUniform=!1:this.enableUniform=!0,e.prototype._resize.call(this,t,n,r)},t}(a.ShapeControl),h=function(e){function t(n,r,o){return c(this,t),u(this,e.call(this,n,r,o))}return p(t,e),t.getDefaultContextMenuConfig=function(){return defaultContextMenuConfig},t.setContextMenuConfig=function(e){e},t.prototype.initUI=function(){var e=this,t=this,n=this.$handler=l('<div class="fwr__graphics-object-handler" \n        ></div>');return this.pageRender.pageHandler.$handler.append(n),n.get(0).__graphics_object_component=this,this.shapeControl=new d({prestart:function(){return e.onPrestart()},start:function(t,n,r){return e.onStartUpdateShape(t,n,r)},moving:function(t,n,r){var o=r.offsetX,i=r.offsetY;return e.onShapeMoving(t,n,o,i)},update:function(t,n){return e.onShapeUpdating(t,n)},beforeRotateStart:function(){return e.onBeforeRotateStart()},rotateEnd:function(t,n,r,o){return e.onRotate(t)},afterRotateEnd:function(){return e.onAfterRotateEnd()},rotateStart:function(){return e.onRotateStart()},end:function(t,n,r,o){return e.onShapeUpdateEnd(t,n,r,o)},afterEnd:function(t){return e.onAfterShapeCtrlEnd(t)},resizable:!0,rotatable:!0,enableDiagonally:!0,enableFrame:!0,enableUniform:!0,previewer:!0,enableSizeBox:!0}),this.dependences.pdfViewer.eventEmitter.on(f.zoomToSuccess,this.afterZoom=function(){t.updateShapeControl()}),this.$handler},t.prototype.onBeforeRotateStart=function(){var e=this;this.dependences.pdfViewer.getAllActiveElements().forEach((function(n){n!==e&&n instanceof t&&e.shapeControl.companion(n.shapeControl)}))},t.prototype.onAfterRotateEnd=function(){this.shapeControl.clearCompanions(),this.shapeControl.rotateDegree=0},t.prototype.onRotate=function(e){var t=this;return this.pageRender.$handler.get(0).classList.remove("fv__cursor-rotation"),this.graphicsObject.setRotation(e).then((function(e){t.updateShapeControl()}))},t.prototype.updateShapeControl=function(){e.prototype.updateShapeControl.call(this),this.shapeControl.ui.style.transform=""},t.prototype.onRotateStart=function(){this.pageRender.$handler.get(0).classList.add("fv__cursor-rotation")},t.prototype.getContextMenuConfig=function(){var e=this;return{selector:"div.fv__shape-control",items:{properties:{name:"properties",nameI18nKey:"viewer_:contextmenu.annot.properties",callback:function(t,n,r){e.showPropertiesDialog(r)}},remove:{name:"delete",nameI18nKey:"viewer_:contextmenu.annot.delete",callback:function(){var t=e.dependences.pdfViewer;if(t.getAllActiveElements().forEach((function(e){e.remove&&e.remove()})),0===t.getAllActiveElements().length){var n=t.getCurrentActivatable();n&&t.unActiveElement(n)}}}}}},t.prototype.getContextMenuComponentName=function(){return"fv--image-graphics-object-contextmenu"},t.prototype.getPropertyOptions=function(){return{opacity:this.graphicsObject.getOpacity(),borderStyle:!1}},t.prototype.showPropertiesDialog=function(e){var t=this.dependences.pdfViewer.activePropertiesDialog;this.dependences.pdfViewer.activePropertiesDialog?(t.show(e),t.setViewerComponent(this),this.activePropertiesDialog=t):this.$propertiesControl=new a.PropertiesControl(this)},t.prototype.hidePropertiesDialog=function(){this.$propertiesControl&&this.$propertiesControl.close()},t.prototype.destroy=function(){this.contextmenu&&this.contextmenu.destroy(),this.dependences.pdfViewer.eventEmitter.off(f.zoomToSuccess,this.afterZoom),e.prototype.destroy.call(this)},t.prototype.setOpacity=function(e){this.graphicsObject.setOpacity(e)},t.prototype.remove=function(){e.prototype.remove.call(this),this.graphicsObject.remove(),this.dependences.pdfViewer.unActiveElement(this),this.destroy()},t.prototype.unActive=function(t){var n=this.activePropertiesDialog;n&&n.viewerComponent===this&&n.hide(),e.prototype.unActive.call(this,t)},t}(i.default);t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DIR_NORTH="north",t.DIR_SOUTH="south",t.DIR_EAST="east",t.DIR_WEST="west",t.DIR_NORTH_WEST="north-west",t.DIR_NORTH_EAST="north-east",t.DIR_SOUTH_WEST="south-west",t.DIR_SOUTH_EAST="south-east"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}var a=function(e){function t(n,r,o){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n,r,o))}return i(t,e),t.prototype.active=function(){},t.prototype.getContextMenuConfig=function(){},t}(((r=o)&&r.__esModule?r:{default:r}).default);t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e,t){var n=e.graphicsManager,i=["","text","path","image","shading","all"][t],u=i?["fv__edit-",i,"-state-handler"].join(""):"";return u+=" fv__edit-graphics-state-handler",function(o){function p(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}(p,o),p.getStateName=function(){return"edit-"+i},p.prototype.pageHandler=function(o){var i=this;this.pageRender=o;var p=o.getPDFPage(),l=o.$handler,f=l[0];l.addClass(u);var d=this.hammer=new s(f);this.pdfViewer.addKeyboardShortcutEventListener(a.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT,(function(e){i.resetHandler()}),a.EDIT_TEXT_OBJECT_BINDER),d.on("tap",(function(a){if(-1!=a.target.className.indexOf("fv__shape-control-move-area"))return Promise.resolve();i.resetHandler();var s=c(f,a);p.then((function(e){return[e,e.reverseDevicePoint([s.x,s.y],o.getScale(),o.getRotation())]})).then((function(e){var n=r(e,2),o=n[0],i=r(n[1],2),a=i[0],s=i[1];return 5===t?o.getGraphicsObjectAtPoint([a,s],5,0):o.getGraphicsObjectAtPoint([a,s],3,t)})).then((function(e){return!e||e.type<1||e.type>3?Promise.reject():[n.get(e),e]})).then((function(t){var n=r(t,2);return new(0,n[0])(n[1],o,e)})).then((function(e){return i.currentComponent=e,e.active()})).catch((function(e){e&&console.error(e),i.currentComponent=null,i.pdfViewer.activeElement()}))}))},p.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(u),this.resetHandler()},p.prototype.out=function(){this.destroyPageHandler()},p.prototype.resetHandler=function(){this.currentComponent&&(this.currentComponent.textCharSure&&this.currentComponent.textCharSure(),this.currentComponent.unActive())},p}(o.IStateHandler)};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(3),a=n(5);var s=o.Deps.Hammer;var c=function(e,t){var n=e.getBoundingClientRect(),r=t.srcEvent,o=(0,i.getClientX)(r),a=(0,i.getClientY)(r);return{x:o-n.left-t.deltaX,y:a-n.top-t.deltaY}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){var t=e.graphicsManager,n="text",a=n?["fv__edit-",n,"-state-handler"].join(""):"";return a+=" fv__edit-graphics-state-handler",function(o){function s(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,o.call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}(s,o),s.getStateName=function(){return"edit-"+n},s.prototype.pageHandler=function(n){var o=this;this.pageRender=n;var s=n.$handler,c=s[0];s.addClass(a);var u=this.hammer=new i.Manager(c,{recognizers:[[i.Pan,{direction:i.DIRECTION_ALL}]]});u.add(new i.Tap({event:"doubletap",taps:2})),u.add(new i.Tap({event:"singletap"})),u.get("doubletap").recognizeWith("singletap"),u.get("singletap").requireFailure("doubletap"),u.on("singletap",(function(i){o.resetHandler();var a=i.changedPointers[0];n.getPDFPage().then((function(e){return[e,e.reverseDevicePoint([a.offsetX,a.offsetY],n.getScale(),n.getRotation())]})).then((function(e){var t=r(e,2),n=t[0],o=r(t[1],2),i=o[0],a=o[1];return n.getGraphicsObjectAtPoint([i,a],3,1)})).then((function(e){return e?[t.get(e),e]:Promise.reject(new Error("Text object not found at this position: ["+a.offsetX+", "+a.offsetY+"]"))})).then((function(t){var o=r(t,2);return new(0,o[0])(o[1],n,e)})).then((function(e){return o.currentComponet=e,e.active()})).catch((function(e){e&&console.error(e),o.currentComponet=null,o.pdfViewer.activeElement()}))})),u.on("doubletap",(function(i){o.resetHandler();var a=i.changedPointers[0];n.getPDFPage().then((function(e){return[e,e.reverseDevicePoint([a.offsetX,a.offsetY],n.getScale(),n.getRotation())]})).then((function(e){var t=r(e,2),n=t[0],o=r(t[1],2),i=o[0],a=o[1];return n.getGraphicsObjectAtPoint([i,a],3,1)})).then((function(e){return e?[t.get(e),e]:Promise.reject(new Error("Text object not found at this position: ["+a.offsetX+", "+a.offsetY+"]"))})).then((function(t){var o=r(t,2);return new(0,o[0])(o[1],n,e)})).then((function(e){return o.currentComponet=e,e.activeCharEdit()})).catch((function(e){e&&console.error(e),o.currentComponet=null,o.pdfViewer.activeElement()}))}))},s.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(a),this.resetHandler()},s.prototype.out=function(){this.destroyPageHandler()},s.prototype.resetHandler=function(){this.currentComponet&&(this.currentComponet.textCharSure&&this.currentComponet.textCharSure(),this.currentComponet.unActive())},s}(o.IStateHandler)};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var i=o.Deps.Hammer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=n(34),s=(r=a)&&r.__esModule?r:{default:r},c=n(35),u=n(3);function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}var l=i.Deps.Hammer,f=null,d=0,h=i.IStateHandler,v=!1,g=function(e){function t(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n));return r.destroyHooks=[],r}return p(t,e),t.prototype.addDestroyHook=function(){var e;(e=this.destroyHooks).push.apply(e,arguments)},t.prototype.addEventTo=function(e,t,n){return e.on(t,n),function(){e.off(t,n)}},t.setAddon=function(e){f=e},t.getStateName=function(){return"add-path-object"},t.setPathType=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;d=e},t.prototype.pageHandler=function(e){var t=this;this.pageRender=e;var n=e.$handler;n.addClass("fv__create-callout-state-handler "+this.cursorStyle),this.shapeDom=(0,c.getShapeDom)(n);var r=n[0],i=this.hammer=new l.Manager(r,{recognizers:[[l.Pan,{direction:l.DIRECTION_ALL}]]}),a=void 0,u=void 0,p=function(e){v=-1!=e.target.className.indexOf("fv__pdf-page-handler-container")};this.addDestroyHook(this.addEventTo(n,"mousedown",p),this.addEventTo(n,"touchstart",p),(function(){i.destroy()})),i.on("panstart",(function(e){v&&(a=y(r,e))})).on("panend",(function(n){if(a){u={x:a.x+n.deltaX,y:a.y+n.deltaY};var r=t.pageRender.page.reverseDevicePoint([a.x,a.y],t.pageRender.getScale(),t.pageRender.getRotation()),i=t.pageRender.page.reverseDevicePoint([u.x,u.y],t.pageRender.getScale(),t.pageRender.getRotation()),c={x:r[0],y:r[1]},p={x:i[0],y:i[1]},l=s.default.generatePoints(c,p,d),h=s.default.pointsToRect(c,p);t.pageRender.page.addGraphicsObject({type:2,points:l,rect:h}).then((function(e){return a=null,t.shapeDom.hide(),e})).then((function(e){return e?[f.graphicsManager.get(e),e]:Promise.reject(new Error("Graphics object was not created!"))})).then((function(t){var n=o(t,2);return new(0,n[0])(n[1],e,f)})).then((function(e){t.currentComponet=e,t.pdfViewer.activeElement(e)})).catch((function(e){throw t.currentComponet=null,t.pdfViewer.activeElement(),e}))}})).on("panmove",(function(e){if(a){u={x:a.x+e.deltaX,y:a.y+e.deltaY};var n=s.default.pointsToRect(a,u,!0),r=s.default.generatePoints(a,u,d);(0,c.drawShape)(r,n,t.shapeDom)}}))},t.prototype.destroyPageHandler=function(){this.destroyHooks.forEach((function(e){return e()})),this.resetHandler()},t.prototype.out=function(){this.destroyPageHandler()},t.prototype.resetHandler=function(){this.currentComponet&&this.currentComponet.destroy()},t}(h);t.default=g;var y=function(e,t){var n=e.getBoundingClientRect(),r=t.srcEvent,o=(0,u.getClientX)(r),i=(0,u.getClientY)(r);return{x:o-n.left-t.deltaX,y:i-n.top-t.deltaY}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return e.pointsToRect=function(e,t,n){var r=e.x>t.x?t.x:e.x,o=e.x<t.x?t.x:e.x,i=e.y>t.y?t.y:e.y,a=e.y<t.y?t.y:e.y;if(n){var s=i;(i=a)-(a=s)<1&&(i=a+1,a-=1)}else a-i<1&&(a=i+1,i-=1);return o-r<1&&(o=r+1,r-=1),{left:r-2,top:a+1,right:o+2,bottom:i-1}},e.generatePoints=function(t,n,r){var o=t.x,i=t.y,a=n.x-o,s=n.y-i;switch(r){case"line":return e.genLinePoints(o,i,a,s);case"square":return e.genSquarePoints(o,i,a,s);case"circle":return e.genOvalPoints(o,i,a,s);case"roundRect":return e.genRoundRectPoints(o,i,a,s)}},e.genLinePoints=function(e,t,n,r){var o=[];return o.push(["m",e,t]),o.push(["l",e+n,t+r]),o},e.genOvalPoints=function(e,t,n,r){var i=[];return i.push(["m",e+n/2,t]),(i=(i=(i=(i=i.concat(o(e+n/2,t,n/2,r/2,1))).concat(o(e+n,t+r/2,-n/2,r/2,0))).concat(o(e+n/2,t+r,-n/2,-r/2,1))).concat(o(e,t+r/2,n/2,-r/2,0))).push(["h",i[0][1],i[0][2]]),i},e.genRoundRectPoints=function(e,t,n,r){var i=[],a=.2*n,s=.2*r,c=.8*n,u=.8*r;return i.push(["m",e+a,t]),i.push(["l",e+c,t]),(i=i.concat(o(e+c,t,a,s,1))).push(["l",e+n,t+u]),(i=i.concat(o(e+n,t+u,-a,s,0))).push(["l",e+a,t+r]),(i=i.concat(o(e+a,t+r,-a,-s,1))).push(["l",e,t+s]),(i=i.concat(o(e,t+s,a,-s,0))).push(["l",i[0][1],i[0][2]]),i.push(["h"]),i},e.genSquarePoints=function(e,t,n,r){var o=[];return o.push(["m",e,t]),o.push(["l",e+n,t]),o.push(["l",e+n,t+r]),o.push(["l",e,t+r]),o.push(["h",e,t]),o},e}();function o(e,t,n,r,o){var i=[],a=.5522847498308;return o?(i.push(["c",e+a*n,t]),i.push(["c",e+n,t+a*r]),i.push(["c",e+n,t+r])):(i.push(["c",e,t+a*r]),i.push(["c",e+a*n,t+r]),i.push(["c",e+n,t+r])),i}t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.drawShape=t.getShapeDom=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)).Deps.jQuery;t.getShapeDom=function(e){var t=e.find(".fv__add-path-preview");return 0==t.length&&(t=r('<canvas class="fv__add-path-preview" style="position: absolute;display:none"></canvas>'),e.append(t)),t},t.drawShape=function(e,t,n){var r=n[0],o=r.getContext("2d");o.clearRect(0,0,n.width(),n.height()),r.width=t.right-t.left+4,r.height=t.bottom-t.top+4,o.clearRect(0,0,n.width(),n.height()),o.beginPath(),o.lineWidth=2,o.strokeStyle="#5aa",o.transform(1,0,0,1,2-t.left,2-t.top);for(var i=[],a=0;a<e.length;a++)switch(e[a][0]){case"m":o.moveTo(e[a][1],e[a][2]);break;case"l":o.lineTo(e[a][1],e[a][2]);break;case"c":i.push(e[a][1],e[a][2]),6===i.length&&(o.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]),i=[]);break;case"h":4===i.length?(o.bezierCurveTo(i[0],i[1],i[2],i[3],e[a][1],e[a][2]),i=[]):o.lineTo(e[a][1],e[a][2]),o.closePath()}o.stroke(),n.css({left:t.left,top:t.top}).show()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=n(3);function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}var a=r.Deps.jQuery,s=r.IStateHandler,c=r.Events,u=null,p=function(e){function t(n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.call(this,n))}return i(t,e),t.setAddon=function(e){u=e},t.getStateName=function(){return"add-image-object"},t.prototype.pageHandler=function(e){var t=this,n=this;this.pageRender=e;var r=this.$handler=e.$handler,o=r[0],i=this.hammer=new Hammer.Manager(o,{recognizers:[[Hammer.Tap],[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]}),s=void 0,p=void 0;function f(){return p||(p=a('<img style="position: absolute;top:200%;left:0;border:2px solid transparent;" src="'+s+'"/>'),r.append(p),p)}this.pdfViewer.eventEmitter.on(c.addEditImage,this.loadFile=function(e){s=e}),r.off("mouseenter").on("mouseenter",(function(e){s&&f().show()})),r.off("mousemove mousewheel").on("mousemove mousewheel",(function(e){if(s){var t=o.getBoundingClientRect(),n=e.clientX-t.left,r=e.clientY-t.top;f().css({top:r,left:n})}})),r.off("mouseleave").on("mouseleave",(function(e){s&&f().hide()}));var d=!0;i.on("tap",(function(r){if(d&&(d=!1,s)){var i={},a=l(o,r),c=f(),p=c.width(),h=c.height();e.getPDFPage().then((function(r){var o,l=e.getRotation(),f=3*p/r.getPxWidth(),v=3*h/r.getPxHeight();if(f>1||v>1){var g=Math.max(f,v);g>1&&(g=1/g),p*=g,h*=g}if(90===l||270===l){var y=p;p=h,h=y}i.top=a.y,i.left=a.x,i.right=i.left+p,i.bottom=i.top+h,(o=s,new Promise((function(e,t){var n=new XMLHttpRequest;n.open("GET",o),n.responseType="arraybuffer",n.onreadystatechange=function(){4===n.readyState&&(n.status>=200&&n.status<300||304===n.status?e(n.response):t())},n.onerror=function(){t()},n.send()}))).then((function(o){var a=r.reverseDeviceRect(i,e.getScale(),l);r.addImage(o,a,l).then((function(n){var r=new(u.graphicsManager.get(n))(n,e,u);t.pdfViewer.getStateHandlerManager().switchTo("edit-all"),t.currentComponet=r,c.remove(),d=!0,t.pdfViewer.activeElement(r)})).catch((function(e){e&&console.error(e),n.currentComponet=null,n.pdfViewer.activeElement()}))}))}))}}))},t.prototype.destroyPageHandler=function(){this.$handler.off("mousemove mousewheel mouseleave"),this.$handler.empty(),this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.pdfViewer.eventEmitter.off(c.addEditImage,this.loadFile)},t.prototype.out=function(){this.destroyPageHandler()},t}(s);t.default=p;var l=function(e,t){var n=e.getBoundingClientRect(),r=t.srcEvent,i=(0,o.getClientX)(r),a=(0,o.getClientY)(r);return{x:i-n.left-t.deltaX,y:a-n.top-t.deltaY}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){var t=e.graphicsManager;return function(n){function o(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,n.call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}(o,n),o.getStateName=function(){return"add-text-object"},o.prototype.pageHandler=function(n){var o=this;this.pageRender=n;var a=n.getPDFPage(),p=n.$handler,l=p[0];p.addClass(c),(this.hammer=new u(l)).on("tap",(function(s){o.resetHandler();var c=s.changedPointers[0];a.then((function(e){return[e,e.reverseDevicePoint([c.offsetX,c.offsetY],n.getScale(),n.getRotation())]})).then((function(e){var t=r(e,2),a=t[0],s=r(t[1],2),c=s[0],u=s[1],p=a.getRotationAngle(),l=new i.Matrix;return l.rotate((p+n.getRotation())/180*Math.PI),l.translate(c,u),a.addGraphicsObject(Object.assign({},o.addParams,{originPosition:{x:c,y:u}},{type:1,matrix:l.toArray()}))})).then((function(e){return e?[t.get(e),e]:Promise.reject(new Error("Graphics object was not created!"))})).then((function(t){var o=r(t,2);return new(0,o[0])(o[1],n,e)})).then((function(e){return o.currentComponet=e,e.activeCharEdit()})).catch((function(e){e&&console.error(e),o.currentComponet=null,o.pdfViewer.activeElement()}))})),this.pdfViewer.getEventEmitter().on(s.default.addTextObjectParamTransfer,this.addTextObjectParamTransferBind=function(e){o.addParams=e})},o.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(c),this.addParams=null,this.pdfViewer.getEventEmitter().off(s.default.addTextObjectParamTransfer,this.addTextObjectParamTransferBind),this.resetHandler()},o.prototype.out=function(){this.destroyPageHandler()},o.prototype.resetHandler=function(){this.currentComponet&&(this.currentComponet.textCharSure&&this.currentComponet.textCharSure(),this.currentComponet.unActive())},o}(i.IStateHandler)};var o,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),a=n(6),s=(o=a)&&o.__esModule?o:{default:o};var c="fv__add-text-object-state-handler",u=i.Deps.Hammer},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){var t=e.graphicsManager,n="fv__edit-all-state-handler fv__edit-graphics-state-handler";return function(s){function y(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,s.call(this,e));return t.destroyHooks=[],t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}(y,s),y.getStateName=function(){return"edit-all"},y.prototype.pageHandler=function(s){var y=this,m=new d;this.pageRender=s;var b=s.getPDFPage(),_=s.$handler,O=_[0];_.addClass(n);var w=new v;this.selections=new c({anchorElement:O,borderStyle:l.DOTTED}),this.selections.reducer(p(O)),this.selections.reducer((function(e){var t=O.getBoundingClientRect();return Object.assign({left:e.clientLeft-t.left,top:e.clientTop-t.top},e)})),this.selections.eventInterceptor((function(e){return e.target===O}));var E=!1;this.selections.eventInterceptor((function(e){return E}));var P=function(e){E=e.target===O};O.addEventListener("mousedown",P),O.addEventListener("touchstart",P),this.destroyHooks.push((function(){O.removeEventListener("mousedown",P),O.removeEventListener("touchstart",P)})),this.selections.on(u.END,(function(n){w.exec((function(){return b.then((function(r){var o=y.pageRender.scale,i=y.pageRender.getRotation(),c=r.reverseDeviceRect({left:n.left,right:n.left+n.width,top:n.top,bottom:n.top+n.height},o,i),u=Math.min(2/y.pageRender.scale,2);return r.getGraphicsObjectsInRect(c,u,a.GraphicsObjectType.ALL).then((function(n){!n||n.length<1||(T()||m.clear(),y.pdfViewer.activeElement(m),n.forEach((function(n){var r=n.getRect();if(!(r.right-r.left<1||r.top-r.bottom<1)){var o=new(t.get(n))(n,s,e);m.add(o),o.$handler.get(0).addEventListener("click",(function(e){0===e.button&&T()&&m.remove(o)}),!0)}})))}))}))}))}));var C=this.hammer=new f(O);C.on("tap",(function(n){if(-1!=n.target.className.indexOf("fv__shape-control-move-area"))return Promise.resolve();y.resetHandler();var o,a,c,u,p,l=(o=n,a=O.getBoundingClientRect(),c=o.srcEvent,u=(0,i.getClientX)(c),p=(0,i.getClientY)(c),{x:u-a.left-o.deltaX,y:p-a.top-o.deltaY});b.then((function(e){return[e,e.reverseDevicePoint([l.x,l.y],s.getScale(),s.getRotation())]})).then((function(e){var t=r(e,2),n=t[0],o=r(t[1],2),i=o[0],a=o[1];return n.getGraphicsObjectAtPoint([i,a],5,0)})).then((function(e){return e?e.type<1||e.type>3?Promise.reject():[t.get(e),e]:Promise.reject(g)})).then((function(t){var n=r(t,2);return new(0,n[0])(n[1],s,e)})).then((function(e){y.currentComponent=e,T()||m.clear(),m.add(e),y.pdfViewer.activeElement(m),e.$handler.get(0).addEventListener("click",(function(t){0===t.button&&T()&&m.remove(e)}),!0)})).catch((function(e){e===g&&T()||(e!==g&&e&&console.error(e),y.currentComponent=null,y.pdfViewer.activeElement())}))})),this.destroyHooks.push((function(){return C.destroy()}),(function(){return y.selections.destroy()}),(function(){m.clear(),y.pdfViewer.unActiveElement(m)}));var T=function(){return!!y.pdfViewer.isShortcutKeyEnabled()&&(o.DeviceInfo.isMac?h.isWin:h.isCtrl)}},y.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.destroyHooks.forEach((function(e){return e()})),this.pageRender.$handler.removeClass(n),this.resetHandler(),this.pageRender=null,this.destroyHooks=null},y.prototype.out=function(){this.destroyPageHandler()},y.prototype.resetHandler=function(){this.currentComponent&&this.currentComponent.textCharSure&&this.currentComponent.textCharSure()},y}(o.IStateHandler)};var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(3),a=(n(5),n(39));var s=o.shared.areaSelections,c=s.Selections,u=s.SelectionEventType,p=s.createAreaLimitationReducer,l=s.BorderStyle,f=o.Deps.Hammer,d=o.shared.activation.ActivationGroup,h=o.shared.keyboardStatus,v=o.shared.QueuedAsyncTaskExecutor,g={}},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"GraphicsObjectType",(function(){return r})),function(e){e[e.ALL=0]="ALL",e[e.TEXT=1]="TEXT",e[e.PATH=2]="PATH",e[e.IMAGE=3]="IMAGE",e[e.SHADING=4]="SHADING",e[e.FORM_X_OBJECT=5]="FORM_X_OBJECT"}(r||(r={}))},function(e,t){e.exports=null},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=n(11);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}var c=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.getName=function(){return"MoveFrontGraphicsObjectController"},t.prototype.handle=function(e){var t=this.component.parent.getCurrentTarget();t.moveToPosition&&t.moveToPosition(o.POS_TYPE.FIRST,null)},t}(r.Controller);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={MARKED:"marked",UNMARKED:"unmarked",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled",COMPLETED:"completed",NONE:"none"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),o=n(11);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}var c=function(e){function t(){return i(this,t),a(this,e.apply(this,arguments))}return s(t,e),t.getName=function(){return"MoveBackGraphicsObjectController"},t.prototype.handle=function(e){var t=this.component.parent.getCurrentTarget();t.moveToPosition&&t.moveToPosition(o.POS_TYPE.LAST,null)},t}(r.Controller);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.getName=function(){return"ShowGraphicsObjectPropertiesController"},t.prototype.handle=function(e){var t=this.component.parent.getCurrentTarget();t.showPropertiesDialog&&t.showPropertiesDialog(e)},t}(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)).Controller);t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):function(e,t){for(var n=Object.getOwnPropertyNames(t),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(t,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}}(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){return r(this,t),o(this,e.apply(this,arguments))}return i(t,e),t.getName=function(){return"DeleteGraphicsObjectController"},t.prototype.handle=function(){var e=this.component.parent.getCurrentTarget();e.remove&&e.remove()},t}(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)).Controller);t.default=a},function(e,t,n){"use strict";n.r(t);var r=n(4);var o=function(){function e(e){Object(r.assertThat)(Array.isArray(e),"Illegal Matrix values, it should be an array! But actual: "+e),Object(r.assertThat)(16===e.length,"Incorrect matrix values size, it must be 16!"),this.values=e,this.cols=Math.sqrt(e.length)}return e.prototype.multiVec4=function(e,t,n,r){return void 0===r&&(r=1),[this.getAt(0,0)*e+this.getAt(0,1)*t+this.getAt(0,2)*n+this.getAt(0,3)*r,this.getAt(1,0)*e+this.getAt(1,1)*t+this.getAt(1,2)*n+this.getAt(1,3)*r,this.getAt(2,0)*e+this.getAt(2,1)*t+this.getAt(2,2)*n+this.getAt(2,3)*r,this.getAt(3,0)*e+this.getAt(3,1)*t+this.getAt(3,2)*n+this.getAt(3,3)*r]},e.prototype.getAt=function(e,t){var n=e*this.cols+t;return Object(r.assertThat)(n<this.values.length,"Cannot access value at ("+e+","+t+"), it out bound of this matrix!"),this.values[n]},e}(),i=function(){function e(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=1),this.a=e,this.b=t,this.c=n,this.d=r}return e.prototype.transform=function(t){var n=t.multiVec4(this.a,this.b,this.c,this.d);return new e(n[0],n[1],n[2],n[3])},e.prototype.scale=function(e,t,n){return void 0===t&&(t=e),void 0===n&&(n=t),this.transform(function(e,t,n){return void 0===t&&(t=e),void 0===n&&(n=t),new o([e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1])}(e,t,n))},e.prototype.rotateZ=function(e){return this.transform(function(e){void 0===e&&(e=0);var t=e/180*Math.PI,n=Math.cos(t),r=Math.sin(t);return new o([n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1])}(e))},e.prototype.translate=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),this.transform(function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),new o([1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1])}(e,t,n))},e}();t.default=i}]).default}));