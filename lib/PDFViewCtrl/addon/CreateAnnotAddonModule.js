!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("PDFViewCtrl")):"function"==typeof define&&define.amd?define(["PDFViewCtrl"],e):"object"==typeof exports?exports.PDFViewCtrl_CreateAnnotAddonModule=e(require("PDFViewCtrl")):t.PDFViewCtrl_CreateAnnotAddonModule=e(t.PDFViewCtrl)}(self,(function(t){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=45)}([function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(63);Object.defineProperty(e,"MARKUP_ANNOTATION_STATE",{enumerable:!0,get:function(){return(t=r,t&&t.__esModule?t:{default:t}).default;var t}});e.BORDER_STYLE={SOLID:0,DASHED:1,UNDERLINE:2,BEVELED:3,INSET:4,CLOUDY:5},e.POINT_TYPE={MOVE_TO:1,LINE_TO:2,LINE_TO_CLOSE_FIGURE:3,BEZIER_TO:4,BEZIER_TO_CLOSE_FIGURE:5},e.Intents={LINE_ARROW:"LineArrow",LINE_DIMENSION:"LineDimension",POLYGON_CLOUD:"PolygonCloud",POLYGON_DIMENSION:"PolygonDimension",POLYLINE_DIMENSION:"PolyLineDimension",CIRCLE_DIMENSION:"CircleDimension",FREETEXT_TYPEWRITER:"FreeTextTypewriter",FREETEXT_CALLOUT:"FreeTextCallout",STRIKEOUT_TEXTEDIT:"StrikeOutTextEdit"};var o=e.LineEndingName={0:"None",1:"Square",2:"Circle",3:"Diamond",4:"OpenArrow",5:"ClosedArrow",6:"Butt",7:"ROpenArrow",8:"RClosedArrow",9:"Slash"};e.LineEndingStyle=Object.keys(o).reduce((function(t,e){return t[o[e]]=Number(e),t}),{}),e.LINE_CAPTION_POSITION={POS_INLINE:0,POS_TOP:1},e.AnnotFlagsName={0:"invisible",1:"hidden",2:"print",3:"nozoom",4:"norotate",5:"noview",6:"readonly",7:"locked",8:"togglenoview"},e.PDFDocPermission={PrintLowQuality:4,ModifyDocument:8,Extract:16,AnnotForm:32,FillForm:256,ExtractAccess:512,Assemble:1024,PrintHighQuality:2048},e.MeasureType={MeasureTypeX:0,MeasureTypeY:1,MeasureTypeD:2,MeasureTypeA:3,MeasureTypeT:4,MeasureTypeS:5},e.STORE_NAMES={SELECTION_INFO:"viewer--store-selection-info"},e.CREATING_MEASUREMENT_CONTEXTMENU="creating-measurement-contextmenu",e.HIGHLIGHTING_MODE={NONE:0,INVERT:1,OUTLINE:2,PUSH:3,TOGGLE:4},e.RESOLVED_PROMISE_VOID=Promise.resolve(),e.DISTANCE_TOLERANCE=2,e.POINT_TOLERANCE=.01,e.POS_TYPE={FIRST:0,LAST:1,AFTER:2,BEFORE:3},e.STANDARD_HTML_ELEMENTS=["html","a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],e.EMPTY_STR="",e.DB_PREFIX="FoxitPDFSDKForWeb_",e.SET_FORM_CREATION_CONTINUOUSLY="set_form_creation_continuously",e.HIDE_FORM_FIELD_PROPERTY_BOX="hideFormFieldPropertyBox",e.HIDE_FORM_FIELD_SIMPLE_PROPERTY_BOX="hideFormFieldSimplePropertyBox"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t.prototype.addp=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.subtractp=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.subtract=function(e,n){return new t(this.x-e,this.y-n)},t.prototype.move=function(e,n){var r=n.x-this.x,o=n.y-this.y,i=e/Math.sqrt(r*r+o*o);return new t(this.x+r*i,this.y+o*i)},t.prototype.rotate=function(e,n){var r=this.x-n.x,o=this.y-n.y,i=Math.sqrt(r*r+o*o),a=Math.atan2(o,r)-e,s=i*Math.cos(a),c=i*Math.sin(a);return new t(n.x+s,n.y+c)},t.prototype.distanceTo=function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},t.prototype.slope=function(t){var e=this._dot(t);return Math.acos(e/(this._disp()*t._disp()))},t.prototype._dot=function(t){return this.x*t.x+this.y*t.y},t.prototype._disp=function(){return Math.sqrt(this._dot(this))},t.prototype.equalTo=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n=Math.abs(n),e instanceof t&&Math.abs(this.x-e.x)<=n&&Math.abs(this.y-e.y)<=n},t.prototype.clone=function(){return new t(this.x,this.y)},t}();e.default=r},function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r,o=n(37),i=n.n(o),a=n(38),s=n.n(a),c=n(1),u=n(39),l=n.n(u),f=n(9),p=function(){function t(t){this.pdfRect={left:0,right:0,top:0,bottom:0},this.deviceRect={left:0,right:0,top:0,bottom:0},this.annotationInfo=this.getDefaultAnnotInfo(),this.eContainer=document.createElement("div"),this.eContainer.classList.add("fv__viewer-fake-annot-container"),this.pdfViewer=t.pdfViewer,this.pageRender=t.pageRender,s()(this.annotationInfo,this.getDefaultAnnotConfig(),t.info),this.annotationInfo.type=this.getType(),this.page=t.pageRender.page,this.scale=t.pageRender.scale,this.rotate=t.pageRender.rotate,this.pageRender.$annotsContainer.append(this.eContainer)}return t.prototype.setRect=function(t){this.deviceRect=t;var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top),r=Object(f.pt2px)(this.annotationInfo.borderInfo.width)*this.scale*2;if(e<r){var o=.5*(r-e)*(t.right-t.left>0?1:-1);t.right+=o,t.left-=o}if(n<r){o=.5*(r-n)*(t.bottom-t.top>0?1:-1);t.top-=o,t.bottom+=o}e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);var i=this.pageRender.rotate;this.pdfRect=this.page.reverseDeviceRect(t,this.scale,i),this.eContainer.style.cssText+="\n            left: "+t.left+"px;\n            top: "+t.top+"px;\n            width: "+e+"px;\n            height: "+n+"px;\n        "},t.prototype.setContent=function(t){this.annotationInfo.contents=t},t.prototype.zoomTo=function(t){this.scale=t},t.prototype.draw=function(){this.renderer||(this.renderer=this.generateApRenderer(),this.renderer.prepare(),this.renderer.willRender()),this.renderer.render(this.scale,this.rotate)},t.prototype.getContainerElement=function(){return this.eContainer},t.prototype.getRenderingData=function(t,e){void 0===t&&(t=this.scale),void 0===e&&(e=this.rotate);var n=this.pdfViewer.getSmartScale(t),r=this.getDeviceRect(t,e),o=this.getOuterDeviceRect(t,e),a=this.getDeviceRect(n,e);return{annotInfo:this.annotationInfo,annotFlag:new i.a(this.annotationInfo.flags),smartScale:n,rect:o,outerDeviceRect:o,innerDeviceRect:r,engineRenderingRect:a,scale:t,rotate:e,page:this.page}},t.prototype.getDeviceRect=function(t,e){return this.page.getDeviceRect(this.pdfRect,t,e)},t.prototype.getOuterDeviceRect=function(t,e){return this.getDeviceRect(t,e)},t.prototype.apply=function(){var t,e=this;null===(t=this.renderer)||void 0===t||t.afterRender();var n=this.getCreationJSON();return n.rect=this.pdfRect,this.page.addAnnot(n).then((function(t){e.destroy();var n=t[0];return e.pageRender.annotsRender.activeAnnot(n.getId()),e.pdfViewer.eventEmitter.emit(l.a.addAnnotSuccess,n),t}))},t.prototype.destroy=function(){var t;null===(t=this.renderer)||void 0===t||t.destroy(),this.getContainerElement().remove()},t.prototype.getCreationJSON=function(){return this.annotationInfo},t.prototype.getDefaultAnnotInfo=function(){return{borderInfo:{width:2,style:c.BORDER_STYLE.SOLID},color:16711680,opacity:1,flags:4,date:new Date}},t.prototype.getDefaultAnnotConfig=function(){var t=this.pdfViewer.getDefaultAnnotConfig();return"function"==typeof t?t(this.getType(),this.getIntent()):{}},t.prototype.getIntent=function(){},t}(),d=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.getTileConfig=function(t,e){void 0===t&&(t=this.scale),void 0===e&&(e=this.rotate);var n=this.pdfViewer.getSmartScale(t),r=this.pdfViewer.config.tileSize,o=this.page.getDeviceRect(this.pdfRect,1,e),i=this.page.getDeviceRect(this.pdfRect,n,e),a=i.right-i.left,s=i.bottom-i.bottom;return[Math.ceil(s/r),Math.ceil(a/r),a,s,r,n,t,e,o.left,o.top]},e.prototype.getRenderingData=function(e,n){void 0===e&&(e=this.scale),void 0===n&&(n=this.rotate);var r=t.prototype.getRenderingData.call(this,e,n);return Object.assign(r,{opacity:this.annotationInfo.opacity,tileConfig:this.getTileConfig(e,n)})},e}(p)},function(t,e,n){"use strict";function r(t,e){if(!t)throw new Error(e)}function o(t){return"number"==typeof t}function i(t){return o(t)&&Math.floor(t)===t}function a(t){return Math.pow(Math.floor(t),2)!==t}function s(t){return(t%360+360)%360%90==0}function c(t,e,n,r,o){return void 0===r&&(r=!1),void 0===o&&(o=!1),(r?t>=e:t>e)&&(o?t<=n:t<n)}function u(t,e,n){return void 0===n&&(n=.01),Math.abs(t-e)<n}function l(t,e,n){return void 0===n&&(n=.01),u(t.x,e.x)&&u(t.y,e.y)}n.r(e),n.d(e,"assertThat",(function(){return r})),n.d(e,"isNumber",(function(){return o})),n.d(e,"isInteger",(function(){return i})),n.d(e,"isSquaredNumber",(function(){return a})),n.d(e,"isValidRotationAngle",(function(){return s})),n.d(e,"isNumberInRange",(function(){return c})),n.d(e,"isSamePoint",(function(){return l}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(59),i=(r=o)&&r.__esModule?r:{default:r},a=n(60);function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var c=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n))}return s(e,t),e.prototype.prepare=function(){this.prepared||(this.canvas=document.createElement("canvas"),this.container=this.component.getContainerElement(),this.container.appendChild(this.canvas),t.prototype.prepare.call(this))},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.prepared&&this.canvas.remove()},e.prototype.doShow=function(){this.canvas.classList.remove("fv__ui-hide")},e.prototype.doHide=function(){this.canvas.classList.add("fv__ui-hide")},e.prototype.convertPointToPixel=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a.POINT.convertTo(t,a.PIXEL_HORIZONTAL)*e},e.prototype.willRender=function(){this.canvas.style.willChange="left, top, width, height",this.container.style.willChange="left; top"},e.prototype.afterRender=function(){this.canvas.style.willChange="auto",this.container.style.willChange="auto"},e.prototype.render=function(t,e){this.prepared||this.prepare();var n=this.component.getRenderingData(t,e);if(!n)return Promise.resolve();var r=n.annotInfo,o=r.borderInfo||{},i=this.convertPointToPixel(o.width,t),a=this.component,s=(a.annot,a.pdfViewer,n.smartScale);!n.annotFlag.checkNoZoom()||(t=1);var c=n.rect,u=n.outerDeviceRect,l=n.innerDeviceRect;Object.assign(l,{width:l.right-l.left,height:l.bottom-l.top}),Object.assign(u,{width:u.right-u.left,height:u.bottom-u.top}),this.resetCanvasSize(u.width,u.height),this.container.style.cssText+="\n            left: "+c.left+"px;\n            top: "+c.top+"px;\n        ";var f=this.canvas.style;if(0===i&&0===r.borderColor&&!r.fillColor)return f.visibility="hidden",Promise.resolve();if(0===r.opacity)return f.visibility="hidden",Promise.resolve();f.visibility="unset";try{return Promise.resolve(this.doRender({outerRect:u,innerRect:l,deviceRect:c,scale:t,smartScale:s,rotate:e,renderingData:n}))}catch(t){return console.error(t),Promise.resolve()}},e.prototype.doRender=function(t){t.outerRect,t.innerRect,t.deviceRect,t.scale,t.rotate},e.prototype.resetCanvasSize=function(t,e){this.canvas.width=Math.ceil(t),this.canvas.height=Math.ceil(e),this.canvas.style.width=null,this.canvas.style.height=null},e.prototype.invisibleRender=function(){try{this.canvas.width=0}catch(t){}},e}(i.default);e.default=c},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=e.RectDiffer=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;r(this,t),this.top=e,this.left=n,this.bottom=o,this.right=i},i=(e.Rect=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.top=e,this.left=n,this.bottom=o,this.right=i},e.Boundary=function t(e,n,o,i){r(this,t),this.top=e,this.left=n,this.bottom=bottom,this.right=right},function(){function t(e){r(this,t),this.offsetLeft=0,this.offsetTop=0,this.offsetRight=0,this.offsetBottom=0,this.target=e}return t.isOverlap=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Math.max(t.left,e.left),o=Math[n?"min":"max"](t.top,e.top),i=Math[n?"max":"min"](t.bottom,e.bottom),a=Math.min(t.right,e.right);if(r<=a)if(n){if(o>=i)return(a-r)*(o-i)}else if(o<=i)return(a-r)*(i-o);return 0},t.isInRect=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t>=n.left&&t<=n.right)if(r){if(e>=n.bottom&&e<=n.top)return!0}else if(e<=n.bottom&&e>=n.top)return!0;return!1},t.rectInRect=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.left>=e.left&&t.right<=e.right;return!!r&&(n?t.top<=e.top&&t.bottom>=e.bottom:t.top>=e.top&&t.bottom<=e.bottom)},t.on=function(e){return new t(e)},t.subtract=function(t,e){return new o(t.top-e.top,t.left-e.left,t.bottom-e.bottom,t.right-e.right)},t.expandOffset=function(t,e){return new o(t.top-e.top,t.left-e.left,e.bottom-t.bottom,e.right-t.right)},t.copyTo=function(t,e){e.left=t.left,e.top=t.top,e.right=t.right,e.bottom=t.bottom},t.prototype.moveLeft=function(t){return this.offsetLeft+=t,this.offsetRight+=t,this},t.prototype.moveTop=function(t){return this.offsetTop+=t,this.offsetBottom+=t,this},t.prototype.move=function(t,e){return this.moveLeft(t).moveTop(e)},t.prototype.moveTo=function(t,e){return this.offsetLeft=this.offsetRight=this.target.left-t,this.offsetTop=this.offsetBottom=this.target.top-e,this},t.prototype.shrink=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return this.add(new o(t,e,-n,-r))},t.prototype.expand=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return this.add(new o(-t,-e,n,r))},t.prototype.zoom=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"center",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",r=this.target.right+this.offsetRight-(this.target.left+this.offsetLeft),i=this.target.bottom+this.offsetBottom-(this.target.top+this.offsetTop),a=r*t,s=i*t,c=a-r,u=s-i,l=0,f=0,p=0,d=0;switch(e){case"right":l=-c;break;case"center":l=-c/2,f=c/2;break;case"left":default:f=c}switch(n){case"bottom":p=-u;break;case"center":p=-u/2,d=u/2;break;case"top":default:d=u}return this.add(new o(p,l,d,f))},t.prototype.add=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.top,n=void 0===e?0:e,r=t.left,o=void 0===r?n:r,i=t.bottom,a=void 0===i?n:i,s=t.right,c=void 0===s?o:s;return this.offsetLeft+=o,this.offsetRight+=c,this.offsetBottom+=a,this.offsetTop+=n,this},t.prototype.extract=function(){var t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight;return{left:t,top:this.target.top+this.offsetTop,right:e,bottom:this.target.bottom+this.offsetBottom}},t.prototype.boundary=function(){var t=this.target.left+this.offsetLeft,e=this.target.right+this.offsetRight,n=this.target.top+this.offsetTop;return{left:t,top:n,width:e-t,height:this.target.bottom+this.offsetBottom-n}},t.prototype.toPlainObject=function(){return{left:this.target.left,right:this.target.right,top:this.target.top,bottom:this.target.bottom}},t}());e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}n(23);var a=o.stateHandler,s=a.IStateHandler,c=(a.HandStateHandler,o.vendors.Hammer),u=o.shared.DebouncePromiseQueue,l=a.StateHandlerUtils,f=l.getDevicePagePoint,p=(l.deltaDeviceRect,l.appendSelectMark),d=l.removeSelectMark,h=o.ViewerEvents,y=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="",r}return i(e,t),e.prototype.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var o=n[0],i=this.hammer=new c.Manager(o,{recognizers:[[c.Pan,{direction:c.DIRECTION_ALL}]]}),a=void 0,s=-1,l=-1,p=void 0;i.on("panstart",(function(t){if(!1!==e.panStart(t,e)){s=-1,l=-1;var n=f(o,t);a=[n.x,n.y],e.hideSelectMark(),p=new u}})),i.on("panmove",(function(t){!1!==e.panMove(t,e)&&p&&p.push((function(){var n=e.pageRender,o=[a[0]+t.deltaX,a[1]+t.deltaY];return e.getTextRect(a,o,s,l).then((function(t){var e;return(e=t[0])&&"string"==typeof e.text&&(s=e.start,l=e.end),Promise.all([n.getPDFPage(),t])})).then((function(t){var e=r(t,2),o=e[0],i=e[1];return n.transformRectArray(o,i)})).then((function(t){e.showSelectMark(t)}))}))})),i.on("panend",(function(n){if(!1!==e.panEnd(n,e)&&p){p.end(),p=null;var o=[a[0]+n.deltaX,a[1]+n.deltaY];e.getTextRect(a,o,s,l).then((function(n){var r;return(r=n[0])&&"string"==typeof r.text&&(s=r.start,l=r.end),e.hideSelectMark(),Promise.all([t.getPDFPage(),n])})).then((function(t){var n=r(t,2),o=n[0],i=n[1];return i.length<1?Promise.resolve():e.addAnnot(o,i).then((function(t){var n=t[0],r=e.pageRender.annotsRender.getAnnotRender(n.getId()).component;e.afterAddAnnot(r),e.pageRender.annotsRender.activeAnnot(n.getId())})).then((function(){e.pdfViewer.config.showCommentList&&e.pageRender.getAnnots().then((function(t){var n=t[t.length-2];e.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}))})).catch((function(t){}))}))}}))},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.hideSelectMark()},e.prototype.out=function(){this.destroyPageHandler()},e.prototype.panStart=function(){},e.prototype.panMove=function(){},e.prototype.panEnd=function(){},e.prototype.showSelectMark=function(t){p(this.pageRender.$handler,t)},e.prototype.hideSelectMark=function(){d(this.pageRender.$handler)},e.prototype.getTextRect=function(t,e,n,r){return this.pageRender.getTextContinueRectAtDevicePoints(t,e,n,r)},e.prototype.addAnnot=function(t,e){},e.prototype.afterAddAnnot=function(t){this.pdfViewer.eventEmitter.emit(h.addAnnotSuccess,t.annot)},e}(s);e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}return t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.mult=function(e){return new t(this.x*e,this.y*e)},t.prototype.add=function(e){return new t(this.x+e.x,this.y+e.y)},t.prototype.negate=function(){return new t(-this.x,-this.y)},t.prototype.substract=function(e){return new t(this.x-e.x,this.y-e.y)},t.prototype.normalize=function(){var e=this.length();return 0===e?new t(0,0):new t(this.x/e,this.y/e)},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.perp=function(){return new t(this.y,-this.x)},t.prototype.segment=function(e){return{from:this,to:e,dir:new t(e.x-this.x,e.y-this.y)}},t.prototype.rotate=function(e){var n=Math.sin(e),r=Math.cos(e);return new t(this.x*r+this.y*n,-this.x*n+this.y*r)},t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRotatedRect=e.getSmartScale=e.getWHByMatrix=e.pxDPRpt=e.ptDPRpx=e.multiDPR=e.px2pt=e.pt2px=void 0;var r,o=n(15),i=(n(68),n(94)),a=(r=i)&&r.__esModule?r:{default:r},s=n(4);var c=void 0;function u(t){return function(){if(!c){var t=(0,o.getDPI)();c=[t.x,t.y]}return c}()[t]}e.pt2px=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t*u(e)/72},e.px2pt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return 72*t/u(e)},e.multiDPR=function(t){return t*o.dpr},e.ptDPRpx=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o.dpr*t*u(e)/72},e.pxDPRpt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t/o.dpr/u(e)*72},e.getWHByMatrix=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=new a.default(t,e,0).scale(n).rotateZ(r);return[Math.round(Math.abs(o.a)),Math.round(Math.abs(o.b))]},e.getSmartScale=function(t,e,n){return Math.min(Math.max(Math.ceil(4*t)/4,e),n)},e.getRotatedRect=function(t,e,n,r){switch((0,s.assertThat)((0,s.isValidRotationAngle)(r),"Illegal rotation value: "+r),r=(r%360+360)%360){case 0:return t;case 90:return{left:t.bottom,right:t.top,top:t.left,bottom:t.right};case 180:return{left:e-t.right,right:e-t.left,top:n-t.bottom,bottom:n-t.top};case 270:return{left:t.top,right:t.bottom,top:t.right,bottom:t.left}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PosType=e.MK_Properties=e.Graphics_ObjectType=e.Graphics_FillMode=e.Font_CIDCharset=e.Font_Charset=e.Font_Styles=e.Font_StandardID=e.Text_Mode=e.Box_Type=e.Calc_Margin_Mode=e.Action_Trigger=e.Signature_Ap_Flags=e.Signature_State=e.Error_Code=e.Font_Descriptor_Flags=e.page_Number_Format=e.date_Format=e.Rendering_Usage=e.Rendering_Content=e.Range_Filter=e.Saving_Flag=e.Search_Flag=e.Rotation_Degree=e.Rotation=e.Standard_Font=e.Watermark_Flag=e.Position=e.Flatten_Option=e.File_Type=e.Relationship=e.Highlight_Mode=e.Action_Type=e.Point_Type=e.Alignment=e.Ending_Style=e.Note_Icon=e.FileAttachment_Icon=e.Border_Style=e.Font_Style=e.Additional_Permission=void 0;var r,o=n(74),i=(r=o)&&r.__esModule?r:{default:r};e.Additional_Permission={download:1},e.Font_Style={normal:0,italic:1,bold:2},e.Border_Style={solid:0,dashed:1,underline:2,beveled:3,inset:4,cloudy:5},e.FileAttachment_Icon={graph:"Graph",pushPin:"PushPin",paperclip:"Paperclip",tag:"Tag"},e.Note_Icon={Check:"Check",Circle:"Circle",Comment:"Comment",Cross:"Cross",Help:"Help",Insert:"Insert",Key:"Key",NewParagraph:"NewParagraph",Note:"Note",Paragraph:"Paragraph",RightArrow:"RightArrow",RightPointer:"RightPointer",Star:"Star",UpArrow:"UpArrow",UpLeftArrow:"UpLeftArrow"},e.Ending_Style={None:0,Square:1,Circle:2,Diamond:3,OpenArrow:4,ClosedArrow:5,Butt:6,ReverseOpenArrow:7,ReverseClosedArrow:8,Slash:9},e.Alignment={left:0,center:1,right:2},e.Point_Type={moveTo:1,lineTo:2,lineToCloseFigure:3,bezierTo:4,bezierToCloseFigure:5},e.Action_Type={goto:"TypeGoto",launch:"TypeLaunch",uri:"TypeURI",named:"TypeNamed",submitForm:"TypeSubmitForm",resetForm:"TypeResetForm",javaScript:"TypeJavaScript",importData:"TypeImportData",hide:"TypeHide"},e.Highlight_Mode={none:0,invert:1,outline:2,push:3,toggle:4},e.Relationship={firstChild:0,lastChild:1,previousSibling:2,nextSibling:3,firstSibling:4,lastSibling:5},e.File_Type={fdf:0,xfdf:1,xml:2,csv:3,txt:4},e.Flatten_Option={all:0,field:1,annot:2},e.Position={topLeft:"TopLeft",topCenter:"TopCenter",topRight:"TopRight",centerLeft:"CenterLeft",center:"Center",centerRight:"CenterRight",bottomLeft:"BottomLeft",bottomCenter:"BottomCenter",bottomRight:"BottomRight"},e.Watermark_Flag={asContent:0,asAnnot:1,onTop:2,unprintable:4,display:8},e.Standard_Font={courier:0,courierBold:1,courierBoldOblique:2,courierOblique:3,helvetica:4,helveticaBold:5,helveticaBoldOblique:6,helveticaOblique:7,timesRoman:8,timesBold:9,timesBoldItalic:10,timesItalic:11,symbol:12,zapfDingbats:13},e.Rotation={rotation0:0,rotation1:1,rotation2:2,rotation3:3},e.Rotation_Degree={rotation0:0,rotation90:90,rotation180:180,rotation270:270},e.Search_Flag={caseSensitive:1,wholeWord:2,consecutively:4},e.Saving_Flag={normal:0,incremental:1,noOriginal:2,XRefStream:8,linearized:4096,removeRedundantObjects:16},e.Range_Filter={all:0,even:1,odd:2},e.Rendering_Content={page:"page",annot:"annot"},e.Rendering_Usage={print:"print",view:"view"},e.date_Format={MSlashD:0,MSlashDSlashYY:1,MSlashDSlashYYYY:2,MMSlashDDSlashYY:3,MMSlashDDSlashYYYY:4,DSlashMSlashYY:5,DSlashMSlashYYYY:6,DDSlashMMSlashYY:7,DDSlashMMSlashYYYY:8,MMSlashYY:9,MMSlashYYYY:10,MDotDDotYY:11,MDotDDotYYYY:12,MMDotDDDotYY:13,MMDotDDDotYYYY:14,MMDotYY:15,DDotMDotYYYY:16,DDDotMMDotYY:17,DDDotMMDotYYYY:18,YYHyphenMMHyphenDD:19,YYYYHyphenMMHyphenDD:20},e.page_Number_Format={default:0,numberOfCount:1,numberSlashCount:2,pageNumber:3,pageNumberOfCount:4},e.Font_Descriptor_Flags={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144},e.Error_Code=i.default,e.Signature_State={verifyChange:128,verifyIncredible:256,verifyNoChange:1024,stateVerifyIssueUnknown:2048,verifyIssueValid:4096,verifyIssueUnknown:8192,verifyIssueRevoke:16384,verifyIssueExpire:32768,verifyIssueUncheck:65536,verifyIssueCurrent:131072,verifyTimestampNone:262144,verifyTimestampDoc:524288,verifyTimestampValid:1048576,verifyTimestampInvalid:2097152,verifyTimestampExpire:4194304,verifyTimestampIssueUnknown:8388608,verifyTimestampIssueValid:16777216,verifyTimestampTimeBefore:33554432,verifyChangeLegal:134217728,verifyChangeIllegal:268435456},e.Signature_Ap_Flags={showTagImage:1,showLabel:2,showReason:4,showDate:8,showDistinguishName:16,showLocation:32,showSigner:64,showBitmap:128,showText:256},e.Action_Trigger={click:-1,keyStroke:7,format:8,validate:9,calculate:10,mouseEnter:11,mouseExit:12,mouseDown:13,mouseUp:14,onFocus:15,onBlur:16},e.Calc_Margin_Mode={CalcContentsBox:0,CalcDetection:1},e.Box_Type={MediaBox:0,CropBox:1,TrimBox:2,ArtBox:3,BleedBox:4},e.Text_Mode={Fill:0,Stroke:1,FillStroke:2,Invisible:3,FillClip:4,StrokeClip:5,FillStrokeClip:6,Clip:7},e.Font_StandardID={Courier:0,CourierB:1,CourierBI:2,CourierI:3,Helvetica:4,HelveticaB:5,HelveticaBI:6,HelveticaI:7,Times:8,TimesB:9,TimesBI:10,TimesI:11,Symbol:12,ZapfDingbats:13},e.Font_Styles={FixedPitch:1,Serif:2,Symbolic:4,Script:8,NonSymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,Bold:262144},e.Font_Charset={ANSI:0,Default:1,Symbol:2,Shift_JIS:128,Hangeul:129,GB2312:134,ChineseBig5:136,Thai:222,EastEurope:238,Russian:204,Greek:161,Turkish:162,Hebrew:177,Arabic:178,Baltic:186},e.Font_CIDCharset={Unknown:0,GB1:1,CNS1:2,JAPAN1:3,KOREA1:4,UNICODE:5},e.Graphics_FillMode={None:0,Alternate:1,Winding:2},e.Graphics_ObjectType={All:0,Text:1,Path:2,Image:3,Shading:4,FormXObject:5},e.MK_Properties={borderColor:"borderColor",fillColor:"fillColor",normalCaption:"normalCaption",downCaption:"downCaption",rolloverCaption:"rolloverCaption"},e.PosType={first:0,last:1,after:2,before:3}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={},o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return t.property=function(t,e,n){var o=r;Object.getOwnPropertyDescriptor(t,"__lazy__")||Object.defineProperty(t,"__lazy__",{value:{},enumerable:!1,configurable:!1});var i=t.__lazy__[e]||{};t.__lazy__[e]=i,i.initialized=!1,Object.defineProperty(t,e,{get:function(){return o===r&&(o=n(),i.initialized=!0),o},enumerable:!0,configurable:!0})},t.isPropertyIntialized=function(t,e){var n=t.__lazy__;return!!(n&&n[e]&&n[e].initialized)},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=navigator.userAgent.toLowerCase(),i=/opera|opr/.test(o),a=/msie/.test(o),s=/trident/.test(o),c=/\sapplewebkit\//.test(o),u=/chrome/.test(o),l=/safari/.test(o),f=/firefox/.test(o),p=/edg\//.test(o),d=e.isIE=(s||a)&&!i&&"msSaveBlob"in navigator,h=(e.isIE10=d&&(!!(r=o.match(/msie ([\d\.]+)/))&&10===parseInt(r[1])),e.isIEAtLeast11=!a&&s&&!i),y=e.isEdge=o.indexOf("edge")>-1,v=e.isOpera=i,g=e.isWebkit=c,m=e.isChromiumEdge=!v&&u&&!!window.chrome&&p,b=e.isChrome=!v&&u&&!!window.chrome&&!p,w=e.isSafari=!/huawei/.test(o)&&!v&&l&&!u,P=e.isGecko="Gecko"==navigator.product&&!g&&!v,O=e.isFirefox=!b&&!v&&!w&&f,E=e.isMaxthon=/maxthon/.test(o),_=e.isQuirksMode="BackCompact"==document.CompactMode,R=e.isQQ=/tencenttraveler/.test(o)||/qqbrowser/.test(o),T=e.isSougou=/metasr/.test(o)||/sogou/.test(o),A=e.isBaidu=/baidubrowser/.test(o),S=e.isUC=/ucbrowser/.test(o),x=e.isLiebao=/liebao/.test(o),M=e.isMiuiBrowser=/miuibrowser/.test(o),C=e.isHuaweiBrowser=/huaweibrowser/.test(o)||/huaweialp/.test(o),D=e.is360=function(){if(R||S||T||M||x||E)return!1;if(-1===o.indexOf("chrome"))return!1;var t=function(t,e){var n=navigator.mimeTypes;for(var r in n)if(n[r][t]==e)return!0;return!1}("type","application/vnd.chromium.remoting-viewer");return!window.chrome||t}();e.isIE8=!!document.documentMode&&document.documentMode<8,e.isIE8Compact=8==document.documentMode,e.isIE9Compact=9==document.documentMode,e.isIE10Compact=10==document.documentMode,e.BROWSER_DETECTION={ie:d,ieAtLeast11:h,edge:y,"chromium-edge":m,opera:v,webkit:g,chrome:b,safari:w,gecko:P,firefox:O,maxthon:E,quirksMode:_,"quirks-mode":_,qq:R,sougou:T,baidu:A,liebao:x,uc:S,miui:M,huawei:C,360:D}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var i=r.stateHandler.IStateHandler,a=r.vendors,s=(a.Hammer,a.jQuery,function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n))}return o(e,t),e.textboxWidth=function(){return 100},e.textboxHeight=function(){return 20},e.calloutKneeLength=function(){return 20},e.getStateName=function(){return"createFreetext"},e.prototype.pageHandler=function(t){},e.edit=function(t,e){var n=t.annotsRender.getAnnotRender(e[0].id).component;n.active(!0),setTimeout((function(){n.showReplyDialog("comment")}),0)},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler")},e.prototype.out=function(){this.destroyPageHandler()},e}(i));e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.KEY_MAP_SELECT_ALL_ANNOTATIONS="selectAllAnnotations",e.KEY_MAP_POLYLINE_DELETE_LAST_POINT="createPolyline_DeleteLastPoint",e.KEY_MAP_DOCUMENT_UNDO="undo",e.KEY_MAP_DOCUMENT_REDO="redo",e.KEY_MAP_ZOOM_IN="pageZoomIn",e.KEY_MAP_ZOOM_OUT="pageZoomOut",e.KEY_MAP_DELETE_ANNOTATION="delete-annotation",e.KEY_MAP_ESC_CREATING_DRAWING="cancel-creating-drawing-annot",e.KEY_MAP_UNACTIVE_ANNOTATION="unactive-annotation",e.KEY_MAP_UNFOCUS_FROM_EDITTING_TEXT_OBJECT="unfocus-from-editting-text-object",e.KEY_MAP_FIELD_TAB_NEXT="FIELD_TAB_ACTION",e.KEY_MAP_FIELD_TAB_PREVIOUS="FIELD_TAB_PREVIOUS_ACTION",e.KEY_MAP_FIELD_LEFT="FIELD_LEFT_ACTION",e.KEY_MAP_FIELD_RIGHT="FIELD_RIGHT_ACTION",e.KEY_MAP_FIELD_DOWN="FIELD_DOWN_ACTION",e.KEY_MAP_FIELD_UP="FIELD_UP_ACTION",e.KEY_MAP_FIELD_ENTER="FIELD_ENTER_ACTION",e.KEY_MAP_COPY_TEXT_IMAGE="copy-text-image",e.GLOBAL_BINDER="global-keyboard-event-binder",e.VIEWER_BINDER="pdf-viewer-keyboard-event-binder",e.ANNOTATION_PROPERTIES_BINDER="annotation-properties-keyboard-event-binder",e.ACTIVATION_ANNOTATION_BINDER="activation-annotation-keyboard-event-binder",e.DOCUMENT_PROPERTIES_BINDER="document-properties-keyboard-event-binder",e.FOCUS_ELEMENT_BINDER="focus-element-keyboard-event-binder",e.EDIT_TEXT_OBJECT_BINDER="focus-text-object-event-binder",e.ANNOTATION_CREATING_BINDER="create-annotation-keyboard-event-binder",e.SELECT_TEXT_IMAGE_BINDER="select-text-image-keyboard-event-binder",e.CUSTOM_COMMAND="custom-command",e.CUSTOM_BINDER="custom-keyboard-event-binder"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var o=function(){var t=navigator.appVersion.match(/iphone/gi),e="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;return t&&(e=Math.min(2,e)),e}();var i=void 0,a=void 0,s=void 0;function c(){return i||(i=function(){if("undefined"!=typeof screen&&screen.deviceXDPI)return{x:screen.deviceXDPI,y:screen.deviceYDPI};if("undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="width:1in;height:1in;position:absolute;top:20in;border:none;padding:0;",document.body.appendChild(t);var e={x:parseInt(t.offsetWidth),y:parseInt(t.offsetHeight)};return t.parentNode.removeChild(t),e}return{x:96,y:96}}()),i}var u=void 0;e.getDPI=c,e.getPtPxRatio=function(){if(void 0===a){var t=c();a=t.x/72}return a},e.getPxPtRatio=function(){if(void 0===s){var t=c();s=72/t.x}return s},e.dpr=o,e.copyText=function(t){var e=u||((u=document.createElement("input")).type="text",u.style.opacity="0",u.style.top="-999px",u.style["z-index"]=-1,u.style.position="absolute",document.body.appendChild(u),u);e.value=t,e.select(),e.focus(),e.setSelectionRange(0,e.value.length);var n=document.execCommand("copy",!1,e.value);return e.blur(),n},e.eventPath=function(t){var e=t.composedPath&&t.composedPath()||t.path,n=t.target;return null!=e?e.indexOf(window)<0?e.concat(window):e:n===window?[window]:[n].concat(function t(e,n){n=n||[];var r=e.parentNode;return r?t(r,n.concat(r)):n}(n),window)},e.isIE10=function(){var t=navigator.userAgent.toLowerCase(),e=void 0;return!(!("ActiveXObject"in self)||!(e=t.match(/msie ([\d\.]+)/)))&&10===parseInt(e[1])},e.getCanvasPixelRatio=function(){if("object"!==("undefined"==typeof window?"undefined":r(window)))return 1;var t=window.devicePixelRatio||1,e=document.createElement("canvas").getContext("2d");return t/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},e.isRunningInWorker=function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope},e.isRunningInBrowser=function(){return"undefined"!=typeof window}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CloudyPathGenerator=e.CloudyStartSegment=e.CloudyPathSegment=void 0;var r,o=n(17),i=(n(15),n(2)),a=(r=i)&&r.__esModule?r:{default:r};n(27);function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var f=e.CloudyPathSegment=function(t){function e(n,r,o){c(this,e);var i=u(this,t.call(this,null,o));return i.controlPoint1=n,i.controlPoint2=r,i}return l(e,t),e.prototype.render=function(t){t.bezierCurveTo(this.controlPoint1.x,this.controlPoint1.y,this.controlPoint2.x,this.controlPoint2.y,this.to.x,this.to.y)},e}(o.PathSegment),p=e.CloudyStartSegment=function(t){function e(n){return c(this,e),u(this,t.call(this,n))}return l(e,t),e.prototype.render=function(t){t.moveTo(this.from.x,this.from.y)},e}(o.PathSegment),d=3.14159265358979;e.CloudyPathGenerator=function(t){function e(n,r,o){c(this,e);var i=u(this,t.call(this));return i.points=n,i.innerRect=r,i.outerRect=o,i}return l(e,t),e.prototype.generate=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,n=new o.Path,r=this.points.map((function(e){return e.y=t.innerRect.height-e.y,e})),i=r.length,a=i*e,c=r.map((function(t,e){return t.distanceTo(r[(e+1)%i])})).reduce((function(t,e){return t+e})),u={left:r[0].x,right:r[0].x,top:r[0].y,bottom:r[0].y},l=c/a;if(0==l)return n;for(var f=[],p=0,y=r[0],v=r[1],g=y.distanceTo(v),m=0,b=1;m<a;m++){for(;p>g;)p-=g,b++,y=v,v=r[b%i],g=y.distanceTo(v);f.push(y.move(p,v)),p+=l}var w=f.length,P=!0,O=5*l/8;return f.forEach((function(e,r){E(f[0==r?w-1:r-1],e,f[(r+1)%w]).forEach((function(e){var r=function(e){e&&(e.x+=t.innerRect.left-t.outerRect.left,e.y=t.innerRect.height-e.y+(t.innerRect.top-t.outerRect.top))};r(e.from),r(e.to),r(e.controlPoint1),r(e.controlPoint2),n.addSegment(e)}))})),n.rect=u,n;function E(t,e,n){var r=t.subtractp(e),o=n.subtractp(e),i=[],a=Math.atan2(r.y,r.x),c=Math.atan2(o.y,o.x);a+=Math.acos(t.distanceTo(e)/(2*O))-d/9,(c-=Math.acos(n.distanceTo(e)/(2*O)))<a&&(c+=2*d);var u={left:e.x-O,right:e.x+O,bottom:e.y-O,top:e.y+O},l=h(u,a,c,P);i.push.apply(i,s(l.arrAp)),P=!1;var f=e.subtractp(n);return a=Math.atan2(f.y,f.x),c=(a+=Math.acos(n.distanceTo(e)/(2*O)))-d/9,l=h(u={left:n.x-O,right:n.x+O,bottom:n.y-O,top:n.y+O},a,c,P),i.push.apply(i,s(l.arrAp)),i}},e}(o.PathGenerator);function h(t,e,n,r){var o,i,s,c,u,l,h,y,v,g,m,b,w,P,O,E,_,R,T,A,S,x,M,C,D={};if(t.left>=t.right||t.bottom>=t.top)return{arrAp:[],pdfRect:D};if(Math.abs(n-e)<=1e-4)return{arrAp:[],pdfRect:D};var I=[];o=(t.right+t.left)/2,i=(t.top+t.bottom)/2,s=Math.abs(t.right-t.left)/2,c=Math.abs(t.top-t.bottom)/2,M=e,S=o+(m=s*Math.cos(M)),x=i+(b=c*Math.sin(M)),D.left=D.right=S,D.bottom=D.top=x,r&&I.push(new p(new a.default(S,x)));var j=1;n<e&&(j=-1);var N=Math.floor(2*e/d);j>0&&(N+=1),N*=d/2;for(var L=!1;C=N,j>0?n<=N&&(C=n,L=!0):n>=N&&(C=n,L=!0),m=s*Math.cos(M),b=c*Math.sin(M),_=s*Math.cos(C),v=g=-s*s*c*c,w=m+.5522847498308*(S=(T=((h=s*s*b)*g-(y=s*s*(R=c*Math.sin(C)))*v)/((u=c*c*m)*y-(l=c*c*_)*h))-m),P=b+.5522847498308*(x=(A=(l*v-u*g)/(u*y-l*h))-b),O=_+.5522847498308*(S=T-_),E=R+.5522847498308*(x=A-R),w=S=o+w,P=x=i+P,D.left>w&&(D.left=w),D.bottom>P&&(D.bottom=P),D.right<w&&(D.right=w),D.top<P&&(D.top=P),O=S=o+O,E=x=i+E,D.left>O&&(D.left=O),D.bottom>E&&(D.bottom=E),D.right<O&&(D.right=O),D.top<E&&(D.top=E),_=S=o+_,R=x=i+R,D.left>_&&(D.left=_),D.bottom>R&&(D.bottom=R),D.right<_&&(D.right=_),D.top<R&&(D.top=R),I.push(new f(new a.default(w,P),new a.default(O,E),new a.default(_,R))),!L;)M=C,N+=j*d/2;return{arrAp:I,pdfRect:D}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PathGenerator=e.PathSegment=e.Path=void 0;var r=o(n(64));o(n(2));function o(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.Path=function(){function t(){i(this,t),this.segments=[]}return t.prototype.addSegment=function(t){t instanceof a&&this.segments.push(t)},t.prototype.render=function(t){t.beginPath(),this.segments.forEach((function(e){e.render(t)})),t.closePath()},t}();var a=e.PathSegment=function(){function t(e,n){i(this,t),this.from=e,this.to=n}return t.prototype.render=function(t){(0,r.default)()},t.prototype.isJoinedBefore=function(t){return this.to.equalTo(t.from)},t.prototype.isJoinedAfter=function(t){return t.to.equalTo(this.from)},t.prototype.isJoinedWith=function(t){return this.isJoinedBefore(t)||this.isJoinedAfter(t)},t}();e.PathGenerator=function(){function t(){i(this,t)}return t.prototype.generate=function(){(0,r.default)()},t}()},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n(18);var i=n(14),a=l(n(78)),s=l(n(31)),c=n(35),u=n(4);function l(t){return t&&t.__esModule?t:{default:t}}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var p=o.stateHandler,d=o.Log,h=o.ViewerEvents,y=p.IStateHandler,v=d.LoggerFactory,g=o.shared,m=g.DebouncePromiseQueue,b=(g.getClientX,g.getClientY,g.keyboardStatus),w=g.ThrottleAsyncTaskExecutor,P=(o.DeviceInfo.isTouchDevice,v.getLogger("creation/complexshape/state"),function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.type=r,o.cursorStyle="fv__cursor-crosshair",o.executor=new w(20,!0),o}return f(e,t),e.prototype.createInteractionTool=function(t){return new a.default(this.pdfViewer,t,"create-complex-shape")},e.prototype.pageHandler=function(t){var e=this;this.pageRender=t,this.destroyPageHooks=[];var n=t.$handler;n.addClass(this.cursorStyle);var r=n.get(0);this.snappedPointAssistant=new c.SnappedPointAssistant(r),this.interaction=this.createInteractionTool(r),this.interaction.init();var o=new m,a=this.pdfViewer.getKeyboardEventBinder(i.ANNOTATION_CREATING_BINDER),s=function(){},l=function(){s=e.pdfViewer.switchKeyboardEventBinder(i.ANNOTATION_CREATING_BINDER)};function f(t,e,n){if(b.isShift){var r=t.getDeviceVertexes();if(r.length>=1){var o=r[r.length-1],i=e-o.x,a=n-o.y,s=Math.sqrt(i*i+a*a),c=Math.atan2(a,i),u=.25*Math.PI,l=Math.round(c/u)*u;return i=s*Math.cos(l),a=s*Math.sin(l),{deviceX:o.x+i,deviceY:o.y+a}}}return{deviceX:e,deviceY:n}}this.offCancelEvent=a.on(i.KEY_MAP_ESC_CREATING_DRAWING,(function(){s(),e.interaction.unlock(),e.interaction.cancel(),e.cancel()})),"polygon"==this.type||"polyline"==this.type||this.pdfViewer.eventEmitter.addListener(h.toolbarTabsClicked,(function(){e.out()})),this.interaction.on("start",(function(t){var n=t.clientX,o=t.clientY;e.pageRender.annotsRender.unActiveAnnot();var i=r.getBoundingClientRect(),a=n-i.left,c=o-i.top;s(),l(),e.getSnappedPoint(a,c).then((function(t){e.fakeAnnotation=e.create(t.deviceX,t.deviceY),e.interaction.startCreating()}))})),this.interaction.on("add-point",(function(t){var n=t.clientX,o=t.clientY,i=r.getBoundingClientRect(),a=n-i.left,s=o-i.top,c=f(e.fakeAnnotation,a,s);e.getSnappedPoint(c.deviceX,c.deviceY).then((function(t){e.addPoint(e.fakeAnnotation,t)}))})),this.interaction.on("move",(function(t){var n=t.clientX,o=t.clientY,i=r.getBoundingClientRect(),a=n-i.left,s=o-i.top;e.executor.exec((function(){var t=f(e.fakeAnnotation,a,s);return e.getSnappedPoint(t.deviceX,t.deviceY).then((function(n){(0,u.isSamePoint)({x:t.deviceX,y:t.deviceY},{x:n.deviceX,y:n.deviceY})?e.snappedPointAssistant.hide():(e.snappedPointAssistant.show(),e.snappedPointAssistant.setPosition(n.deviceX,n.deviceY)),e.adjust(e.fakeAnnotation,n)}))}))})),this.interaction.on("mousemove",(function(t){e.mousemove(t)})),this.interaction.on("end",(function(t){if(e.canBeCompleted(e.fakeAnnotation)){s();var n=r.getBoundingClientRect(),o=f(e.fakeAnnotation,t.clientX-n.left,t.clientY-n.top);e.executor.waitForLastTask().finally((function(){e.getSnappedPoint(o.deviceX,o.deviceY).then((function(t){-1==e.end(e.fakeAnnotation,t)&&(l(),e.interaction.startCreating())}))}))}else e.interaction.startCreating()})),this.interaction.on("cancel",(function(){s(),e.cancel()}));var p=function(t){e.fakeAnnotation&&(e.fakeAnnotation.zoomTo(t),e.fakeAnnotation.draw())};this.destroyPageHooks.push((function(){return o.end()}),this.pdfViewer.addEventListener(h.zoomToSuccess,(function(t){p(t)})),this.pdfViewer.addEventListener(h.changeViewModeSuccess,(function(t,n){p(e.pageRender.scale)})),this.pdfViewer.addEventListener(h.fitWidthResizeViewport,(function(){p(e.pageRender.scale)})))},e.prototype.getSnappedPoint=function(t,e){var n=this;return this.pageRender.getPDFPage().then((function(o){var i=n.pdfViewer.getSnapMode(n.constructor.getStateName());if(i&&i.length>0){var a=o.reverseDevicePoint([t,e],n.pageRender.scale,n.pageRender.rotate),s=r(a,2),c=s[0],u=s[1];return o.getSnappedPoint({x:c,y:u},i).then((function(t){var e=o.getDevicePoint([t.x,t.y],n.pageRender.scale,n.pageRender.rotate),i=r(e,2);return{deviceX:i[0],deviceY:i[1]}}))}return{deviceX:t,deviceY:e}}))},e.prototype.create=function(t,e){throw new Error("not implemented!")},e.prototype.addPoint=function(t,e){var n=e.deviceX,r=e.deviceY;t.addPoint(n,r),t.draw()},e.prototype.mousemove=function(t){var e=this;this.executor.exec((function(){return e.getSnappedPoint(t.x,t.y).then((function(n){var r=n.deviceX,o=n.deviceY,i={x:r,y:o};(0,u.isSamePoint)(t,i)?e.snappedPointAssistant.hide():(e.snappedPointAssistant.setPosition(r,o),e.snappedPointAssistant.show())}))}))},e.prototype.adjust=function(t,e){var n=e.deviceX,r=e.deviceY;t.setLastPoint(n,r),t.draw()},e.prototype.end=function(t,e){var n=this;this.creatingState=0,e&&t.addPoint(e.deviceX,e.deviceY),t.apply().then((function(t){if(n.pdfViewer.config.showCommentList){var e=t[t.length-2];n.pageRender.annotsRender.getAnnotRender(e.getId()).component.showReplyDialog()}})),this.fakeAnnotation=null},e.prototype.cancel=function(){this.fakeAnnotation&&(this.executor.cancel(),this.interaction.cancel(),this.fakeAnnotation.destroy(),this.fakeAnnotation=null)},e.prototype.canBeCompleted=function(){return!0},e.prototype.createAnnotJson=function(t,e){return t},e.prototype.destroyPageHandler=function(){this.snappedPointAssistant.destroy(),this.destroyPageHooks&&this.destroyPageHooks.forEach((function(t){return t()})),this.pageRender.$handler.removeClass(this.cursorStyle),this.fakeAnnotation&&(this.interaction.status!==s.default.IDLE&&this.pdfViewer.eventEmitter.emit(h.cancelAddAnnot),this.fakeAnnotation.destroy(),this.fakeAnnotation=null),this.interaction.destroy(),this.offCancelEvent&&this.offCancelEvent()},e.prototype.out=function(){this.destroyPageHandler()},e}(y));e.default=P},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.destroyHooks=[],this.isDestroyed=!1}return t.prototype.addDestroyHook=function(){for(var e,n=this,o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];return(e=this.destroyHooks).push.apply(e,r(i.filter((function(e){if("function"!=typeof e&&!(e instanceof t))throw new Error("[Illegal Argument] Invalid destroy hook:"+e+", It's not a function!");return!0})))),function(){i.forEach((function(t){var e=n.destroyHooks.indexOf(t);e>-1&&n.destroyHooks.splice(e,1)}))}},t.prototype.destroy=function(){this.destroyHooks.forEach((function(e){"function"==typeof e?e():e instanceof t&&e.destroy()})),this.destroyHooks=[],this.isDestroyed=!0},t}();e.default=o},function(t,e,n){"use strict";n.r(e),n.d(e,"FakePolylineAnnotation",(function(){return l}));var r,o=n(3),i=n(42),a=n.n(i),s=n(9),c=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},l=function(t){function e(e){var n,r=t.call(this,e)||this;return r.vertexes=[],r.deviceVertexes=[],r.lastPoint={x:0,y:0},r.annotationInfo.vertexes&&(n=r.vertexes).push.apply(n,r.annotationInfo.vertexes),r.annotationInfo.vertexes=r.vertexes,r}return c(e,t),e.prototype.getVertexes=function(){return this.vertexes},e.prototype.getDeviceVertexes=function(){return this.deviceVertexes},e.prototype.addPoint=function(t,e){var n=this.page.reverseDevicePoint([t,e],this.scale,this.rotate),r=n[0],o=n[1];this.vertexes.push({x:r,y:o}),this.lastPoint={x:r,y:o},this.deviceVertexes.push({x:t,y:e}),this.updateRect()},e.prototype.setLastPoint=function(t,e){var n=this.deviceVertexes[this.deviceVertexes.length-1],r="number"==typeof t?t:n.x,o="number"==typeof e?e:n.y,i=this.page.reverseDevicePoint([r,o],this.scale,this.rotate),a=i[0],s=i[1];this.lastPoint={x:a,y:s},this.updateRect()},e.prototype.getLastPoint=function(){return this.lastPoint},e.prototype.zoomTo=function(e){var n=this;this.scale!==e&&(t.prototype.zoomTo.call(this,e),this.deviceVertexes=this.vertexes.map((function(t){var r=n.page.getDevicePoint([t.x,t.y],e,n.rotate);return{x:r[0],y:r[1]}})),this.updateRect())},e.prototype.removeLastPoint=function(){},e.prototype.getRenderingData=function(e,n){var r=t.prototype.getRenderingData.call(this,e,n),o=this.vertexes.slice(0);return o.push(this.lastPoint),u(u({},r),{vertexes:o})},e.prototype.generateApRenderer=function(){return new a.a(this)},e.prototype.getType=function(){return"polyline"},e.prototype.getOuterDeviceRect=function(e,n){return t.prototype.getDeviceRect.call(this,e,n)},e.prototype.updateRect=function(){if(0!==this.deviceVertexes.length){var t=this.page.getDevicePoint([this.lastPoint.x,this.lastPoint.y],this.scale,this.rotate),e={x:t[0],y:t[1]},n=e.x,r=e.y,o=e.x,i=e.y;this.deviceVertexes.forEach((function(t){n=Math.min(n,t.x),o=Math.max(o,t.x),r=Math.min(r,t.y),i=Math.max(i,t.y)}));var a=Object(s.pt2px)(this.annotationInfo.borderInfo.width)*this.scale*2;n-=a/2,r-=a/2,o+=a/2,i+=a/2,this.setRect({left:n,top:r,right:o,bottom:i})}},e}(o.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o,i=e.isTouchDevice=(o=" -webkit- -moz- -o- -ms- ".split(" "),!!("ontouchstart"in window||navigator.maxTouchPoints||window.DocumentTouch&&document instanceof DocumentTouch)||(r=["(",o.join("touch-enabled),("),"heartz",")"].join(""),!!window.matchMedia&&window.matchMedia(r).matches)),a=navigator.userAgent.toLowerCase(),s=e.isMac=/macintosh|mac os x/.test(a),c=e.isIOS=/ipad|iphone|ipod/.test(a),u=e.isIPHONE=/iphone/.test(a),l=e.isIPAD=/ipad/.test(a),f=e.isIPOD=/ipod/.test(a),p=e.isAndroid=/android/.test(a),d=e.isBlackBerry=/blackberry/.test(a),h=e.isWebOS=/webos/.test(a),y=e.isKindle=/silk|kindle/.test(a),v=e.isTablet=/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(a),g=e.isMobile=!v&&(/mobile/.test(a)||c||p||d||h||y),m=e.isDesktop=!(g||v||p||u||l||f||y||h),b=e.isMiPad=/(MI(.*|\s*)PAD).*/i.test(a),w=e.isXiaomi=!b&&/MI(\s+|\d+?|HM|xiaomi).*/i.test(a),P=e.isHuawei=/HUAWEI/i.test(navigator.userAgent),O=e.isLinux=/Linux/i.test(a),E=e.isWindows=!O&&/Windows(\s+NT)?/i.test(a),_=e.isMacOS=/MacIntosh|(mac os)/i.test(a);e.DEVICE_DETACTION={mac:s,ios:c,iphone:u,ipad:l,ipod:f,android:p,blackberry:d,webos:h,kindle:y,tablet:v,mobile:g,desktop:m,xiaomi:w,huawei:P,touch:i,linux:O,windows:E,macos:_}},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(57),o=n(14),i=n(58),a=n(70);n(18);var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var u=s.stateHandler,l=s.ViewerEvents,f=u.IStateHandler,p=u.StateHandlerUtils.getDevicePagePoint,d=s.shared.keyboardStatus,h=function(t){function e(n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return o.type=r,o.cursorStyle="fv__cursor-crosshair",o}return c(e,t),e.prototype.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var r=n.get(0),i=this.hammer=new Hammer.Manager(r);i.add(new Hammer.Pan({direction:Hammer.DIRECTION_ALL}));var a=this.pdfViewer.getKeyboardEventBinder(o.ANNOTATION_CREATING_BINDER),s=!1,c=void 0,u=function(){};this.offCancelEvent=a.on(o.KEY_MAP_ESC_CREATING_DRAWING,(function(){u(),e.cancel(),s=!0})),i.on("panstart",(function(t){u=e.pdfViewer.switchKeyboardEventBinder(o.ANNOTATION_CREATING_BINDER),s=!1,c=r.getBoundingClientRect(),e.startPoint=p(r,t),e.start({left:e.startPoint.x,top:e.startPoint.y})})),i.on("panmove",(function(t){if(!s){var n=r.getBoundingClientRect(),o=n.left-c.left,i=n.top-c.top,a=e.correctPosition({x:e.startPoint.x+t.deltaX-o,y:e.startPoint.y+t.deltaY-i});return e.currentPoint=a,e.adjust(e.currentFakeAnnot,e.startPoint,a)}})),i.on("panend",(function(t){if(u(),!s){var n=r.getBoundingClientRect(),o=n.left-c.left,i=n.top-c.top,a=e.correctPosition({x:e.startPoint.x+t.deltaX-o,y:e.startPoint.y+t.deltaY-i});e.currentPoint=a,e.end(e.currentFakeAnnot,e.startPoint,a),c=null}})),i.on("pancancel",(function(t){if(u(),!s)return c=null,e.end(e.currentFakeAnnot,e.startPoint,e.currentPoint)})),this.removeZoomToSuccessEvent=this.pdfViewer.addEventListener(l.zoomToSuccess,(function(t){!s&&e.currentFakeAnnot&&(e.currentFakeAnnot.zoomTo(t),e.currentFakeAnnot.draw())}))},e.prototype.correctPosition=function(t){var e=this.pageRender.getShowWidth(),n=this.pageRender.getShowHeight();return{x:Math.max(0,Math.min(e,t.x)),y:Math.max(0,Math.min(n,t.y))}},e.prototype.start=function(t){var e=t.left,n=t.top;switch(this.type){case"circle":this.currentFakeAnnot=new a.FakeCircleAnnotation({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:{flags:4}});break;case"square":this.currentFakeAnnot=new i.FakeSquareAnnotation({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:{flags:4}});break;default:throw new Error("Will never happen")}this.currentFakeAnnot.setRect({left:e,top:n,right:e+10,bottom:n-10})},e.prototype.adjust=function(t,e,n){var r=e.x,o=e.y,i=n.x,a=n.y,s=void 0,c=void 0,u=Math.abs(r-i),l=Math.abs(o-a);d.isShift?(u=l=Math.min(u,l),s=i<r?r-u:r,c=a<o?o-l:o):(s=Math.min(r,i),c=Math.min(o,a)),u=Math.max(u,1),l=Math.max(l,1),t.setRect({left:s,top:c,right:s+u,bottom:c+l}),t.draw()},e.prototype.end=function(t,e,n){var r=this;this.currentFakeAnnot.apply().then((function(t){if(r.pdfViewer.config.showCommentList){var e=t[0];r.pageRender.annotsRender.getAnnotRender(e.getId()).component.showReplyDialog()}})),this.currentFakeAnnot=null},e.prototype.cancel=function(){this.currentFakeAnnot.destroy(),this.currentFakeAnnot=null},e.prototype.currentPointDirection=function(){var t=this.startPoint.x,e=this.startPoint.y,n=this.currentPoint.x,o=this.currentPoint.y;return n<=t?o<e?r.DIR_NORTH_WEST:r.DIR_SOUTH_WEST:o<e?r.DIR_NORTH_EAST:r.DIR_SOUTH_EAST},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.offCancelEvent&&this.offCancelEvent(),this.removeZoomToSuccessEvent&&this.removeZoomToSuccessEvent()},e.prototype.out=function(){this.destroyPageHandler()},e}(f);e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};e.convertFromNumberToHex=function(t){if("number"!=typeof t)throw new TypeError("Unexpected color value:"+t);if(t<0)return-1;var e=t.toString(16),n=6;t>16777215&&(n=8);for(;e.length<n;)e="0"+e;return"#"+e},e.convertFromNumberToRGBA=function(t){var e=void 0;t<16777216?e=255:(e=t/o&255,t&=16777215);return{r:t>>16&255,g:t>>8&255,b:255&t,a:e}},e.colorConvertor=i,e.standardColorAsARGBNumber=function(t){if(t<=16777215)return 4278190080+t;if(t>16777215)return t;if("string"==typeof t){if((t=t.replace("#","").trim()).match(/^[0-9A-F]{8}$/i))return parseInt(t,16);if(t.match(/^[0-9A-F]{6}$/i))return 4278190080+parseInt(t,16);if(t.match(/^rgb\(\d{1,3}(,\d{1,3}){2}\)$/i)){var e=t.split(/\D+/).map((function(t){return parseInt(t)})),n=r(e,4),o=n[1],i=n[2],a=n[3];return 4278190080+(o<<16)+(i<<8)+a}if(t.match(/^rgba\(\d{1,3}(,\d{1,3}){3}\)$/i)){var s=t.split(/\D+/).map((function(t){return parseInt(t)})),c=r(s,5),u=c[1],l=c[2],f=c[3],p=c[4];return Math.floor(4278190080*p)+(u<<16)+(l<<8)+f}}throw new Error('incorrect color format: "'+t+'"')},e.convertFromNumberToJSColor=function(t){return["RGB",((16711680&t)>>16)/255,((65280&t)>>8)/255,(255&t)/255]},e.getTransparentOrColor=function(t){var e=void 0;e=0===t?"transparent":i(16777215&t,"#");return e};var o=Math.pow(2,24);function i(t){var e,n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"HTML",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a="",s=void 0;switch("number"==typeof t&&(t=["int",t]),t[0]){case"int":e=(16711680&t[1])>>16,n=(65280&t[1])>>8,r=255&t[1];break;case"T":e=0,n=0,r=0,i=0;break;case"G":e=n=r=255*t[1];break;case"RGB":e=255*t[1],n=255*t[2],r=255*t[3];break;case"CMYK":e=(1-t[4])*(1-t[1])*255,n=(1-t[4])*(1-t[2])*255,r=(1-t[4])*(1-t[3])*255;break;case"r":e=+(s=t.match(/rgba?\((\d*),\s*(\d*),\s*(\d*),?\s*([\.0-9]*)?\)/))[1],n=+s[2],r=+s[3];var c=s[4];void 0!==c&&(i=+c);break;case"#":var u=4==t.length?/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])$/:/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/;s=t.match(u),e=parseInt(s[1],16),n=parseInt(s[2],16),r=parseInt(s[3],16);break;default:throw new Error("Unsupported color format")}switch(o){case"HTML":a=e===n&&n===r&&-1===r?"transparent":"rgba("+parseInt(e)+","+parseInt(n)+","+parseInt(r)+","+i+")";break;case"RGB":a=["RGB",e/255,n/255,r/255];break;case"#":a+=e<16?"#0"+e.toString(16):"#"+e.toString(16),a+=n<16?"0"+n.toString(16):n.toString(16),a+=r<16?"0"+r.toString(16):r.toString(16);break;case"int":a=0,a|=(i*=255)<<24,a|=e<<16,a|=n<<8,a|=r,a>>>=0}return a}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ORIENTATION_VERTICAL="vertical",e.ORIENTATION_HORIZONTAL="horizontal",e.ORIENTATION_ALL="all"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DashedPathGenerator=e.DashedPathSegment=e.DashedPath=void 0;var r,o=n(17),i=n(2);(r=i)&&r.__esModule;function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var u=e.DashedPath=function(t){function e(){return a(this,e),s(this,t.apply(this,arguments))}return c(e,t),e.prototype.render=function(t){try{t.save(),t.beginPath(),this.segments.filter((function(t){return t.isOn})).forEach((function(e){e.render(t)})),t.closePath()}finally{t.restore()}},e}(o.Path),l=e.DashedPathSegment=function(t){function e(n,r){var o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a(this,e);var i=s(this,t.call(this,n,r));return i.isOn=o,i}return c(e,t),e.prototype.render=function(t){this.isOn&&(t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y))},e}(o.PathSegment);e.DashedPathGenerator=function(t){function e(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];a(this,e);var c=s(this,t.call(this));return c.contour=n,c.dashes=r,c.phase=o,c.continuous=i,c.dashSum=r.reduce((function(t,e){return t+e}),0),c}return c(e,t),e.prototype.generate=function(){var t=this,e=new u;if(0==this.dashes.length)this.contour.reduce((function(t,n){e.addSegment(new l(t,n))}));else{var n=this.phase<this.dashSum?this.phase:this.phase%this.dashSum,r=0,o=0,i=!0;n>0&&this.dashes.reduce((function(t,e,a){var s=t+e;return s>n&&(o=s-n,r=a,i=a%2==0),s}),0);var a=function(){return(r+1)%t.dashes.length};this.contour.reduce((function(s,c){var u=s.distanceTo(c),f=s;for(o>0&&(e.addSegment(new l(f,f=f.move(o,c),i)),i=!i,u-=o,r=a());;){var p=t.dashes[r];if(!(u>=p)){e.addSegment(new l(f,c,i)),t.continuous?(o=p-u,u=0):(o=n,r=0,i=!0);break}e.addSegment(new l(f,f=f.move(p,c),i)),u-=p,r=a(),i=!i}return c}))}return e},e}(o.PathGenerator)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));n(18);var i,a=n(14),s=n(72),c=(i=s)&&i.__esModule?i:{default:i},u=n(73),l=n(35),f=n(4);function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var d=o.stateHandler,h=o.ViewerEvents,y=d.IStateHandler,v=o.shared,g=(v.DebouncePromiseQueue,v.keyboardStatus),m=v.ThrottleAsyncTaskExecutor,b=(o.Consts.LineEndingStyle,d.StateHandlerConsts.STATE_HANDLER_CREATE_LINE),w=d.StateHandlerUtils.getDevicePagePoint,P=function(t){function e(n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return i.startStyle=r,i.endStyle=o,i.cursorStyle="fv__cursor-crosshair",i.executor=new m(20,!0),i}return p(e,t),e.getStateName=function(){return b},e.prototype.createInteractionTool=function(t,e){return new c.default(this.pdfViewer,t,e)},e.prototype.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var o=n.get(0);this.snappedPointAssistant=new l.SnappedPointAssistant(o);var i=this.interaction=this.createInteractionTool(o,{direction:Hammer.DIRECTION_ALL});i.init();var s=void 0,c=function(){return i.on("mousemove",(function(t){e.executor.exec((function(){return e.getSnappedPoint(t).then((function(n){(0,f.isSamePoint)(t,n)?(e.snappedPointAssistant.hide(),s=null):(e.snappedPointAssistant.show(),e.snappedPointAssistant.setPosition(n.x,n.y),s=n)}))}))}))};this.offMouseMoveEvent=c();var u=void 0,p=!1,d=this.pdfViewer.getKeyboardEventBinder(a.ANNOTATION_CREATING_BINDER),y=function(){e.pdfViewer.keyboard.activeDefaultBinder()};this.offCancelEvent=d.on(a.KEY_MAP_ESC_CREATING_DRAWING,(function(){p||(y(),e.cancel(),e.interaction.cancel(),p=!0)})),i.on("start",(function(t){if(e.offMouseMoveEvent(),e.pdfViewer.switchKeyboardEventBinder(a.ANNOTATION_CREATING_BINDER),p=!1,s)u=[s.x,s.y];else{var n=w(o,t);u=[n.x,n.y]}var i=e.pageRender.page.reverseDevicePoint(u,e.pageRender.scale,e.pageRender.getRotation()),c=r(i,2),l=c[0],f=c[1];e.start(l,f)})),i.on("move",(function(t){if(!p){var n=function(t,e){if(g.isShift){var n=Math.sqrt(t*t+e*e),r=Math.atan2(e,t),o=.25*Math.PI,i=Math.round(r/o)*o;t=n*Math.cos(i),e=n*Math.sin(i)}return[t,e]}(t.deltaX,t.deltaY),o=r(n,2),i=o[0],a=o[1];e.adjust(e.fakeAnnotation,{x:u[0]+i,y:u[1]+a})}})),i.on("end",(function(t){if(!p)return y(),e.offMouseMoveEvent=c(),e.end()})),i.on("cancel",(function(t){p||(y(),e.cancel(),e.offMouseMoveEvent=c())})),this.__removeZoomToSuccessEventListener=this.pdfViewer.addEventListener(h.zoomToSuccess,(function(t){!p&&e.fakeAnnotation&&(e.fakeAnnotation.zoomTo(t),e.fakeAnnotation.draw())}))},e.prototype.correctCoord=function(t,e){var n=this.pageRender.getScale(),r=t.getPxWidth()*n,o=t.getPxHeight()*n;return[Math.max(0,Math.min(r,e[0])),Math.max(0,Math.min(o,e[1]))]},e.prototype.start=function(t,e){return this.fakeAnnotation=new u.FakeLineAnnotation({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson({flags:4,startPoint:{x:t,y:e},endPoint:{x:t+1,y:e+1},startStyle:this.startStyle,endStyle:this.endStyle})})},e.prototype.createAnnotJson=function(t){return t},e.prototype.getSnappedPoint=function(t){var e=this;return this.pageRender.getPDFPage().then((function(n){var o=e.pdfViewer.getSnapMode(e.constructor.getStateName());if(o&&o.length>0){var i=n.reverseDevicePoint([t.x,t.y],e.pageRender.scale,e.pageRender.rotate),a=r(i,2),s=a[0],c=a[1];return n.getSnappedPoint({x:s,y:c},o).then((function(t){var o=n.getDevicePoint([t.x,t.y],e.pageRender.scale,e.pageRender.rotate),i=r(o,2);return{x:i[0],y:i[1]}}))}return t}))},e.prototype.adjust=function(t,e){var n=this;this.executor.exec((function(){return n.getSnappedPoint(e).then((function(r){(0,f.isSamePoint)(e,r)?n.snappedPointAssistant.hide():(n.snappedPointAssistant.setPosition(r.x,r.y),n.snappedPointAssistant.show()),t.setEndPoint(r),t.draw()}))}))},e.prototype.end=function(){var t=this;this.fakeAnnotation&&this.executor.exec((function(){t.snappedPointAssistant.hide();var e=t.fakeAnnotation.apply().then((function(e){if(t.pdfViewer.config.showCommentList){var n=e[e.length-2];t.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}}));return t.fakeAnnotation=null,e}))},e.prototype.cancel=function(){this.fakeAnnotation&&(this.snappedPointAssistant.hide(),this.executor.cancel(),this.pdfViewer.eventEmitter.emit(h.cancelAddAnnot),this.fakeAnnotation.destroy(),this.fakeAnnotation=null)},e.prototype.destroyPageHandler=function(){this.offMouseMoveEvent(),this.snappedPointAssistant.destroy(),this.executor.cancel(),this.interaction&&this.interaction.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.offCancelEvent&&this.offCancelEvent(),this.__removeZoomToSuccessEventListener&&this.__removeZoomToSuccessEventListener()},e.prototype.out=function(){this.destroyPageHandler()},e}(y);e.default=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(20),i=(r=o)&&r.__esModule?r:{default:r};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)).vendors.EventEmitter,c=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r.pdfViewer=n,r.eventEmitter=new s,r.addDestroyHook((function(){r.eventEmitter.removeAllListeners()})),r.isLocked=!1,r.isStarted=!1,r}return a(e,t),e.prototype.init=function(){},e.prototype.start=function(){this.isStarted=!0},e.prototype.cancel=function(){this.isStarted=!1},e.prototype.emit=function(t,e){this.isLocked||this.eventEmitter.emit(t,e)},e.prototype.on=function(t,e){var n=this;return this.eventEmitter.on(t,e),function(){n.eventEmitter.off(t,e)}},e.prototype.lock=function(){this.isLocked=!0},e.prototype.unlock=function(){this.isLocked=!1},e}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(2),i=(r=o)&&r.__esModule?r:{default:r},a=n(1),s=n(25);var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.component=e}return t.prototype.numberToRGBAString=function(t){if("string"==typeof t)return t;var e=(0,s.convertFromNumberToRGBA)(t);return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},t.prototype.renderLineEnd=function(t,e,n,r,o,i){if(0!==r){var s=n.renderingData.fillColor,c=n.scale,u=Math.atan2(i.y-o.y,i.x-o.x);switch(t.save(),t.lineJoin="miter",t.beginPath(),r){case a.LineEndingStyle.Square:this.renderSquareEnding(t,i,u,c,e);break;case a.LineEndingStyle.Circle:this.renderCircleEnding(t,i,u,c,e);break;case a.LineEndingStyle.Diamond:this.renderDiamondEnding(t,i,u,c,e);break;case a.LineEndingStyle.OpenArrow:this.renderOpenArrowEnding(t,i,u,c,e);break;case a.LineEndingStyle.ClosedArrow:this.renderClosedArrowEnding(t,i,u,c,e);break;case a.LineEndingStyle.Butt:this.renderButtEnding(t,i,u,c,e);break;case a.LineEndingStyle.ROpenArrow:this.renderROpenArrowEnding(t,i,u,c,e);break;case a.LineEndingStyle.RClosedArrow:this.renderRClosedArrowEnding(t,i,u,c,e);break;case a.LineEndingStyle.Slash:this.renderSlashEnding(t,i,u,c,e)}switch(r){case a.LineEndingStyle.ClosedArrow:case a.LineEndingStyle.RClosedArrow:case a.LineEndingStyle.Diamond:case a.LineEndingStyle.Square:case a.LineEndingStyle.Circle:s&&(t.fillStyle=this.numberToRGBAString(s),t.fill())}t.stroke(),t.restore()}},t.prototype.renderSquareEnding=function(t,e,n,r,o){var i=10+2*o,a=i/2;t.translate(e.x,e.y),t.rotate(n),t.moveTo(-a,-a),t.rect(-a,-a,i,i)},t.prototype.renderCircleEnding=function(t,e,n,r,o){var i=4+o;t.translate(e.x,e.y),t.rotate(n),t.moveTo(i,0),t.arc(0,0,i,0,2*Math.PI)},t.prototype.renderDiamondEnding=function(t,e,n,r,o){var i=10+2*o,a=i/2;t.translate(e.x,e.y),t.rotate(n+Math.PI/4),t.moveTo(-a,-a),t.rect(-a,-a,i,i)},t.prototype.renderOpenArrowEnding=function(t,e,n,r,o){var i=30/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!1)},t.prototype.renderClosedArrowEnding=function(t,e,n,r,o){var i=30/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!0)},t.prototype.renderButtEnding=function(t,e,n,r,o){var a=Math.PI/2,s=10+2*o,c=new i.default(e.x+s/2,e.y).rotate(Math.PI-n+a,e),u=c.rotate(Math.PI,e);t.moveTo(c.x,c.y),t.lineTo(u.x,u.y)},t.prototype.renderROpenArrowEnding=function(t,e,n,r,o){var i=150/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!1)},t.prototype.renderRClosedArrowEnding=function(t,e,n,r,o){var i=150/180*Math.PI;this.renderArrow(t,e,n,r,o,i,!0)},t.prototype.renderArrow=function(t,e,n,r,o,a){var s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=10+2*o,u=new i.default(e.x+c,e.y),l=u.rotate(Math.PI-n+a,e),f=u.rotate(Math.PI-n-a,e);t.moveTo(l.x,l.y),t.lineTo(e.x,e.y),t.lineTo(f.x,f.y),s&&t.closePath()},t.prototype.renderSlashEnding=function(t,e,n,r,o){var a=60/180*Math.PI,s=10+2*o,c=new i.default(e.x+s/2,e.y).rotate(Math.PI-n+a,e),u=c.rotate(Math.PI,e);t.moveTo(c.x,c.y),t.lineTo(u.x,u.y)},t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={IDLE:"idle",CONSTRUCT:"construct",CREATING:"creating"}},function(t,e,n){"use strict";n.r(e),n.d(e,"FakePolygonAnnotation",(function(){return f}));var r,o=n(21),i=n(43),a=n.n(i),s=n(1),c=n(6),u=n.n(c),l=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),f=function(t){function e(e){var n=t.call(this,e)||this;n.isCloudy=!1;var r=n.annotationInfo;if(r.borderStyle)switch(r.borderInfo.style=r.borderStyle,r.borderStyle){case s.BORDER_STYLE.CLOUDY:n.annotationInfo.borderInfo.cloudIntensity=r.borderStyleParam,n.isCloudy=!0;break;case s.BORDER_STYLE.DASHED:n.annotationInfo.borderInfo.dashes=r.borderStyleParam}return n}return l(e,t),e.prototype.generateApRenderer=function(){var t=this.isCloudy;return new a.a(this,t)},e.prototype.getOuterDeviceRect=function(e,n){return this.isCloudy?u.a.on(this.getDeviceRect(e,n)).expand(100*e).extract():t.prototype.getDeviceRect.call(this,e,n)},e.prototype.getType=function(){return"polygon"},e}(o.FakePolylineAnnotation)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SolidPathSegment=void 0;var r,o=n(17),i=n(2);(r=i)&&r.__esModule;function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var u=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a(this,e);var o=s(this,t.call(this));return o.closing=r,n.length>1&&n.reduce((function(t,e,n){return o.addSegment(new l(t,e,1===n)),e})),o}return c(e,t),e.prototype.render=function(t){t.beginPath(),this.segments.forEach((function(e){e.render(t)})),this.closing&&t.closePath()},e}(o.Path);e.default=u;var l=e.SolidPathSegment=function(t){function e(n,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a(this,e);var i=s(this,t.call(this,n,r));return i.atTheStart=o,i}return c(e,t),e.prototype.render=function(t){this.atTheStart&&t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y)},e}(o.PathSegment)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(8),i=(r=o)&&r.__esModule?r:{default:r};var a=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.from=new i.default(e.x,e.y),this.end=new i.default(n.x,n.y),this.length=this.end.substract(this.from).length(),this.k=(n.y-e.y)/(n.x-e.x),isFinite(this.k)?this.delta=e.y-this.k*e.x:this.x=e.x}return t.prototype.hasPoint=function(t){var e=new i.default(t.x,t.y),n=e.substract(this.from).length()+e.substract(this.end).length();return Math.abs(this.length-n)<.001},t.prototype.intersectPointInSegment=function(t){var e=this.intersectPointInFunction(t);if(e&&this.hasPoint(e)&&t.hasPoint(e))return e},t.prototype.intersectPointInFunction=function(t){if(isFinite(this.k)){if(isFinite(t.k)){if(this.k===t.k){if(this.delta!==t.delta)return null;var e=Math.min(this.from.x,this.end.x),n=Math.max(this.from.x,this.end.x),r=Math.min(t.from.x,t.end.x),o=Math.max(t.from.x,t.end.x),i=void 0;if(e>=r&&e<=o)i=e;else{if(!(n>=r&&n<=o))return null;i=n}return{x:i,y:this.k*i+this.delta}}var a=(t.delta-this.delta)/(this.k-t.k);return{x:a,y:this.k*a+this.delta}}return t.intersectPointInFunction(this)}if(isFinite(t.k))return{x:this.x,y:t.k*this.x+t.delta};if(this.x===t.x){var s=Math.min(this.from.y,this.end.y),c=Math.max(this.from.y,this.end.y),u=Math.min(t.from.y,t.end.y),l=Math.max(t.from.y,t.end.y),f=void 0;if(s>=u&&s<=l)f=s;else{if(!(c>=u&&c<=l))return null;f=c}return{x:this.x,y:f}}return null},t.prototype.hasIntersect=function(t){return!!this.intersectPointInSegment(t)},t}();e.default=a,window.Vector=i.default,window.LineSegment=a},function(t,e,n){"use strict";n.r(e),n.d(e,"EndPointRenderer",(function(){return s})),n.d(e,"IntersectionPointRenderer",(function(){return c})),n.d(e,"SnappedPointAssistant",(function(){return u}));var r,o=n(20),i=n.n(o),a=(n(75),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=function(){function t(){}return t.prototype.render=function(t){var e=t.canvas.width;t.clearRect(0,0,e,e),t.strokeStyle="red",t.arc(e/2,e/2,2*Math.PI,0,360),t.stroke()},t}(),c=function(){function t(){}return t.prototype.render=function(t){var e=t.canvas.width;t.clearRect(0,0,e,e),t.strokeStyle="red",t.moveTo(0,0),t.lineTo(e,e),t.moveTo(0,e),t.lineTo(e,0),t.stroke()},t}(),u=function(t){function e(e){var n=t.call(this)||this;return n.container=e,n.size=16,n.renderer=new s,n.canvas=document.createElement("canvas"),n.canvas.classList.add("fv__viewer-snapped-point"),n.addDestroyHook((function(){n.canvas.parentElement===n.container&&n.container.removeChild(n.canvas)})),n.canvas.width=n.size,n.canvas.height=n.size,n}return a(e,t),e.prototype.setRenderer=function(t){this.renderer=new t,this.redraw()},e.prototype.setSize=function(t){this.size=t,this.canvas.width=t,this.canvas.height=t,this.redraw()},e.prototype.setPosition=function(t,e){!function(t,e){var n=[],r=getComputedStyle(t);if("string"==typeof e){var o={};e.split(/;[\r\n\s]*/).forEach((function(t){var e=t.split(/\s*:\s*/),n=e[0],r=e[1];o[n]=r})),e=o}for(var i in e)r[i]!==e[i]&&n.push(i+":"+e[i]);n.length>0&&(t.style.cssText+=n.join(";"))}(this.canvas,{left:t+"px",top:e+"px",margin:.5*-this.size+"px "+.5*-this.size+"px"})},e.prototype.show=function(){this.container.appendChild(this.canvas),this.redraw()},e.prototype.hide=function(){this.canvas.parentElement===this.container&&this.container.removeChild(this.canvas)},e.prototype.redraw=function(){if(this.renderer){var t=this.canvas.getContext("2d");t&&this.renderer.render(t)}},e}(i.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(5)),o=n(1),i=c(n(2)),a=n(16),s=c(n(6));function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var p=function(t){function e(){return u(this,e),l(this,t.apply(this,arguments))}return f(e,t),e.prototype.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-square-canvas")},e.prototype.doRender=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t.renderingData,r=n.annotInfo,i=r.borderInfo||{},a=this.convertPointToPixel(i.width||1,t.scale),s=this.canvas.getContext("2d");s.clearRect(0,0,this.canvas.width,this.canvas.height),s.save(),t.lineWidth=a,e&&(s.globalAlpha=r.opacity),0===a||!1===r.hasBorderColor?s.strokeStyle="transparent":s.strokeStyle=this.numberToRGBAString(r.color),s.lineWidth=a;try{switch(i.style){case o.BORDER_STYLE.BEVELED:case o.BORDER_STYLE.UNDERLINE:case o.BORDER_STYLE.SOLID:this.renderSolid(s,r,t);break;case o.BORDER_STYLE.DASHED:this.renderDashed(s,r,t);break;case o.BORDER_STYLE.CLOUDY:this.renderCloud(s,r,t)}var c=r.fillColor;c&&(s.fillStyle=this.numberToRGBAString(c),s.fill()),s.stroke()}finally{s.restore()}},e.prototype.shrinkRect=function(t,e){var n=s.default.on(t).shrink(e).extract();return Object.assign(n,{width:n.right-n.left,height:n.bottom-n.top})},e.prototype.renderCloud=function(t,e,n){e.fillColor;var r=e.borderInfo.cloudIntensity,o=this.shrinkRect(n.innerRect,0),s=this.shrinkRect(n.outerRect,0),c=o.width,u=o.height;new a.CloudyPathGenerator([new i.default(0,u),new i.default(c,u),new i.default(c,0),new i.default(0,0)],o,s).generate(32/3/r).render(t)},e.prototype.renderDashed=function(t,e,n){var r=this,o=e.borderInfo,i=o.dashes||[],a=o.dashPhase||0,s=n.scale;t.save(),t.setLineDash&&t.setLineDash(i.map((function(t){return r.convertPointToPixel(t,s)}))),t.lineDashOffset=this.convertPointToPixel(a,s),this.renderSolid(t,e,n)},e.prototype.renderSolid=function(t,e,n){var r=n.lineWidth,o=n.outerRect.width,i=n.outerRect.height,a=.5*r;t.beginPath(),t.rect(a,a,o-r,i-r),t.closePath()},e}(r.default);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(65),i=(r=o)&&r.__esModule?r:{default:r};var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flag=e}return t.prototype.getValue=function(){return this.flag},t.prototype.checkInvisible=function(){return this.flag&i.default.invisible},t.prototype.checkHidden=function(){return this.flag&i.default.hidden},t.prototype.checkPrint=function(){return this.flag&i.default.print},t.prototype.checkNoZoom=function(){return this.flag&i.default.noZoom},t.prototype.checkNoRotate=function(){return this.flag&i.default.noRotate},t.prototype.checkNoView=function(){return this.flag&i.default.noView},t.prototype.checkReadOnly=function(){return this.flag&i.default.readOnly},t.prototype.checkLocked=function(){return this.flag&i.default.locked},t.prototype.checkToggleNoView=function(){return this.flag&i.default.toggleNoView},t.prototype.checkLockedContents=function(){return this.flag&i.default.lockedContents},t.prototype.check=function(t){return this.flag&t},t.prototype.and=function(){return this},t.prototype.or=function(t){return this.flag=this.flag|t,this},t}();e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function t(e){for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];var s=!0;"boolean"==typeof e&&(s=e,e=o[0],o=o.slice(1));(null===e||"object"!==(void 0===e?"undefined":r(e))&&"function"!=typeof e)&&(e={});return o.reduce((function(e,n){if(null==n)return e;for(var r in n){var o=e[r],i=n[r];if(e!==i){var c=void 0;if(s&&i&&(a(i)||(c=Array.isArray(i)))){var u=void 0;c?(c=!1,u=o&&Array.isArray(o)?o:[]):u=o&&a(o)?o:{},e[r]=t(s,u,i)}else void 0!==i&&(e[r]=i)}}return e}),e)};var o={"[object Array]":"array","[object Boolean]":"boolean","[object Date]":"date","[object Error]":"error","[object Function]":"function","[object Number]":"number","[object Object]":"object","[object RegExp]":"regexp","[object String]":"string"};function i(t,e){return null!=t&&{}.hasOwnProperty.call(t,e)}function a(t){if(!t||"object"!==function(t){if(null===t)return"null";switch(void 0===t?"undefined":r(t)){case"object":case"function":return o[Object.prototype.toString(t)]||"object"}return void 0===t?"undefined":r(t)}(t)||t.nodeType||null!=t&&t==t.window)return!1;if(t.constructor&&!i(t,"constructor")&&!i(t.constructor.prototype,"isPrototypeOf"))return!1;var e=void 0;for(e in t);return void 0===e||i(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(66),i=(r=o)&&r.__esModule?r:{default:r};e.default=Object.assign({jrLicenseSuccess:"jr-license-success",srLicenseSuccess:"sr-license-success",beforeOpenFile:"before-open-file",openingFile:"opening-file",startConvert:"start-convert",finishConvert:"finish-convert",openFileSuccess:"open-file-success",openFileFailed:"open-file-failed",willCloseDocument:"will-close-document",renderFileSuccess:"render-file-success",renderFileFailed:"render-file-error",renderPageSuccess:"render-page-success",beforeZoomTo:"before-zoom-to",zoomToSuccess:"zoom-to-success",zoomToFailed:"zoom-to-failed",startChangeViewMode:"start-change-view-mode",changeViewModeSuccess:"change-view-mode-success",changeViewModeFailed:"change-view-mode-failed",pagesLayoutRedrawBegin:"pages-layout-redraw-begin",pageLayoutRedraw:"page-layout-redraw",pagesLayoutRedrawEnd:"pages-layout-redraw-end",copyTextSuccess:"copy-text-success",copyTextFailed:"copy-text-failed",tapPage:"tap-page",tapAnnotation:"tap-annotation",pressPage:"press-page",pressAnnotation:"press-annotation",pressText:"press-text",rightClickPage:"right-click-page",rightClickAnnotation:"right-click-annotation",doubleTapPage:"double-tap-page",doubleTapAnnotation:"double-tap-annotation",activeAnnotationBefore:"active-annotation-before",activeAnnotation:"active-annotation",activeAnnotationAfter:"active-annotation-after",panActiveAnnotation:"pan-active-annotation",doubleTapActiveAnnotation:"double-tap-active-annotation",contextMenuActiveAnnotation:"contextmenu-action-annotation",unActiveAnnotation:"unactive-annotation",updateActiveAnnotation:"update-action-annotation",updateActionAnnotation:"update-action-annotation",removeActiveAnnotationBefore:"remove-action-annotation-before",removeActionAnnotationBefore:"remove-action-annotation-before",removeActiveAnnotationSuccess:"remove-action-annotation-success",removeActionAnnotationSuccess:"remove-action-annotation-success",removeActiveAnnotationFailed:"remove-action-annotation-failed",removeActionAnnotationFailed:"remove-action-annotation-failed",switchStateHandler:"switch-state-handler",deactiveStateHandler:"deactive-state-handler",redactAnnotRendered:"redact-annot-rendered",redactAnnotAllApplyed:"applyed-all-redaction",redactAnnotApplyed:"applyed-redaction",pageNumberChange:"page-number-change",beforeDocumentRotation:"before-document-rotation",afterDocumentRotation:"after-document-rotation",snapModeChanged:"snap-mode-changed",createPageAreaRenderer:"create-page-area-renderer",destroyPageAreaRenderer:"destroy-page-area-renderer",startUpdatePageAreaRenderer:"start-update-page-area-renderer",createSnapshotArea:"create-snapshot-area",updateSnapshotArea:"update-snapshot-area",stabilizedSnapshotArea:"stabilized-snapshot-area",switchPageAreaRenderer:"switch-page-area-renderer",fitWidthResizeViewport:"fit-width-resize-viewport",signatureFieldMouseLButtonDown:"signature-field-Lbutton-down",signatureFieldMouseLButtonUp:"signature-field-LButton-up",signatureFieldMouseEnter:"signature-field-mouse-enter",signatureFieldMouseExit:"signature-field-mouse-exit",visiblePagesRenderCompleted:"completed-render-visible-pages",marqueeZoomIn:"marquee-zoom-in",marqueeZoomOut:"marquee-zoom-out",inkSignAdded:"inkSign-added",inkSignDeleted:"inkSign-deleted",pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",customDataAdd:"custom-data-add",customDataImported:"custom-data-imported",customDataRemoved:"custom-data-removed",customDataUpdated:"custom-data-updated",distanceAnnotCreationStart:"distance-creation-start",updateCreatingDistanceAnnot:"distance-creation-update",distanceAnnotCreationEnd:"distance-creation-end",distanceAnnotCreationCancel:"distance-creation-cancel",addEditImage:"add-edit-image",InkImageSelected:"ink-image-selected",checkTheSearch:"check-the-search",activeElementChanged:"active-element-changed",cancelCreatingDistance:"cancel-creating-measurement",completeCreatingDistance:"complete-creating-measurement",eraserSuccess:"eraser-success",addAnnotSuccess:"add-annot-success",cancelAddAnnot:"cancel-add-annot",globalAnnotFlagChanged:"global-annot-flag-changed",toolbarTabsClicked:"toolbar-tabs-clicked",disableScroll:"disable-scroll",enableScroll:"enable-scroll",updateScrollableStatus:"update-scrollable-status",selectText:"select-text",changeEnableJS:"change-enable-js",toggleEngineSr2JrSuccess:"toggle-engine-sr-to-jr-success",iconInited:"iconInited",iconAdded:"iconAdded",iconRemoved:"iconRemoved",annotationPermissionChanged:"annotation-premission-changed",startScrollingPage:"pdfui-start-scrolling-page",scrollingPage:"pdfui-scrolling-page",endScrollingPage:"pdfui-end-scrolling-page",designerAssistantStatusChanged:"form-designer-assistant-status-changed",mouseEnter:"mouse-enter",mouseLeave:"mouse-leave",setFromFieldHighlight:"set_form_field_highlight"},i.default)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=c(n(5)),o=c(n(2)),i=n(1),a=c(n(6)),s=n(16);function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var p=function(t){function e(){return u(this,e),l(this,t.apply(this,arguments))}return f(e,t),e.prototype.doRender=function(t){var e=t.renderingData.annotInfo,n=e.borderInfo||{},r=this.convertPointToPixel(n.width||1,t.scale);if(0!=r||-1!=e.borderColor||e.fillColor){var o=this.canvas.getContext("2d");o.clearRect(0,0,this.canvas.width,this.canvas.height),o.save(),t.lineWidth=r,o.globalAlpha=e.opacity,0===r||!1===e.hasBorderColor?o.strokeStyle="transparent":o.strokeStyle=this.numberToRGBAString(e.color),o.lineWidth=r;try{switch(n.style){case i.BORDER_STYLE.SOLID:this.renderSolid(o,e,t);break;case i.BORDER_STYLE.BEVELED:break;case i.BORDER_STYLE.DASHED:this.renderDashed(o,e,t);break;case i.BORDER_STYLE.CLOUDY:0==n.cloudIntensity?this.renderSolid(o,e,t):this.renderCloud(o,e,t)}var a=e.fillColor;a&&(o.fillStyle=this.numberToRGBAString(a),o.fill()),o.stroke()}finally{o.restore()}}},e.prototype.renderSolid=function(t,e,n){this.renderDashed(t,e,n)},e.prototype.renderDashed=function(t,e,n){var r=e.borderInfo,i=n.lineWidth,a=n.innerRect,s=n.outerRect,c=r.dashes||[],u=r.dashPhase||0,l=.5*i,f=new o.default(.5*(a.left+a.right)-s.left,.5*(a.top+a.bottom)-s.top),p=Math.abs(.5*a.height-l),d=Math.abs(.5*a.width-l);t.lineDashOffset=u,t.setLineDash&&t.setLineDash(c),t.beginPath(),function(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI,c=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];t.ellipse?t.ellipse(e,n,r,o,i,a,s,c):(t.save(),t.translate(e,n),t.rotate(i),t.scale(r,o),t.arc(0,0,1,a,s,c),t.restore())}(t,f.x,f.y,d,p),t.closePath()},e.prototype.renderCloud=function(t,e,n){var r=e.borderInfo.cloudIntensity,i=.5*n.lineWidth,a=this.shrinkRect(n.innerRect,i),c=this.shrinkRect(n.outerRect,i),u=new o.default(.5*(c.right-c.left)-(a.left-c.left),.5*(c.bottom-c.top)-(a.top-c.top)),l=.5*a.height-i,f=.5*a.width-i,p=16/r,d=Math.PI/p,h=2*Math.PI,y=Array(Math.floor(h/d)-1).fill(0).map((function(t,e){return e*d%h})).map((function(t){var e=f*Math.cos(h-t),n=l*Math.sin(h-t);return u.add(e,n)}));new s.CloudyPathGenerator(y,a,c).generate(1,t).render(t)},e.prototype.shrinkRect=function(t,e){var n=a.default.on(t).shrink(e).extract();return Object.assign(n,{width:n.right-n.left,height:n.bottom-n.top})},e}(r.default);e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=c(n(5)),i=c(n(2)),a=n(1),s=c(n(30));function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var l=Math.log(2),f=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.helper=new s.default(n),r}return u(e,t),e.prototype.doRender=function(t){var e=this,n=t.renderingData,r=n.page,o=n.annotInfo,s=o.borderInfo||{},c=t.scale,u=t.rotate,l=this.convertPointToPixel(s.width,c);if(0!=l||-1!=o.borderColor||o.fillColor){var f=this.canvas.getContext("2d");f.clearRect(0,0,this.canvas.width,this.canvas.height),f.save(),t.lineWidth=l,f.globalAlpha=o.opacity,f.lineWidth=l,0===l||!1===o.hasBorderColor?f.strokeStyle="transparent":f.strokeStyle=this.numberToRGBAString(o.color);var p=t.outerRect,d=this.convertToPathPoint(n.startPoint,c,p,r,u),h=this.convertToPathPoint(n.endPoint,c,p,r,u),y=n.leaderLinePoints,v=this.convertToPathPoint(y.start,c,p,r,u),g=this.convertToPathPoint(y.end,c,p,r,u),m=n.captionOffset,b=new i.default(this.convertPointToPixel(m.x,c),-this.convertPointToPixel(m.y,c)),w=this.convertPointToPixel(n.leaderLineExtend,c);try{if(s.style===a.BORDER_STYLE.DASHED){var P=s.dashes||[],O=s.dashPhase||0;f.setLineDash&&f.setLineDash(P.map((function(t){return e.convertPointToPixel(t,c)}))),f.lineDashOffset=this.convertPointToPixel(O,c)}f.beginPath(),this.renderLine(f,d,h,v,g,w),f.closePath(),f.stroke(),this.helper.renderLineEnd(f,l,t,n.startStyle,g,v),this.helper.renderLineEnd(f,l,t,n.endingStyle,v,g),this.renderLineCaption(f,t,l,v,g,b)}finally{f.restore()}}},e.prototype.convertToPathPoint=function(t,e,n,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=o.getDevicePoint([t.x,t.y],e,a),c=r(s,2),u=c[0],l=c[1];return new i.default(u-n.left,l-n.top)},e.prototype.renderLine=function(t,e,n,r,o,i){if(t.moveTo(r.x,r.y),t.lineTo(o.x,o.y),t.moveTo(e.x,e.y),t.lineTo(r.x,r.y),t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),i>0){var a=r.move(-i,e),s=o.move(-i,n);t.moveTo(r.x,r.y),t.lineTo(a.x,a.y),t.moveTo(o.x,o.y),t.lineTo(s.x,s.y)}},e.prototype.renderLineCaption=function(t,e,n,r,o,i){var s=e.renderingData,c=e.scale;if(s.hasCaption){var u=s.annotInfo,f=u.content;if("string"==typeof f&&!((f=f.trim()).length<1)){var p,d=Math.atan2(o.y-r.y,o.x-r.x),h=r.distanceTo(o),y=r.move(.5*h,o),v=16*(p=c+1,Math.log(p)/l),g=16777215-(16777215&u.borderColor^10855845),m=void 0;t.save(),t.fillStyle=this.numberToRGBAString(g),t.font=v+"px bold Arial",t.textBaseline="middle",t.textAlign="center";var b=t.measureText(f),w=y.move(i.y,r).rotate(Math.PI/2,y);switch(s.captionPos){case a.LINE_CAPTION_POSITION.POS_INLINE:if(0!=i.y&&0!=i.x){m=w.move(i.x,y).rotate(Math.PI/2,w);break}m=w;break;case a.LINE_CAPTION_POSITION.POS_TOP:var P=b.actualBoundingBoxAscent+b.actualBoundingBoxDescent,O=y.move(.5*(n+P)-i.y,o).rotate(Math.PI/2,y);m=0!=i.x?O.move(i.x,y).rotate(Math.PI/2,w):O}t.translate(m.x,m.y),t.rotate(d),t.fillText(f,0,0),t.restore(),t.beginPath();var E=w.move(i.x-b.width/2,y).rotate(Math.PI/2,w);t.moveTo(y.x,y.y),t.lineTo(w.x,w.y),t.moveTo(w.x,w.y),t.lineTo(E.x,E.y),t.closePath(),t.stroke()}}},e}(o.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=u(n(5)),i=u(n(30)),a=u(n(2)),s=n(1),c=u(n(33));function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var f=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.helper=new i.default(n),r}return l(e,t),e.prototype.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polyline")},e.prototype.doRender=function(t){var e=t.renderingData,n=e.annotInfo,o=n.borderInfo||{},i=t.scale,c=t.rotate,u=this.canvas.getContext("2d"),l=this.convertPointToPixel(o.width,i);if(0!=l||-1!=n.borderColor||n.fillColor){u.clearRect(0,0,this.canvas.width,this.canvas.height);var f=e.page,p=t.innerRect,d=e.vertexes.map((function(t){var e=f.getDevicePoint([t.x,t.y],i,c),n=r(e,2),o=n[0],s=n[1];return new a.default(o-p.left,s-p.top)}));t.vertexes=d,u.save(),t.lineWidth=l,u.globalAlpha=n.opacity,u.lineWidth=l,0===l||!1===n.hasBorderColor?u.strokeStyle="transparent":u.strokeStyle=this.numberToRGBAString(n.color);try{switch(o.style){case s.BORDER_STYLE.DASHED:case s.BORDER_STYLE.SOLID:this.renderSolid(u,n,t);break;case s.BORDER_STYLE.BEVELED:}var h=d[d.length-1],y=d[d.length-2],v=d[0],g=d[1];this.helper.renderLineEnd(u,l,t,e.startStyle,g,v),this.helper.renderLineEnd(u,l,t,e.endingStyle,y,h)}finally{u.restore()}}},e.prototype.renderSolid=function(t,e,n){var r=this,o=n.scale,i=e.borderInfo,a=i.dashes||[],u=i.dashPhase||0;i.style===s.BORDER_STYLE.DASHED&&(t.setLineDash&&t.setLineDash(a.map((function(t){return r.convertPointToPixel(t,o)}))),t.lineDashOffset=this.convertPointToPixel(u,o)),new c.default(n.vertexes,!1).render(t),t.stroke()},e}(o.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=u(n(5)),i=n(16),a=u(n(2)),s=u(n(33)),c=n(1);n(27);function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var d=function(t){function e(n){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];l(this,e);var o=f(this,t.call(this,n));return o.closing=r,o}return p(e,t),e.prototype.doPrepare=function(){t.prototype.doPrepare.call(this),this.canvas.classList.add("fv__viewer-render-polygon")},e.prototype.doRender=function(t){var e=t.renderingData,n=e.annotInfo,o=n.borderInfo||{},i=t.scale,s=t.rotate,u=this.convertPointToPixel(o.width,i);if(0!=u||-1!=n.borderColor||n.fillColor){var l=this.canvas.getContext("2d");l.clearRect(0,0,this.canvas.width,this.canvas.height);var f=e.page,p=t.innerRect,d=e.vertexes.map((function(t){var e=f.getDevicePoint([t.x,t.y],i,s),n=r(e,2),o=n[0],c=n[1];return new a.default(o-p.left,c-p.top)}));t.vertexes=d,l.save(),t.lineWidth=u,l.globalAlpha=n.opacity,0===u||!1===n.hasBorderColor?l.strokeStyle="transparent":l.strokeStyle=this.numberToRGBAString(n.color),l.lineWidth=u;try{switch(o.style){case c.BORDER_STYLE.DASHED:case c.BORDER_STYLE.SOLID:case c.BORDER_STYLE.UNDERLINE:case c.BORDER_STYLE.BEVELED:this.renderSolid(l,n,t);break;case c.BORDER_STYLE.CLOUDY:0==u?this.renderSolid(l,n,t):this.renderCloud(l,n,t)}}finally{l.restore()}}},e.prototype.renderCloud=function(t,e,n){var r=e.fillColor,o=e.borderInfo.cloudIntensity,a=n.innerRect;new i.CloudyPathGenerator(n.vertexes,a,n.outerRect).generate(16/o).render(t),r&&(t.fillStyle=this.numberToRGBAString(r),t.fill()),t.stroke()},e.prototype.renderSolid=function(t,e,n){var r=this,o=n.scale,i=e.borderInfo,a=i.dashes||[],u=i.dashPhase||0,l=e.fillColor;i.style===c.BORDER_STYLE.DASHED&&(t.setLineDash&&t.setLineDash(a.map((function(t){return r.convertPointToPixel(t,o)}))),t.lineDashOffset=this.convertPointToPixel(u,o)),new s.default(n.vertexes,this.closing).render(t),l&&(t.fillStyle=this.numberToRGBAString(l),t.fill()),t.stroke()},e}(o.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(86);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var a=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.lastX=0,r.lastY=0,r}return i(e,t),e.prototype.prepare=function(){t.prototype.prepare.call(this),this.canvas.style.cssText+='\n            -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";\n            -ms-filter: alpha(opacity=50);\n            filter: alpha(opacity=50);\n            -moz-opacity: 0.5;\n            -khtml-opacity: 0.5;\n            opacity: 0.5;\n        '},e.prototype.doRender=function(e){e.smartScale,e.scale,this.component;var n=e.renderingData,r=n.annotInfo;if(0!=r.hasBorderColor){var o=this.canvas.getContext("2d"),i=n.outerDeviceRect,a=i.right-i.left,s=i.bottom-i.top;if(this.container.style.cssText+="\n                left: "+i.left+"px;\n                top: "+i.top+"px;\n            ",this.canvas.style.cssText+="width: "+a+"px;height: "+s+"px;",o.save(),o.fillStyle=this.numberToRGBAString(r.color),o.globalAlpha=n.opacity,n.isArea)o.fillRect(0,0,this.canvas.width,this.canvas.height);else t.prototype.doRender.call(this,e),e.quadRects.forEach((function(t){o.fillRect(t.left,t.top,t.width,t.textBlockHeight)}));o.restore()}},e}(((r=o)&&r.__esModule?r:{default:r}).default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CreateAnnotAddon=void 0;var r=R(n(46)),o=R(n(47)),i=R(n(48)),a=R(n(49)),s=R(n(50)),c=R(n(51)),u=R(n(52)),l=R(n(53)),f=R(n(54)),p=R(n(55)),d=R(n(56)),h=R(n(71)),y=R(n(28)),v=R(n(76)),g=R(n(77)),m=R(n(82)),b=R(n(83)),w=R(n(84)),P=R(n(87)),O=R(n(88)),E=R(n(92)),_=R(n(93));function R(t){return t&&t.__esModule?t:{default:t}}function T(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function A(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.CreateAnnotAddon=function(){function t(e){S(this,t),this.pdfViewer=e}return t.prototype.init=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.showReplyDialog,n=t.hideReplyDialog,R=t.showPopup,T=t.hidePopup,A=t.showPropertiesDialog,S=t.hidePropertiesDialog,x=t.contextMenuIsEnable,M=this.pdfViewer,C=M.getStateHandlerManager();C.register(r.default),C.register(o.default),C.register(i.default),C.register(a.default),C.register(s.default),C.register(c.default),C.register(u.default),C.register(l.default),C.register(f.default),C.register(p.default),C.register(d.default),C.register(h.default),C.register(y.default),C.register(v.default),C.register(g.default),C.register(m.default),C.register(b.default),C.register(w.default),C.register(P.default),C.register(O.default),C.register(E.default),C.register(_.default);var D=e||n||R||T||A||S||x;D&&this._overwriteAnnot(e,n,R,T,A,S,x)},t.prototype._overwriteAnnot=function(t,e,n,r,o,i,a){this.pdfViewer.getAnnotManager().registerMatchRule((function(s,c){return s.isMarkup()?function(s){function c(){return S(this,c),T(this,s.apply(this,arguments))}return A(c,s),c.prototype.showReplyDialog=function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];var o;return t?t.bind(this).apply(void 0,n):(o=s.prototype.showReplyDialog).call.apply(o,[this].concat(n))},c.prototype.hideReplyDialog=function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];if(!e){var i;if(t)return;return(i=s.prototype.hideReplyDialog).call.apply(i,[this].concat(r))}return e.bind(this).apply(void 0,r)},c.prototype.showPopup=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var o;return n?n.bind(this).apply(void 0,e):(o=s.prototype.showPopup).call.apply(o,[this].concat(e))},c.prototype.hidePopup=function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];if(!r){var i;if(n)return;return(i=s.prototype.hidePopup).call.apply(i,[this].concat(e))}return r.bind(this).apply(void 0,e)},c.prototype.showPropertiesDialog=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return o?o.bind(this).apply(void 0,e):(r=s.prototype.showPropertiesDialog).call.apply(r,[this].concat(e))},c.prototype.hidePropertiesDialog=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(!i){var r;if(o)return;return(r=s.prototype.hidePropertiesDialog).call.apply(r,[this].concat(e))}return i.bind(this).apply(void 0,e)},c.prototype.contextMenuIsEnable=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r;return a?a.bind(this).apply(void 0,e):(r=s.prototype.contextMenuIsEnable).call.apply(r,[this].concat(e))},c}(c):c}))},t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var a=o.stateHandler,s=a.IStateHandler,c=a.HandStateHandler,u=o.vendors.Hammer,l=a.StateHandlerConsts.STATE_HANDLER_CREATE_TEXT,f=o.ViewerEvents,p=o.shared,d=p.getClientX,h=p.getClientY,y=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-note",r}return i(e,t),e.getStateName=function(){return l},e.prototype.pageHandler=function(t){this.pageRender=t;var e=t.$handler;e.addClass(this.cursorStyle);var n=e[0];(this.hammer=new u.Manager(n,{recognizers:[[u.Tap]]})).on("tap",(function(e){var o=n.getBoundingClientRect(),i=e.srcEvent,a=d(i),s=h(i),u=[a-o.left,s-o.top],l=u[0],p=u[1];return t.getPDFPage().then((function(e){var n=e.reverseDevicePoint([l,p],t.scale,t.getRotation()),o=r(n,2),i=o[0],a=o[1],s={flags:4,type:"text",rect:{left:i,right:i+20,top:a,bottom:a-20}};e.addAnnot(s).then((function(e){var n=e[0],r=t.annotsRender.getAnnotRender(n.getId()).component;t.pdfViewer.eventEmitter.emit(f.addAnnotSuccess,r.annot),t.pdfViewer.getStateHandlerManager().switchTo(c.getStateName()),t.annotsRender.activeAnnot(n.getId()),setTimeout((function(){t.annotsRender.doubleTapAnnot(n.getId())}),100)}))}))}))},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle)},e.prototype.out=function(){this.destroyPageHandler()},e}(s);e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)).stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_HIGHLIGHT,c=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-highlight",r}return a(e,t),e.getStateName=function(){return s},e.prototype.addAnnot=function(t,e){return t.addAnnot({flags:4,type:"highlight",rect:{left:0,right:0,top:0,bottom:0},coords:e})},e}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)).stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_STRIKE_OUT,c=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-strikeout",r}return a(e,t),e.getStateName=function(){return s},e.prototype.addAnnot=function(t,e){return t.addAnnot({flags:4,type:"strikeout",rect:{left:0,right:0,top:0,bottom:0},coords:e})},e}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)).stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_UNDERLINE,c=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-underline",r}return a(e,t),e.getStateName=function(){return s},e.prototype.addAnnot=function(t,e){return t.addAnnot({flags:4,type:"underline",rect:{left:0,right:0,top:0,bottom:0},coords:e})},e}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)).stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_SQUIGGLY,c=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-s-underline",r}return a(e,t),e.getStateName=function(){return s},e.prototype.addAnnot=function(t,e){return t.addAnnot({flags:4,type:"squiggly",rect:{left:0,right:0,top:0,bottom:0},coords:e})},e}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(7),i=(r=o)&&r.__esModule?r:{default:r};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)).stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_REPLACE,c=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-replace-text",r}return a(e,t),e.getStateName=function(){return s},e.prototype.addAnnot=function(t,e){var n=e[e.length-1],r=void 0,o=void 0,i={};switch(n.rotation){case 0:o=2*(r=n.top-n.bottom)/5,i.left=n.right-o,i.right=n.right+o,i.top=(n.top+n.bottom)/2,i.bottom=i.top-r;break;case 3:r=4*(o=n.right-n.left)/5,i.left=(n.right+n.left)/2,i.right=i.left+o,i.top=n.top+r/2,i.bottom=i.top-r;break;case 2:o=2*(r=n.top-n.bottom)/5,i.left=n.left-o,i.right=n.left+o,i.bottom=(n.top+n.bottom)/2,i.top=i.bottom+r;break;case 1:r=4*(o=n.right-n.left)/5,i.right=(n.right+n.left)/2,i.left=i.right-o,i.top=n.bottom+r/2,i.bottom=i.top-r}return t.addAnnotGroup([{flags:4,type:"strikeout",rect:{left:0,right:0,top:0,bottom:0},coords:e,noPopup:!0,subject:"Replace",typeAlias:"Replace",intent:"StrikeOutTextEdit"},{type:"caret",flags:4,rect:i,subject:"Replace",typeAlias:"Replace",intent:"Replace",_rotate:n.rotation*Math.PI/2}],1)},e}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var s=o.stateHandler,c=o.Matrix,u=s.IStateHandler,l=(s.HandStateHandler,o.vendors.Hammer),f=o.shared,p=f.DebouncePromiseQueue,d=f.getClientX,h=f.getClientY,y=s.StateHandlerUtils,v=y.getDevicePagePoint,g=(y.deltaDeviceRect,y.appendSelectMark),m=y.removeSelectMark,b=o.ViewerEvents,w=s.StateHandlerConsts.STATE_HANDLER_CREATE_CARET,P=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-insert-text",r}return a(e,t),e.getStateName=function(){return w},e.prototype.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass(this.cursorStyle);var o=n[0],a=this.hammer=new l.Manager(o,{recognizers:[[l.Pan,{direction:l.DIRECTION_ALL}],[l.Tap]]}),s=void 0,u=-1,f=-1,y=void 0;a.on("panstart",(function(t){if(!1!==e.panStart(t,e)){u=-1,f=-1;var n=v(o,t);s=[n.x,n.y],e.hideSelectMark(),y=new p}})),a.on("panmove",(function(t){!1!==e.panMove(t,e)&&y.push((function(){var n=e.pageRender,o=[s[0]+t.deltaX,s[1]+t.deltaY];return e.getTextRect(s,o,u,f).then((function(t){var e;return(e=t[0])&&"string"==typeof e.text&&(u=e.start,f=e.end),Promise.all([n.getPDFPage(),t])})).then((function(t){var e=r(t,2),o=e[0],i=e[1];return n.transformRectArray(o,i)})).then((function(t){e.showSelectMark(t)}))}))})),a.on("panend",(function(n){if(!1!==e.panEnd(n,e)){y.end(),y=null;var o=[s[0]+n.deltaX,s[1]+n.deltaY];return e.getTextRect(s,o,u,f).then((function(n){var r;return(r=n[0])&&"string"==typeof r.text&&(u=r.start,f=r.end),e.hideSelectMark(),Promise.all([t.getPDFPage(),n])})).then((function(t){var n=r(t,2),o=n[0],i=n[1];if(i.length<1)return Promise.resolve();var a=i[i.length-1],s=void 0,c=void 0,u={};switch(a.rotation){case 0:c=2*(s=a.top-a.bottom)/5,u.left=a.right-c,u.right=a.right+c,u.top=(a.top+a.bottom)/2,u.bottom=u.top-s;break;case 3:s=4*(c=a.right-a.left)/5,u.left=(a.right+a.left)/2,u.right=u.left+c,u.top=a.top+s/2,u.bottom=u.top-s;break;case 2:c=2*(s=a.top-a.bottom)/5,u.left=a.left-c,u.right=a.left+c,u.bottom=(a.top+a.bottom)/2,u.top=u.bottom+s;break;case 1:s=4*(c=a.right-a.left)/5,u.right=(a.right+a.left)/2,u.left=u.right-c,u.top=a.bottom+s/2,u.bottom=u.top-s}return o.addAnnot({type:"caret",flags:4,rect:u,_rotate:a.rotation*Math.PI/2}).then((function(t){var n=t[0],r=e.pageRender.annotsRender.getAnnotRender(n.getId()).component;e.pdfViewer.eventEmitter.emit(b.addAnnotSuccess,r.annot),e.pageRender.annotsRender.activeAnnot(n.getId()),e.pdfViewer.config.showCommentList&&r.showReplyDialog()}))}))}})),a.on("tap",(function(n){if(!1!==e.tap(n,e)){var r=o.getBoundingClientRect(),a=n.srcEvent,s=d(a),u=h(a),l=[s-r.left,u-r.top];return t.getPDFPage().then((function(n){var r=n.reverseDevicePoint([l[0],l[1]],t.scale,t.getRotation());return n.getCharInfoAtPoint(r).then((function(t){if(t){var r=t.top-t.bottom,o=t.bottom+r/2,a=(t.right+t.left)/2,s=new c;s.e=-a,s.f=-o;var u=(t.bottom+t.top)/2,l=u-r,f=t.right-3*r/8,p=t.right+3*r/8,d=s.transformRect(f,u,p,l),h=t.rotation*Math.PI/2;return s.reset(),s.rotate(-h),d=s.transformRect.apply(s,i(d)),s.reset(),s.e=a,s.f=o,d=s.transformRect.apply(s,i(d)),n.addAnnot({type:"caret",rect:{left:d[0],bottom:d[1],right:d[2],top:d[3]},_rotate:h}).then((function(t){var n=t[0],r=e.pageRender.annotsRender.getAnnotRender(n.getId()).component;e.pdfViewer.eventEmitter.emit(b.addAnnotSuccess,r.annot),e.pageRender.annotsRender.activeAnnot(n.getId()),e.pdfViewer.config.showCommentList&&r.showReplyDialog()}))}}))}))}}))},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),this.hideSelectMark()},e.prototype.out=function(){this.destroyPageHandler()},e.prototype.panStart=function(){},e.prototype.panMove=function(){},e.prototype.panEnd=function(){},e.prototype.tap=function(){},e.prototype.showSelectMark=function(t){g(this.pageRender.$handler,t)},e.prototype.hideSelectMark=function(){m(this.pageRender.$handler)},e.prototype.getTextRect=function(t,e,n,r){return this.pageRender.getTextContinueRectAtDevicePoints(t,e,n,r)},e}(u);e.default=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var c=a.stateHandler,u=a.ViewerEvents,l=(c.IStateHandler,c.StateHandlerUtils.getDevicePagePoint),f=a.vendors.Hammer,p=a.shared,d=p.extendOptions,h=p.convertFromNumberToHex,y=c.StateHandlerConsts.STATE_HANDLER_CREATE_FREETEXT_TYPEWRITER,v=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-typewriter",r}return s(e,t),e.getStateName=function(){return y},e.prototype.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass("fv__create-stamp-state-handler "+this.cursorStyle);var r=n[0];(this.hammer=new f.Manager(r,{recognizers:[[f.Tap]]})).on("tap",(function(n){var o=l(r,n),i=function(n){var i=100*t.scale*4/3,a=20*t.scale*2/3,s={left:o.x,right:o.x+i,top:o.y,bottom:o.y+2*a},c=e.input=document.createElement("div");c.contentEditable=!0;var l=e.pdfViewer.getDefaultAnnotConfig(),f=d({defaultAppearance:{textColor:255,textSize:12}},"function"==typeof l?l("freetext","FreeTextTypewriter"):{}),p=f.defaultAppearance.textSize*t.scale*4/3;c.style.cssText="\n                    position: absolute;\n                    left: "+s.left+"px;\n                    top: "+s.top+"px;\n                    min-width: "+p+"px;\n                    min-height: "+p+"px;\n                    font-size: "+p+"px;\n                    line-height: 1;\n                    font-family: FoxitPDFSDKForWeb;\n                    color: "+h(f.defaultAppearance.textColor)+";\n                    outline:1px solid #5aa;\n                    outline-offset:1px;\n                ",r.appendChild(c),c.focus(),setTimeout((function(){return c.focus()})),c.onmousedown=c.ontouchstart=c.onpointerdown=function(t){t.preventDefault(),t.stopPropagation()},c.onblur=function(){if(0===c.innerText.trim().length)r.removeChild(c),e.input=null;else{var o=c.getBoundingClientRect();s.right=s.left+o.width,s.bottom=s.top+o.height;var i=n.reverseDeviceRect(s,t.scale,t.getRotation());c.innerText=c.innerText.replace(/\n{2}/gi,"\n");var a={type:"freetext",intent:"FreeTextTypewriter",subject:"FreeTextTypewriter",rect:i,contents:c.innerText.trim(),rotate:((360-90*n.getRotation()-t.getRotation())%360+360)%360,flags:4};n.addAnnot(a).then((function(e){r.removeChild(c);var n=e[0],o=t.annotsRender.getAnnotRender(n.getId()).component;o.$textInput.get(0).blur(),t.pdfViewer.eventEmitter.emit(u.addAnnotSuccess,o.annot)}))}}};t.page?i(t.page):t.getPDFPage().then(i)}))},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler "+this.cursorStyle),this.input&&this.input.blur()},e.prototype.out=function(){t.prototype.out.call(this)},e}(i.default);e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var c=a.stateHandler,u=a.ViewerEvents,l=a.CalloutShape,f=(c.IStateHandler,c.StateHandlerUtils.getDevicePagePoint),p=a.vendors,d=p.Hammer,h=p.jQuery,y=a.shared,v=y.getClientX,g=y.getClientY,m=y.CalloutPointsReviser,b=c.StateHandlerConsts.STATE_HANDLER_CREATE_FREETEXT_CALLOUT,w=void 0,P=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-typewriter",r}return s(e,t),e.getStateName=function(){return b},e.prototype.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;n.addClass("fv__create-callout-state-handler "+this.cursorStyle),this.shapeDom=n.find(".fv__create-callout-canvas"),0==this.shapeDom.length&&(this.shapeDom=h('<canvas class="fv__create-callout-state-canvas" style="position:absolute"></canvas>'),n.append(this.shapeDom));var r=n[0],o=this.hammer=new d.Manager(r,{recognizers:[[d.Pan,{direction:d.DIRECTION_ALL}]]});this.calloutShape=this.calloutShape||new l;var i=void 0;o.on("panstart",(function(t){var e=f(r,t);w||(w=e)})).on("panend",(function(t){w=null,i&&e.addAnnot(i),e.calloutShape.hide()})).on("panmove",(function(n){if(w){var o=t.page,a=r.getBoundingClientRect(),s=n.srcEvent,c=v(s)-a.left,u=g(s)-a.top,l=m.calcCalloutPosition(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({start:[w.x,w.y],end:[c,u],page:o,width:o.getMediaWidth(),height:o.getMediaHeight(),rotate:o.getRotation(),borderStyle:{style:0},endingStyle:0,scale:t.scale},"rotate",t.rotate));if(l.invalid)return;i=l;for(var f=[],p=0;p<3;p++)f.push(o.getDevicePoint([i.calloutLinePoints[p].x,i.calloutLinePoints[p].y],t.scale,t.rotate));var d=o.getDeviceRect(i.rect,t.scale,t.rotate),y=o.getDeviceRect(i.innerRect,t.scale,t.rotate);h(e.shapeDom).css({left:d.left,top:d.top}),e.calloutShape.init(null,e.shapeDom),e.calloutShape.show(f,d,y)}}))},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-callout-state-handler "+this.cursorStyle),w&&(w=null,this.calloutShape.hide())},e.prototype.out=function(){this.destroyPageHandler()},e.prototype.addAnnot=function(t){var e=this.pageRender,n=e.pdfViewer;return e.getPDFPage().then((function(r){var o=Object.assign({},{type:"freetext",intent:"FreeTextCallout",subject:"FreeTextCallout","interior-color":16777215,rotate:((360-90*r.getRotation()-e.getRotation())%360+360)%360,flags:4},t);return n.getStateHandlerManager().switchTo(),r.addAnnot(o)})).then((function(t){var r=t[0],o=e.annotsRender.getAnnotRender(r.getId()).component;return n.eventEmitter.emit(u.addAnnotSuccess,o.annot),i.default.edit(e,t)}))},e}(i.default);e.default=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(13),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var c=a.stateHandler,u=a.ViewerEvents,l=(c.IStateHandler,c.StateHandlerUtils.getDevicePagePoint),f=a.vendors.Hammer,p=c.StateHandlerConsts.STATE_HANDLER_CREATE_FREETEXT_BOX,d=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-typewriter",r}return s(e,t),e.getStateName=function(){return p},e.prototype.pageHandler=function(t){this.pageRender=t;var e=t.$handler;e.addClass("fv__create-stamp-state-handler "+this.cursorStyle);var n=e[0];(this.hammer=new f.Manager(n,{recognizers:[[f.Tap]]})).on("tap",(function(e){var r=l(n,e),o=t.pdfViewer;return t.getPDFPage().then((function(e){var n=t.getScale(),i=t.getRotation(),a=100*n*4/3,s=20*n*2/3,c={left:r.x,right:r.x+a,top:r.y-s,bottom:r.y+s},u={type:"freetext",rect:e.reverseDeviceRect(c,n,i),subject:"Textbox","interior-color":16777215,rotate:((360-90*e.getRotation()-i)%360+360)%360,flags:4};return o.getStateHandlerManager().switchTo(),e.addAnnot(u)})).then((function(e){var n=e[0],r=t.annotsRender.getAnnotRender(n.getId()).component;return o.eventEmitter.emit(u.addAnnotSuccess,r.annot),i.default.edit(t,e)}))}))},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler "+this.cursorStyle),this.__removeHandlerMouseEvent__&&this.__removeHandlerMouseEvent__()},e.prototype.out=function(){this.destroyPageHandler()},e}(i.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(24),i=(r=o)&&r.__esModule?r:{default:r};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)).stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_SQUARE,c=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,"square"))}return a(e,t),e.getStateName=function(){return s},e}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.DIR_NORTH="north",e.DIR_SOUTH="south",e.DIR_EAST="east",e.DIR_WEST="west",e.DIR_NORTH_WEST="north-west",e.DIR_NORTH_EAST="north-east",e.DIR_SOUTH_WEST="south-west",e.DIR_SOUTH_EAST="south-east"},function(t,e,n){"use strict";n.r(e),n.d(e,"FakeSquareAnnotation",(function(){return c}));var r,o=n(36),i=n.n(o),a=n(3),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getType=function(){return"square"},e.prototype.generateApRenderer=function(){return new i.a(this)},e}(a.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(25);var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.component=e,this.prepared=!1}return t.prototype.prepare=function(){this.prepared||(this.prepared=!0,this.doPrepare())},t.prototype.doPrepare=function(){},t.prototype.show=function(){this.prepared&&this.doShow()},t.prototype.doShow=function(){},t.prototype.hide=function(){this.prepared&&this.doHide()},t.prototype.doHide=function(){},t.prototype.destroy=function(){this.component=null,this.prepared=!1},t.prototype.willRender=function(){},t.prototype.afterRender=function(){},t.prototype.render=function(t,e,n){return this.prepared||this.prepare(),this.doRender(t,e,n)},t.prototype.doRender=function(t,e){return Promise.resolve()},t.prototype.numberToRGBAString=function(t){var e=(0,r.convertFromNumberToRGBA)(t);return"rgba("+e.r+", "+e.g+", "+e.b+", "+e.a+")"},t.prototype.invisibleRender=function(){},t}();e.default=o},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.PIXEL_VERTICAL=e.PIXEL_HORIZONTAL=e.PICA=e.MILLIMETER=e.CENTIMETER=e.METER=e.KILOMETER=e.YARD=e.FOOT=e.POINT=e.MILE=e.CUSTOM=e.INCH=void 0,e.getUnitByName=function(t){return O[t]};var o,i=n(61),a=n(26),s=n(62),c=(o=s)&&o.__esModule?o:{default:o};function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=e.INCH=new i.Unit(1,c.default.inch),f=e.CUSTOM=new i.Unit(1,c.default.custom),p=e.MILE=new i.Unit(1/63360,c.default.mi),d=e.POINT=new i.Unit(72,c.default.pt),h=e.FOOT=new i.Unit(1/12,c.default.ft),y=e.YARD=new i.Unit(1/36,c.default.yd),v=e.KILOMETER=new i.Unit(.0254/1e3,c.default.km),g=e.METER=new i.Unit(.0254,c.default.m),m=e.CENTIMETER=new i.Unit(2.54,c.default.cm),b=e.MILLIMETER=new i.Unit(25.4,c.default.mm),w=e.PICA=new i.Unit(6,c.default.pica),P=e.PIXEL_HORIZONTAL=new i.PixelUnit(a.ORIENTATION_HORIZONTAL),O=(e.PIXEL_VERTICAL=new i.PixelUnit(a.ORIENTATION_VERTICAL),u(r={},l.name,l),u(r,f.name,f),u(r,p.name,p),u(r,d.name,d),u(r,h.name,h),u(r,y.name,y),u(r,v.name,v),u(r,g.name,g),u(r,m.name,m),u(r,b.name,b),u(r,w.name,w),u(r,P.name,P),r)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PixelUnit=e.Unit=void 0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(26),i=n(15);function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=e.Unit=function(){function t(e,n){s(this,t),this.fromInchRate=e,this.name=n}return t.prototype.convertTo=function(t,e){return t/this.fromInchRate*e.fromInchRate},t.prototype.convertAreaTo=function(t,e){return t/Math.pow(this.fromInchRate,2)*Math.pow(e.fromInchRate,2)},r(t,[{key:"isPixel",get:function(){return!1}}]),t}();e.PixelUnit=function(t){function e(n){s(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,0,"px"));return r.orientation=n,Object.defineProperty(r,"fromInchRate",{get:function(){var t=(0,i.getDPI)();switch(n){case o.ORIENTATION_HORIZONTAL:return t.x;case o.ORIENTATION_VERTICAL:return t.y;default:return t.x}}}),r}return a(e,t),r(e,[{key:"isPixel",get:function(){return!0}}]),e}(c)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={inch:"inch",custom:"custom",mi:"mi",pt:"pt",ft:"ft",yd:"yd",km:"km",m:"m",cm:"cm",mm:"mm",px:"px",pica:"pica"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={MARKED:"marked",UNMARKED:"unmarked",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled",COMPLETED:"completed",NONE:"none"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){throw new Error("Method not implemented")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={invisible:1,hidden:2,print:4,noZoom:8,noRotate:16,noView:32,readOnly:64,locked:128,toggleNoView:256,lockedContents:512}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(67),o={annotationUpdated:"annotation-updated",annotationIDUpdated:"annotation-id-updated",annotationAppearanceUpdated:"annotation-appearance-updated",annotationReplyAdd:"annotation-reply-add",annotationReviewStateAnnotAdd:"annotation-review-state-annot-add",annotationMarkedStateAnnotAdd:"annotation-marked-state-annot-add",annotationStatesCleared:"annotation-states-cleared",annotationRemoved:"annotation-removed",annotationMovedPosition:"annotation-moved-position",annotationAdded:"annotation-add",annotationAdd:"annotation-add",moveAnnotsToPages:"moveAnnotsToPages",annotationImported:"annotation-imported",annotationImportedEx:"annotation-imported-ex",annotationLoaded:"annotation-loaded",actionUpdated:"action-updated",actionAdd:"action-add",actionRemove:"action-remove",layerVisibleChange:"layer-visible-change",bookmarkAdded:"bookmark-added",bookmarkUpdated:"bookmark-updated",bookmarkRemoved:"bookmark-removed",stateAnnotNameUpdated:"state-annot-name-updated",pageInfoChange:"page-info-change",pageRotationChange:"page-rotation-change",imageAdded:"image-added",watermarkAdded:"watermark-added",graphicsUpdated:"graphics-updated",permissionChanged:"permission-changed",docPasswordChanged:(0,r.identity)("doc-password-changed"),drmEncryptSuccess:"drm-encrypt-success",drmEncryptFailed:"drm-encrypt-failed",removePwdAndPerm:(0,r.identity)("remove-password-and-permission"),pageMoved:"page-moved",pageRemoved:"page-removed",pageAdded:"page-added",insertPages:"import-pages",importPages:"import-pages",applyRedaction:"apply-redaction",removeReviewState:"remove-review-state",formValueChanged:"form-value-changed",metaDataChanged:"meta-data-changed",docModified:"doc-modified",flattened:"flattened",headerFooterUpdated:"headerFooterUpdated",headerFooterAdded:"headerFooterAdded",COChange:"COChange",pagesMoved:"pages-moved",pagesRemoved:"pages-removed",pagesRotated:"pages-rotated"};e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.T=function(){return!0},e.F=function(){return!1},e.identity=function(t){return t},e.prop=function(t,e){return e[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pageMatrix=void 0;var r,o=n(69),i=(r=o)&&r.__esModule?r:{default:r};function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}e.pageMatrix=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=void 0;switch(r%360){case 0:o=[n,0,0,n,0,0];break;case 90:o=[0,n,-n,0,n*e,0];break;case 180:o=[-n,0,0,-1,n*t,n*e];break;case 270:o=[0,-n,n,0,0,n*t];break;default:throw new Error("Unsupported rotation value: "+r)}return new(Function.prototype.bind.apply(i.default,[null].concat(a(o))))}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(r(this,t),e instanceof t){var c=e;e=c.a,n=c.b,o=c.c,i=c.d,a=c.e,s=c.f}else if(e instanceof Array){var u=e;e=u[0],n=u[1],o=u[2],i=u[3],a=u[4],s=u[5]}this.a=e,this.b=n,this.c=o,this.d=i,this.e=a,this.f=s}return t.Concat2mt=function(e,n){return new t(e.a*n.a+e.b*n.c,e.a*n.b+e.b*n.d,e.c*n.a+e.d*n.c,e.c*n.b+e.d*n.d,e.e*n.a+e.f*n.c+n.e,e.e*n.b+e.f*n.d+n.f)},t.prototype.set=function(t,e,n,r,o,i){this.a=t,this.b=e,this.c=n,this.d=r,this.e=o,this.f=i},t.prototype.reset=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0},t.prototype.reverse=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,n=e.a*e.d-e.b*e.c;if(0==n)return e;var r=-n,o=e.d/n,i=e.b/r,a=e.c/r,s=e.a/n,c=(e.c*e.f-e.d*e.e)/n,u=(e.a*e.f-e.b*e.e)/r;return new t(o,i,a,s,c,u)},t.prototype.setReverse=function(t){var e=this.reverse(t);this.set(e.a,e.b,e.c,e.d,e.e,e.f)},t.prototype.rotate=function(e,n){var r=Math.cos(e),o=Math.sin(e),i=new t(r,o,-o,r,0,0),a=void 0;a=n?t.Concat2mt(i,this):t.Concat2mt(this,i),this.set(a.a,a.b,a.c,a.d,a.e,a.f)},t.prototype.rotateAt=function(t,e,n,r){this.translate(t,e,r),this.rotate(n,r),this.translate(-t,-e,r)},t.prototype.translate=function(t,e,n){n?(this.e+=t*this.a+e*this.c,this.f+=e*this.d+t*this.b):(this.e+=t,this.f+=e)},t.prototype.concat=function(e,n,r,o,i,a,s){var c=void 0;e instanceof t?(c=e,s=n):c=new t(e,n,r,o,i,a);var u=void 0;u=s?t.Concat2mt(c,this):t.Concat2mt(this,c),this.set(u.a,u.b,u.c,u.d,u.e,u.f)},t.prototype.is90Rotated=function(){var t=1e3*this.a;t<0&&(t*=-1);var e=1e3*this.d;e<0&&(e*=-1);var n=this.b;n<0&&(n*=-1);var r=this.c;return r<0&&(r*=-1),t<n&&e<r},t.prototype.isScaled=function(){var t=1e3*this.b;t<0&&(t*=-1);var e=1e3*this.c;e<0&&(e*=-1);var n=this.a;n<0&&(n*=-1);var r=this.d;return r<0&&(r*=-1),t<n&&e<r},t.prototype.getA=function(){return this.a},t.prototype.getB=function(){return this.b},t.prototype.getC=function(){return this.c},t.prototype.getD=function(){return this.d},t.prototype.getE=function(){return this.e},t.prototype.getF=function(){return this.f},t.prototype.scale=function(t,e,n){this.a*=t,this.d*=e,n?(this.b*=t,this.c*=e):(this.b*=e,this.c*=t,this.e*=t,this.f*=e)},t.prototype.transformXDistance=function(t){var e=this.a*t,n=this.b*t;return Math.sqrt(e*e+n*n)},t.prototype.transformYDistance=function(t){var e=this.c*t,n=this.d*t;return Math.sqrt(e*e+n*n)},t.prototype.transformDistance=function(t,e){var n=this.a*t+this.c*e,r=this.b*t+this.d*e;return Math.sqrt(n*n+r*r)},t.prototype.transformPoint=function(t,e){return[this.a*t+this.c*e+this.e,this.b*t+this.d*e+this.f]},t.prototype.transformRect=function(t,e,n,r){for(var o=[t,t,n,n],i=[e,r,e,r],a=void 0,s=0;s<4;s++)a=this.transformPoint(o[s],i[s]),o[s]=a[0],i[s]=a[1];for(var c=[o[0],o[0],i[0],i[0]],u=1;u<4;u++)c[0]>o[u]&&(c[0]=o[u]),c[1]<o[u]&&(c[1]=o[u]),c[2]>i[u]&&(c[2]=i[u]),c[3]<i[u]&&(c[3]=i[u]);return[c[0],c[2],c[1],c[3]]},t.prototype.getXUnit=function(){var t=this.a,e=this.b;return 0===e?Math.abs(t):0===t?Math.abs(e):Math.sqrt(t*t+e*e)},t.prototype.getYUnit=function(){var t=this.c,e=this.d;return 0===t?Math.abs(e):0===e?Math.abs(t):Math.sqrt(t*t+e*e)},t.prototype.getUnitRect=function(){return this.transformRect(0,0,1,1)},t.prototype.matchRect=function(t,e){var n=e[0]-e[2];this.a=Math.abs(n)<.001?1:(t[0]-t[2])/n,n=e[3]-e[1],this.d=Math.abs(n)<.001?1:(t[3]-t[1])/n,this.e=t[0]-e[0]*this.a,this.f=t[3]-e[3]*this.d,this.b=0,this.c=0},t.prototype.getAngle=function(){return Math.atan2(this.b,this.a)},t.prototype.toArray=function(){return[this.a,this.b,this.c,this.d,this.e,this.f]},t}();e.default=o},function(t,e,n){"use strict";n.r(e),n.d(e,"FakeCircleAnnotation",(function(){return c}));var r,o=n(40),i=n.n(o),a=n(3),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.getType=function(){return"circle"},e.prototype.generateApRenderer=function(){return new i.a(this)},e}(a.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(24),i=(r=o)&&r.__esModule?r:{default:r};function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)).stateHandler.StateHandlerConsts.STATE_HANDLER_CREATE_CIRCLE,c=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,"circle"))}return a(e,t),e.getStateName=function(){return s},e}(i.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(29);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var a=function(t){function e(n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return i.target=r,i.hammer=new Hammer.Manager(r),i.hammer.add(new Hammer.Pan(o)),i.addDestroyHook((function(){i.hammer.destroy()})),i}return i(e,t),e.prototype.init=function(){var t=this,e=void 0,n=void 0,r=0,o=0,i=function(i){return function(a){if("start"===i){var s=(n=a.target).getBoundingClientRect();e={left:s.left,top:s.top}}t.eventEmitter.emit(i,{deltaX:a.deltaX-r,deltaY:a.deltaY-o,srcEvent:a.srcEvent}),"end"!==i&&"cancel"!==i||(n=null,r=0,o=0)}};this.hammer.on("panstart",i("start")),this.hammer.on("panmove",i("move")),this.hammer.on("panend",i("end")),this.hammer.on("pancancel",i("cancel"));var a=function(t){if(n){var i=n.getBoundingClientRect();r=i.left-e.left,o=i.top-e.top}};window.addEventListener("scroll",a,!0),this.addDestroyHook((function(){window.removeEventListener("scroll",a,!0)}));var s=function(e){var n=t.target.getBoundingClientRect(),r=e.clientX-n.left,o=e.clientY-n.top;t.eventEmitter.emit("mousemove",{x:r,y:o})};this.target.addEventListener("mousemove",s,!0),this.addDestroyHook((function(){t.target.removeEventListener("mousemove",s,!0)}))},e}(((r=o)&&r.__esModule?r:{default:r}).default);e.default=a},function(t,e,n){"use strict";n.r(e),n.d(e,"FakeLineAnnotation",(function(){return h}));var r,o=n(3),i=n(41),a=n.n(i),s=n(1),c=n(10),u=n(6),l=n.n(u),f=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(){return(p=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},d=s.LineEndingStyle,h=function(t){function e(e){var n=t.call(this,e)||this,r=n.annotationInfo;switch(r.intent){case s.Intents.LINE_ARROW:r.endingStyle===d.None&&(r.endingStyle=d.OpenArrow);break;case s.Intents.LINE_DIMENSION:r.startStyle===d.None&&(r.startStyle=d.OpenArrow),r.endingStyle===d.None&&(r.endingStyle=d.OpenArrow)}return r.hasCaption=r.enableCaption,r.leaderLinePoints.start=r.startPoint,n}return f(e,t),e.prototype.setRect=function(t){this.deviceRect=t;var e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);e=Math.abs(t.right-t.left),n=Math.abs(t.bottom-t.top);var r=this.pageRender.rotate;this.pdfRect=this.page.reverseDeviceRect(t,this.scale,r),this.eContainer.style.cssText+="\n            width: "+e+"px;\n            height: "+n+"px;\n        "},e.prototype.generateApRenderer=function(){return new a.a(this)},e.prototype.getType=function(){return"line"},e.prototype.getStartPoint=function(){return this.annotationInfo.startPoint},e.prototype.getEndPoint=function(){return this.annotationInfo.endPoint},e.prototype.setEndPoint=function(t){var e=this.page.reverseDevicePoint([t.x,t.y],this.scale,this.rotate),n=e[0],r=e[1];this.annotationInfo.endPoint={x:n,y:r},this.annotationInfo.leaderLinePoints.end=this.annotationInfo.endPoint;var o=this.annotationInfo.startPoint,i=o.x,a=o.y,s=this.page.getDevicePoint([i,a],this.scale,this.rotate),c=s[0],u=s[1];this.setRect({left:c,top:u,right:t.x,bottom:t.y})},e.prototype.getRenderingData=function(){var e=t.prototype.getRenderingData.call(this);return p(p({},e),this.annotationInfo)},e.prototype.getOuterDeviceRect=function(t,e){return l.a.on(this.getDeviceRect(t,e)).expand(50).extract()},e.prototype.getDefaultAnnotInfo=function(){var e={x:0,y:0},n={x:0,y:0};return p(p({},t.prototype.getDefaultAnnotInfo.call(this)),{startPoint:e,endPoint:n,leaderLineExtend:0,captionOffset:{x:0,y:0},enableCaption:!1,leaderLinePoints:{start:e,end:n},captionPos:s.LINE_CAPTION_POSITION.POS_INLINE,content:"",startStyle:c.Ending_Style.None,endingStyle:c.Ending_Style.None})},e}(o.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default={success:0,file:1,format:2,password:3,handle:4,certificate:5,unknown:6,invalidLicense:7,param:8,unsupported:9,outOfMemory:10,securityHandler:11,notParsed:12,notFound:13,invalidType:14,conflict:15,unknownState:16,dataNotReady:17,invalidData:18,xFALoadError:19,notLoaded:20,invalidState:21,notCDRM:22,canNotConnectToServer:23,invalidUserToken:24,noRights:25,rightsExpired:26,deviceLimitation:27,canNotRemoveSecurityFromServer:28,canNotGetACL:29,canNotSetACL:30,isAlreadyCPDF:31,isAlreadyCDRM:32,canNotUploadDocInfo:33,canNotUploadCDRMInfo:34,invalidWrapper:35,canNotGetClientID:36,canNotGetUserToken:37,invalidACL:38,invalidClientID:39,OCREngineNotInit:40,diskFull:41,OCRTrialIsEnd:42,filePathNotExist:43,complianceEngineNotInit:44,complianceEngineInvalidUnlockCode:45,complianceEngineInitFailed:46,timeStampServerMgrNotInit:47,LTVVerifyModeNotSet:48,LTVRevocationCallbackNotSet:49,LTVCannotSwitchVersion:50,LTVCannotCheckDTS:51,LTVCannotLoadDSS:52,LTVCannotLoadDTS:53,needSigned:54,complianceResourceFile:55,timeStampServerMgrNoDefaltServer:56,defaultTimeStampServer:57,noConnectedPDFModuleRight:58,noXFAModuleRight:59,noRedactionModuleRight:60,noRMSModuleRight:61,noOCRModuleRight:62,noComparisonModuleRight:63,noComplianceModuleRight:64,noOptimizerModuleRight:65,noConversionModuleRight:66,collaborationSession:1400}},function(t,e,n){},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(28),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var c=a.stateHandler,u=(a.ViewerEvents,c.StateHandlerConsts.STATE_HANDLER_CREATE_ARROW),l=a.Consts.LineEndingStyle,f=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,l.None,l.OpenArrow))}return s(e,t),e.getStateName=function(){return u},e.prototype.createAnnotJson=function(t){return t.intent="LineArrow",t},e}(i.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(19),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),s=n(32);function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var u=a.stateHandler,l=a.Log.LoggerFactory,f=u.StateHandlerConsts.STATE_HANDLER_CREATE_POLYGON,p=l.getLogger("CreatePolygonStateHandler"),d=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,"polygon"))}return c(e,t),e.getStateName=function(){return f},e.prototype.create=function(t,e){var n=new s.FakePolygonAnnotation({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson({type:"polygon",flags:4,date:new Date})});return n.addPoint(t,e),n},e.prototype.canBeCompleted=function(t){var e=t.getVertexes().length;return e<2&&p.debug("polygon has only "+e+" points"),e>=2},e}(i.default);e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(79),o=c(n(29)),i=c(n(80)),a=c(n(31)),s=n(81);function c(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var l=function(t){function e(n,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return i.actionName=o,i.targetElement=r,i.status=a.default.IDLE,i.lastMoveData={},i}return u(e,t),e.prototype.startCreating=function(){this.status=a.default.CREATING},e.prototype.cancel=function(){this.status=a.default.IDLE},e.prototype._addEventListener=function(t,e,n,r){return t.addEventListener(e,n,r),function(){t.removeEventListener(e,n,r)}},e.prototype.init=function(){var t=this,e=new Hammer.Manager(this.targetElement);e.add(new Hammer.Tap({event:"doubletap",taps:2,time:200}));var n=!0,o=i.default,c=(0,s.attachMouseEvent)(this.targetElement,s.MouseEventType.DOWN,(function(e){var r=e.clientX,i=e.clientY;if(t.status===a.default.IDLE)t.status=a.default.CONSTRUCT,t.emit("start",{clientX:r,clientY:i,srcEvent:e.native});else if(t.status===a.default.CREATING){o(),n=!1;var s=setTimeout((function(){t.emit("add-point",{clientX:r,clientY:i,srcEvent:e.native}),n=!0}),300);o=function(){clearTimeout(s)}}})),u=(0,s.attachMouseEvent)(document,s.MouseEventType.MOVE,(function(e){if(!t.isLocked&&n){if(t.status===a.default.IDLE){var r=t.targetElement.getBoundingClientRect(),o=e.clientX-r.left,i=e.clientY-r.top;t.emit("mousemove",{x:o,y:i})}if(t.status===a.default.CREATING){var s=e.clientX,c=e.clientY;t.emit("move",t.lastMoveData={clientX:s,clientY:c,srcEvent:e.native})}}}));e.on("doubletap",(function(e){n=!0;var i=e.srcEvent;o(),t.lastMoveData={clientX:(0,r.getClientX)(i),clientY:(0,r.getClientY)(i),srcEvent:e},l()}));var l=function(){t.status===a.default.CREATING&&(t.status=a.default.IDLE,t.unlock(),t.emit("end",t.lastMoveData),t.lastMoveData=null)},f=this.pdfViewer.getStore().subscribe(this.actionName,(function(e){switch(e){case"complete":l();break;case"cancel":t.status===a.default.CREATING&&(t.status=a.default.IDLE,t.unlock(),t.emit("cancel"));break;case"continue":t.startCreating()}}));this.addDestroyHook((function(){e.destroy(),f(),c(),u()}))},e}(o.default);e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getClientX=function(t){if("clientX"in t)return t.clientX;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientX;case"touchend":case"touchcancel":return t.changedTouches[0].clientX}},e.getClientY=function(t){if("clientY"in t)return t.clientY;switch(t.type){case"touchstart":case"touchmove":return t.touches[0].clientY;case"touchend":case"touchcancel":return t.changedTouches[0].clientY}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},function(t,e,n){"use strict";n.r(e),n.d(e,"MouseEventType",(function(){return c})),n.d(e,"attachMouseEvent",(function(){return b}));var r,o,i,a,s,c,u=n(11),l=n.n(u),f=n(22),p=n(12);!function(t){t[t.DOWN=0]="DOWN",t[t.UP=1]="UP",t[t.MOVE=2]="MOVE"}(c||(c={}));var d=((r={})[c.DOWN]=["MSPointerDown"],r[c.MOVE]=["MSPointerMove"],r[c.UP]=["MSPointerUp"],r),h=((o={})[c.DOWN]=["pointerdown"],o[c.MOVE]=["pointermove"],o[c.UP]=["pointerup"],o),y=((i={})[c.DOWN]=["pointerdown","mousedown"],i[c.MOVE]=["pointermove","mousemove"],i[c.UP]=["pointerup","mouseup"],i),v=((a={})[c.DOWN]=["pointerdown","touchstart"],a[c.MOVE]=["pointermove","touchmove"],a[c.UP]=["pointerup","touchend"],a),g=((s={})[c.DOWN]=["mousedown","touchstart"],s[c.MOVE]=["mousemove","touchmove"],s[c.UP]=["mouseup","touchend"],s),m={};function b(t,e,n,r){var o,i=0,a=m[e].map((function(e){var s,c=function(e){o!==e.type&&Date.now()-i<160?s():(o=e.type,r&&r.once&&s(),n.call(t,function(t){var e={native:t,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,target:t.target,preventDefault:function(){return t.preventDefault()},stopPropagation:function(){return t.stopPropagation()}};if(window.TouchEvent&&t instanceof window.TouchEvent){var n="touchend"===t.type||"touchcancel"===t.type?t.changedTouches[0]:t.touches[0];e.clientX=n.clientX,e.clientY=n.clientY,e.pageX=n.pageX,e.pageY=n.pageY,e.screenX=n.screenX,e.screenY=n.screenY,e.x=n.clientX,e.y=n.clientY,e.bubbles=t.bubbles,e.relatedTarget=n.target}else(t instanceof MouseEvent||t instanceof PointerEvent)&&(e.clientX=t.clientX,e.clientY=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY,e.screenX=t.screenX,e.screenY=t.screenY,e.x=t.x||t.clientX,e.y=t.y||t.clientY,e.relatedTarget=t.relatedTarget,e.button=t.button,e.buttons=t.buttons,e.bubbles=t.bubbles);return e}(e)),i=Date.now())};return s=function(){var n=a.indexOf(s);-1!==n&&(t.removeEventListener(e,c,r),a.splice(n,1))},t.addEventListener(e,c,r),s}));return function(){a.forEach((function(t){return t()}))}}function w(t){if(p.isIE){if(!p.isIEAtLeast11)return d[t]}else{if(p.isSafari)return y[t];if(f.isAndroid)return f.isTouchDevice?v[t]:g[t]}return h[t]}l.a.property(m,c.DOWN,(function(){return w(c.DOWN)})),l.a.property(m,c.MOVE,(function(){return w(c.MOVE)})),l.a.property(m,c.UP,(function(){return w(c.UP)}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(19),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),s=n(21);function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var u=a.stateHandler,l=a.Log.LoggerFactory,f=u.StateHandlerConsts.STATE_HANDLER_CREATE_POLYLINE,p=(l.getLogger("creation/polyline/state"),function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,"polyline"))}return c(e,t),e.getStateName=function(){return f},e.prototype.create=function(t,e){var n=new s.FakePolylineAnnotation({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:this.createAnnotJson({type:"polyline",flags:4,date:new Date})});return n.addPoint(t,e),n},e}(i.default));e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=n(19),i=(r=o)&&r.__esModule?r:{default:r},a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),s=n(32);function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var u=a.stateHandler,l=a.Log,f=a.Consts.BORDER_STYLE,p=l.LoggerFactory,d=u.StateHandlerConsts.STATE_HANDLER_CREATE_POLYGON_CLOUD,h=p.getLogger("CreatePolygonCloudStateHandler"),y=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n,"polygon"))}return c(e,t),e.getStateName=function(){return d},e.prototype.create=function(t,e){var n=new s.FakePolygonAnnotation({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:{type:"polygon",flags:4,date:new Date,borderStyle:f.CLOUDY,borderStyleParam:2,intent:"PolygonCloud"}});return n.addPoint(t,e),n},e.prototype.canBeCompleted=function(t){var e=t.getVertexes().length;return e<2&&h.debug("polygon has only "+e+" points"),e>=2},e}(i.default);e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),o=n(85);function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var a=r.stateHandler,s=a.IStateHandler,c=a.StateHandlerUtils.getDevicePagePoint,u=a.StateHandlerConsts.STATE_HANDLER_CREATE_CREATE_AREA_HIGHLIGHT,l=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-crosshair",r}return i(e,t),e.getStateName=function(){return u},e.prototype.pageHandler=function(t){var e=this;this.pageRender=t,this.pageDestroyHooks=[];var n=t.$handler.get(0);t.$handler.addClass(this.cursorStyle);var r=this.hammer=new Hammer.Manager(n);r.add(new Hammer.Pan),r.on("panstart",(function(t){e.startPoint=c(n,t),e.start(e.startPoint)})),r.on("panmove",(function(t){return e.currentPoint={x:e.startPoint.x+t.deltaX,y:e.startPoint.y+t.deltaY},e.adjust(e.fakeAnnotation,e.startPoint,e.currentPoint)})),r.on("panend",(function(t){e.end(e.fakeAnnotation)})),r.on("pancancel",(function(t){return e.end(e.fakeAnnotation)})),this.pageDestroyHooks.push((function(){return r.destroy()}))},e.prototype.start=function(t){var e=t.x,n=t.y;return this.fakeAnnotation=new o.FakeAreaHighlightAnnotation({pdfViewer:this.pdfViewer,pageRender:this.pageRender,info:{flags:4}}),this.fakeAnnotation.setRect({left:e,right:e+1,top:n,bottom:n+1}),this.fakeAnnotation},e.prototype.adjust=function(t,e,n){var r=e.x,o=e.y,i=n.x,a=n.y,s=Math.min(r,i),c=Math.min(o,a),u=Math.max(r,i),l=Math.max(o,a);t.setRect({left:s,top:c,right:u,bottom:l}),t.draw()},e.prototype.end=function(t){var e=this;t.apply().then((function(t){if(e.pdfViewer.config.showCommentList){var n=t[t.length-2];e.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}}))},e.prototype.destroyPageHandler=function(){this.fakeAnnotation&&this.fakeAnnotation.destroy(),this.pageDestroyHooks&&this.pageDestroyHooks.forEach((function(t){return t()})),this.pageRender.$handler.removeClass(this.cursorStyle)},e}(s);e.default=l},function(t,e,n){"use strict";n.r(e),n.d(e,"FakeAreaHighlightAnnotation",(function(){return u}));var r,o=n(3),i=n(44),a=n.n(i),s=(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},u=function(t){function e(e){var n=t.call(this,e)||this;return n.annotationInfo.dicts=Object.assign({AreaHi:"AreaHi"},n.annotationInfo.dicts||{}),n.eContainer.classList.add("fv__viewer-fake-highlight-area-annot"),n}return s(e,t),e.prototype.setRect=function(e){t.prototype.setRect.call(this,e),this.annotationInfo.coords=[this.pdfRect],this.annotationInfo.quadPoints=[{x:this.pdfRect.left,y:this.pdfRect.top},{x:this.pdfRect.right,y:this.pdfRect.top},{x:this.pdfRect.right,y:this.pdfRect.bottom},{x:this.pdfRect.left,y:this.pdfRect.bottom}]},e.prototype.getDefaultAnnotInfo=function(){var e=t.prototype.getDefaultAnnotInfo.call(this);return e.color=16776960,e},e.prototype.generateApRenderer=function(){return new a.a(this)},e.prototype.getType=function(){return"highlight"},e.prototype.getCreationJSON=function(){return c(c({},t.prototype.getCreationJSON.call(this)),{color:this.annotationInfo.color})},e.prototype.getRenderingData=function(e,n){var r=t.prototype.getRenderingData.call(this,e,n);return c(c({},r),{coords:[r.outerDeviceRect],isArea:!0})},e}(o.a)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=n(5),a=(r=i)&&r.__esModule?r:{default:r};n(10);function s(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var f=function(t){function e(){return c(this,e),u(this,t.apply(this,arguments))}return l(e,t),e.prototype.convertToCanvasBasedPoint=function(t,e,n,r,i,a){var s=i.getDevicePoint([t,e],r,a),c=o(s,2),u=c[0],l=c[1];return{x:u-n.left,y:l-n.top}},e.prototype.doRender=function(t){var e=this,n=t.scale,r=t.renderingData,o=t.rotate,i=r.page,a=r.annotInfo,c=a.startCharInfo,u=a.endCharInfo,l=r.quadPoints,f=r.outerDeviceRect;if(!c){var p=l[0];c={left:p[0].x,top:p[0].y,right:p[1].x,bottom:p[2].y}}if(!u){var d=l[l.length-1];u={left:d[0].x,top:d[0].y,right:d[1].x,bottom:d[2].y}}var h=l.map((function(t,r){var a=t.map((function(t){return e.convertToCanvasBasedPoint(t.x,t.y,f,n,i,o)})),c=a.map((function(t){return t.x})),u=a.map((function(t){return t.y})),l=Math.min.apply(Math,s(c)),p=Math.max.apply(Math,s(c)),d=Math.max.apply(Math,s(u)),h=Math.min.apply(Math,s(u));return{left:l,right:p,bottom:d,top:h,width:p-l,height:d-h,textBlockHeight:d-h}}));t.quadRects=h},e}(a.default);e.default=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var c=o.stateHandler,u=o.ViewerEvents,l=o.shared,f=o.vendors.jQuery,p=c.IStateHandler,d=c.StateHandlerUtils.getDevicePagePoint,h=c.StateHandlerConsts.STATE_HANDLER_CREATE_PENCIL,y=o.shared,v=y.getClientX,g=y.getClientY,m=y.convertFromNumberToHex,b=y.extendOptions,w=l.browser.dpr,P=function(t){function e(){i(this,e);var n=a(this,t.apply(this,arguments));return n.cursorStyle="fv__cursor-pencil",n}return s(e,t),e.getStateName=function(){return h},e.getStateHandlerName=function(){return"pencilStateHandler"},e.prototype.initTimeout=function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.timeout;clearTimeout(r),n&&(this.timeout=setTimeout((function(){e.addAnnot()}),t))},e.prototype.pageHandler=function(t){var e=this,n=this;this.pageRender=t;var r=t.$handler;r.addClass(this.cursorStyle);var o=r.width(),i=r.height();this.$canvas=f('<canvas style="width:'+o+"px;height:"+i+'px" width="'+o*w+'" height="'+i*w+'"></canvas>'),r.append(this.$canvas);var a=this.$canvas[0].getContext("2d"),s=r[0],c=this.hammer=new Hammer.Manager(s,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]});this.pencilLists=[];var u=void 0;c.on("panstart",(function(o){var i=e.pencilLists;u=[],0==i.length&&function(){var e=b({borderInfo:{width:2},color:16711680},n.pdfViewer.getDefaultAnnotConfig()("ink")),o=r.width(),i=r.height();n.$canvas[0].width=o*w,n.$canvas[0].height=i*w,n.$canvas.css("width",o+"px"),n.$canvas.css("height",i+"px"),a.lineWidth=e.borderInfo.width*t.getScale()*w,a.strokeStyle=m(e.color),a.lineJoin="round",a.lineCap="round"}(),i.push(u);var c=d(s,o);a.beginPath(),a.moveTo(c.x*w,c.y*w),u.push({x:c.x,y:c.y,type:1})})),c.on("panmove",(function(t){var e=O(s,t);u.push({x:e.x,y:e.y,type:2}),a.lineTo(e.x*w,e.y*w),a.stroke()})),c.on("panend",(function(n){var r=O(s,n);a.lineTo(r.x*w,r.y*w),a.stroke();var o=t.pdfViewer.getStateHandlerManager().getStateHandlerConfig(e.constructor.getStateHandlerName()),i=o?o.pencilTimeout:null;i=null!=i?i:3e3,e.initTimeout(i)}))},e.prototype.addAnnot=function(){var t=this,e=this.pencilLists;if(!e||e.length<1)return Promise.resolve();var n=this.pageRender;return n.getPDFPage().then((function(o){var i={left:1e4,right:0,top:0,bottom:1e4},a=e.reduce((function(t,e){return function(t,e,n,o,i,a){return i.forEach((function(i){var s=t.reverseDevicePoint([i.x,i.y],e,n),c=r(s,2),u=c[0],l=c[1];u>a.right?a.right=u:u<a.left&&(a.left=u),l>a.top?a.top=l:l<a.bottom&&(a.bottom=l),o.push({x:u,y:l,type:i.type})})),o}(o,n.scale,n.rotate,t,e,i)}),[]);return o.addAnnot({type:"ink",flags:4,rect:i,inkList:a}).then((function(e){n.pdfViewer.eventEmitter.emit(u.addAnnotSuccess,e[0]),t.$canvas[0].width=0,t.pencilLists=[]})).then((function(){t.pdfViewer.config.showCommentList&&t.pageRender.getAnnots().then((function(e){var n=e[e.length-2];t.pageRender.annotsRender.getAnnotRender(n.getId()).component.showReplyDialog()}))}))}))},e.prototype.destroyPageHandler=function(){var t=this;this.initTimeout(0,!1),this.pageRender.docRender.formRender.addTask((function(e){return t.addAnnot().then((function(e){t.$canvas.remove(),t.hammer&&t.hammer.destroy(),t.pageRender.$handler.removeClass(t.cursorStyle),t.pencilLists=null}))}),!0)},e.prototype.out=function(){this.destroyPageHandler()},e}(p);function O(t,e){var n=t.getBoundingClientRect(),r=e.srcEvent,o=v(r),i=g(r);return{x:o-n.left,y:i-n.top}}e.default=P},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=u(n(89)),i=u(n(34)),a=u(n(8)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0)),c=n(91);function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var d=s.stateHandler,h=s.Log,y=s.ViewerEvents,v=d.IStateHandler,g=s.Consts.POINT_TYPE,m=d.StateHandlerUtils.getDevicePagePoint,b=h.LoggerFactory.getLogger("EraserStateHandler"),w=function(t){function e(){l(this,e);var n=f(this,t.apply(this,arguments));return n.cursorStyle="fv__cursor-eraser",n}return p(e,t),e.getStateName=function(){return"eraser"},e.getStateHandlerName=function(){return"eraserStateHandler"},e.prototype.pageHandler=function(t){var e=this;this.pageRender=t;var n=t.$handler;this.allInkList={},this.eraseInkList={},n.addClass(this.cursorStyle);var r=n[0],o=this.hammer=new Hammer.Manager(r,{recognizers:[[Hammer.Pan,{direction:Hammer.DIRECTION_ALL}]]}),i=t.docRender.formRender.addTask((function(e){return t.getAnnots().then((function(t){return t.filter((function(t){return"ink"===t.getType()}))}))}),!0),a=void 0;t.getPDFPage().then((function(n){o.on("panstart",(function(t){e.startPoint=m(r,t),a=i.then((function(t){t.forEach((function(t){e.allInkList[t.getId()]={annot:t,inkList:t.getInkList()}}))}))})),o.on("panmove",(function(r){e.lastPoint=e.currentPoint||e.startPoint,e.currentPoint={x:e.startPoint.x+r.deltaX,y:e.startPoint.y+r.deltaY},a=a.then((function(r){return i.then((function(r){if(0!==r.length||e.currentPoint){var o=t.pdfViewer.getStateHandlerManager().getStateHandlerConfig(e.constructor.getStateHandlerName()),i=o?o.width:20;return e.erase(n,r,e.lastPoint,e.currentPoint,i)}}))}))})),o.on("panend",(function(n){a.then((function(n){var r=[],o=[];for(var i in e.eraseInkList){var a=e.allInkList[i],s=e.eraseInkList[i];a.isRemove=s.isRemove,r.push(a),o.push(s)}t.pdfViewer.eventEmitter.emit(y.eraserSuccess,r,o);var u=Object.keys(e.eraseInkList).map((function(t){return e.eraseInkList[t]})).filter((function(t){return!t.isRemove})).map((function(t){return t.annot.exportToJSON()}));e.pdfViewer.collaborate(c.COLLABORATION_ACTION.UPDATE_ANNOT,{annots:u})}))}))}))},e.prototype.erase=function(t,e,n,s){var u=this,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;if(n.x>s.x){var f=[s,n];n=f[0],s=f[1]}var p=this.pdfViewer,d=this.pageRender,h=d.getScale(),y=d.getRotation(),v=t.reverseDevicePoint([n.x,n.y],h,y),m=r(v,2),w=m[0],P=m[1],O=t.reverseDevicePoint([s.x,s.y],h,y),E=r(O,2),_=E[0],R=E[1],T={x:w,y:P},A={x:_,y:R},S=new o.default(T,A,l),x=e.filter((function(t){var e=t.getRect();return M(e,T)||M(e,A)})).map((function(t){return t.$$lastErasePromise=(t.$$lastErasePromise||Promise.resolve()).then(n,n).then((function(e){var n=d.getAnnotRender(t.getId());return u.eraseInkList[t.getId()]={annot:t,inkList:t.getInkList(),isRemove:!n},e}));function e(t){return t.reduce((function(t,e){return e.type===g.MOVE_TO&&t.push([]),t[t.length-1].push(Object.assign({removed:!1},e)),t}),[])}function n(){var n=e(t.getInkList()),o=!1;if(n.forEach((function(t){if(1===t.length){var e=t[0];S.contains(e)&&(e.removed=!0,o=!0)}else for(var n=0;n<t.length-1;){var s=t[n],c=t[n+1];if(c.type!==g.MOVE_TO){var u=S.contains(s);if(S.contains(c)){o=!0,u&&(s.removed=!0,c.type=g.MOVE_TO);var l=n+1;t:for(;l<t.length-1;){var f=t[l],p=t[l+1];f.removed=!0;var d=S.intersectionPoints(new i.default(f,p));if(1===d.length){if(p.type!==g.MOVE_TO){var h=d[0];h.type=g.MOVE_TO,t.splice(l+1,0,h)}l++;break t}l++}n=l}else{var y=S.intersectionPoints(new i.default(s,c));if(1===y.length){s.removed=!0;var v=y[0];v.type=g.MOVE_TO,t.splice(n+1,0,v),n+=2,o=!0}else if(2===y.length){var m=r(y,2),b=m[0],w=m[1],P=new a.default(b.x-s.x,b.y-s.y).length();if(new a.default(w.x-s.x,w.y-s.y).length()<P){var O=[w,b];b=O[0],w=O[1]}t.splice(n+1,0,b,w),b.type=g.LINE_TO,w.type=g.MOVE_TO,n+=2,o=!0}n++}}else n++}})),o){var s=[];if(n.forEach((function(t){t.forEach((function(e,n){if(e.removed){var r=t[n+1];r&&(r.type=g.MOVE_TO)}else s.push({x:e.x,y:e.y,type:e.type})}))})),s.length<10){var u=e(s);if(s.length<2||s.length===u.length){var l=d.getAnnotRender(t.getId());if(l){var f=l.component.annot;return f.getPDFPage().removeAnnot(f).then((function(){p.collaborate(c.COLLABORATION_ACTION.REMOVE_ANNOT,[{annotId:f.getId(),pageIndex:d.index}])}))}return void b.debug("annotRender === undefined",l,u,s)}}if(0===s.length)return;return t.setInkList(s)}}}));return Promise.all(x);function M(t,e){var n=e.x>=t.left&&e.x<=t.right,r=e.y>=t.bottom&&e.y<=t.top;return n&&r}},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle)},e.prototype.out=function(){this.destroyPageHandler()},e}(v);e.default=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(90)),o=i(n(8));function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var u=function(t){function e(n,r,i){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i;return a(this,e),s(this,t.call(this,function(){if(n.y>r.y){var t=[r,n];n=t[0],r=t[1]}var e=new o.default(n.x,n.y),a=new o.default(r.x,r.y),s=a.substract(e).normalize(),u=s.mult(c);e=e.substract(u),a=a.add(u);var l=Math.PI/2-Math.atan2(s.y,s.x),f=.5*i*Math.cos(l),p=.5*i*Math.sin(l);return[{x:e.x-f,y:e.y+p},{x:e.x+f,y:e.y-p},{x:a.x+f,y:a.y-p},{x:a.x-f,y:a.y+p}]}()))}return c(e,t),e.prototype.getWidth=function(){for(var t=this.vertices[0].x,e=this.vertices[0].x,n=1;n<this.count;n++)this.vertices[n].x<t?t=this.vertices[n].x:this.vertices[n].x>e&&(e=this.vertices[n].x);return e-t},e.prototype.getHeight=function(){for(var t=this.vertices[0].y,e=this.vertices[0].y,n=1;n<this.count;n++)this.vertices[n].y<t?t=this.vertices[n].y:this.vertices[n].y>e&&(e=this.vertices[n].y);return e-t},e}(r.default);e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(8)),o=i(n(34));function i(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=e.map((function(t){return new r.default(t.x,t.y)})),this.count=this.vertices.length,this.edges=[];for(var n=this.vertices.length,i=0;i<n-1;i++)this.edges.push(this.vertices[i].segment(this.vertices[i+1]));this.edges.push(this.vertices[n-1].segment(this.vertices[0])),this.segments=this.edges.map((function(t){var e=t.from,n=t.to;return new o.default(e,n)}))}return t.overlap=function(t,e){return n(t.min,e)||n(t.max,e)||n(e.max,t)||n(e.max,t);function n(t,e){return t>=e.min&&t<=e.max}},t.prototype.project=function(t){t=t.normalize();for(var e=this.vertices[0].dot(t),n=e,r=0;r<this.count;r++){var o=this.vertices[r].dot(t);o<e&&(e=o),o>n&&(n=o)}if(e>n){var i=[n,e];e=i[0],n=i[1]}return{min:e,max:n}},t.prototype.sat=function(e){for(var n=0;n<this.count;n++){var r=this.edges[n].dir.perp(),o=this.project(r),i=e.project(r);if(!t.overlap(o,i))return!1}for(var a=0;a<e.count;a++){var s=e.edges[a].dir.perp(),c=this.project(s),u=e.project(s);if(!t.overlap(c,u))return!1}return!0},t.prototype.contains=function(t){for(var e=this.vertices[0],n=1;n<this.count;n++){var r=this.vertices[n];r.x>e.x&&(e=r)}for(var i=new o.default(t,{x:e.x+10,y:t.y}),a=!1,s=0;s<this.count;s++){var c=this.segments[s];if(c.hasPoint(t))return!0;i.hasIntersect(c)&&(a=!a)}return a},t.prototype.intersectionPoints=function(t,e){var n=void 0;return n=t instanceof o.default?t:new o.default(t,e),this.segments.map((function(t){return t.intersectPointInSegment(n)})).filter((function(t){return!!t}))},t}();e.default=a},function(t,e,n){"use strict";var r;n.r(e),n.d(e,"COLLABORATION_ACTION",(function(){return r})),function(t){t.CREATE_ANNOT="create-annots",t.REMOVE_ANNOT="remove-annots",t.UPDATE_ANNOT="update-annots",t.ADD_REPLY="add-reply",t.REMOVE_REPLY="remove-reply",t.ADD_REVIEW_STATE="add-review-state",t.ADD_MARKED_STATE="add-marked-state",t.UPDATE_ANNOT_CONTENT="update-comment-content",t.PPO_REMOVE_PAGE="ppo-remove-page",t.PPO_INSERT_PAGE="ppo-insert-page",t.PPO_ROTATE_PAGE="ppo-rotate-page",t.PPO_MOVE_PAGE="ppo-move-page",t.MOVE_ANNOTS_BETWEEN_PAGES="move-annotations-between-pages",t.IMPORT_ANNOTATIONS_FILE="import-annotations-file"}(r||(r={}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}var a=o.stateHandler,s=o.ViewerEvents,c=o.vendors,u=c.jQuery,l=c.Hammer,f=a.IStateHandler,p=a.StateHandlerConsts.STATE_HANDLER_CREATE_STAMP,d=o.shared,h=d.getClientX,y=d.getClientY,v=o.DeviceInfo.isTouchDevice,g=void 0,m=void 0,b=void 0,w=void 0,P=void 0,O=void 0,E=u('<img style="position: absolute;opacity:0.5"/>'),_=function(t){function e(n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n))}return i(e,t),e.getStateName=function(){return p},e.setParams=function(t){var e=t.category,n=t.name,r=t.url,o=t.fileType,i=void 0===o?"pdf":o,a=t.width,s=void 0===a?150:a,c=t.height,u=void 0===c?45:c,l=t.showUrl,f=void 0===l?r:l;g=e,m=n,b=s,w=u,O=i,P=r,v||(E.css({width:4*s/3,height:4*u/3}),E.attr("src",f))},e.prototype.pageHandler=function(t){this.pageRender=t;var e=t.$handler,n=t.pdfViewer;e.addClass("fv__create-stamp-state-handler");var r=!1,o=e[0],i=this.hammer=new l.Manager(o,{recognizers:[[l.Tap]]});this.addEvent(e,"mousemove",(function(n){if(!r){var i=o.getBoundingClientRect(),a=n.clientX-i.left,s=n.clientY-i.top;v||(E.css({transform:"scale("+t.getScale()+")",top:s-2*w/3,left:a-2*b/3}).show(),e.append(E))}})),i.on("tap",(function(e){E.css("opacity",1);var i=o.getBoundingClientRect(),a=e.srcEvent,c="",u=h(a),l=y(a),f=[u-i.left,l-i.top],p=f[0],d=f[1];return r=!0,t.getPDFPage().then((function(e){var n=2*b/3*t.scale,r=2*w/3*t.scale,o={left:p-n,right:p+n,top:d-r,bottom:d+r};o=e.reverseDeviceRect(o,t.scale,t.getRotation());var i={rotate:((360-90*e.getRotation()-t.getRotation())%360+360)%360,type:"stamp",flags:4,rect:o,iconInfo:{category:g,name:m,fileType:O,url:P}};return e.addAnnot(i)})).then((function(e){var n=t.annotsRender.getAnnotRender(e[0].id).component;c=n,t.pdfViewer.eventEmitter.emit(s.addAnnotSuccess,n.annot),t.annotsRender.activeAnnot(e[0].id),n.getRenderPromise().finally((function(){setTimeout((function(){r=!1,E.hide(),E.css("opacity",.5)}),500)}))})).then((function(t){n.getStateHandlerManager().switchTo(),n.config.showCommentList&&c.showReplyDialog()})).catch((function(){r=!1,E.hide(),E.css("opacity",.5)}))}))},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass("fv__create-stamp-state-handler"),E.hide(),this.destroyList.map((function(t){var e=r(t,3),n=e[0],o=e[1],i=e[2];n.off(o,i)}))},e.prototype.out=function(){this.destroyPageHandler()},e.prototype.addEvent=function(t,e,n){this.destroyList=this.destroyList||[],t.on(e,n),this.destroyList.push([t,e,n])},e}(f);e.default=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):function(t,e){for(var n=Object.getOwnPropertyNames(e),r=0;r<n.length;r++){var o=n[r],i=Object.getOwnPropertyDescriptor(e,o);i&&i.configurable&&void 0===t[o]&&Object.defineProperty(t,o,i)}}(t,e))}n(23);var a=o.stateHandler,s=o.ViewerEvents,c=a.IStateHandler,u=a.HandStateHandler,l=o.vendors,f=l.Hammer,p=l.jQuery,d=o.shared,h=(d.DebouncePromiseQueue,d.getClientX),y=d.getClientY,v=a.StateHandlerUtils,g=(v.getDevicePagePoint,v.deltaDeviceRect,v.appendSelectMark,v.removeSelectMark,a.StateHandlerConsts.STATE_HANDLER_CREATE_FILE_ATTACHMENT),m=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));return r.cursorStyle="fv__cursor-file",r}return i(e,t),e.getStateName=function(){return g},e.prototype.pageHandler=function(t){this.pageRender=t;var e=t.$handler;e.addClass(this.cursorStyle),e.append('<input id="fileAttachment" type="file" style="display: none;"/>');var n=e[0];(this.hammer=new f.Manager(n,{recognizers:[[f.Tap]]})).on("tap",(function(e){var o=n.getBoundingClientRect(),i=e.srcEvent,a=h(i),c=y(i),l=[a-o.left,c-o.top],f=l[0],d=l[1];p("#fileAttachment").off("change").on("change",(function(e){var n=e.target.files[0];if(n)return t.getPDFPage().then((function(e){var o=new FileReader,i=e.reverseDevicePoint([f,d],t.scale,t.getRotation()),a=r(i,2),c=a[0],l=a[1];o.readAsArrayBuffer(n),o.onload=function(){var r=new Uint8Array(o.result),i=10,a=12;switch(e.getRotation()){case 1:case 3:var f=i;i=a,a=f}e.addAnnot({flags:4,type:"fileattachment",rect:{left:c-i,right:c+i,top:l+a,bottom:l-a},buffer:r,fileName:n.name,file:n}).then((function(e){var n=e[0],r=t.annotsRender.getAnnotRender(n.getId()).component;t.pdfViewer.eventEmitter.emit(s.addAnnotSuccess,r.annot),t.pdfViewer.getStateHandlerManager().switchTo(u.getStateName()),t.annotsRender.activeAnnot(n.getId())}))}}))})),p("#fileAttachment").click()}))},e.prototype.destroyPageHandler=function(){this.hammer&&this.hammer.destroy(),this.pageRender.$handler.removeClass(this.cursorStyle),p("#fileAttachment").remove()},e.prototype.out=function(){this.destroyPageHandler()},e}(c);e.default=m},function(t,e,n){"use strict";n.r(e);var r=n(4);var o=function(){function t(t){Object(r.assertThat)(Array.isArray(t),"Illegal Matrix values, it should be an array! But actual: "+t),Object(r.assertThat)(16===t.length,"Incorrect matrix values size, it must be 16!"),this.values=t,this.cols=Math.sqrt(t.length)}return t.prototype.multiVec4=function(t,e,n,r){return void 0===r&&(r=1),[this.getAt(0,0)*t+this.getAt(0,1)*e+this.getAt(0,2)*n+this.getAt(0,3)*r,this.getAt(1,0)*t+this.getAt(1,1)*e+this.getAt(1,2)*n+this.getAt(1,3)*r,this.getAt(2,0)*t+this.getAt(2,1)*e+this.getAt(2,2)*n+this.getAt(2,3)*r,this.getAt(3,0)*t+this.getAt(3,1)*e+this.getAt(3,2)*n+this.getAt(3,3)*r]},t.prototype.getAt=function(t,e){var n=t*this.cols+e;return Object(r.assertThat)(n<this.values.length,"Cannot access value at ("+t+","+e+"), it out bound of this matrix!"),this.values[n]},t}(),i=function(){function t(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=1),this.a=t,this.b=e,this.c=n,this.d=r}return t.prototype.transform=function(e){var n=e.multiVec4(this.a,this.b,this.c,this.d);return new t(n[0],n[1],n[2],n[3])},t.prototype.scale=function(t,e,n){return void 0===e&&(e=t),void 0===n&&(n=e),this.transform(function(t,e,n){return void 0===e&&(e=t),void 0===n&&(n=e),new o([t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1])}(t,e,n))},t.prototype.rotateZ=function(t){return this.transform(function(t){void 0===t&&(t=0);var e=t/180*Math.PI,n=Math.cos(e),r=Math.sin(e);return new o([n,r,0,0,-r,n,0,0,0,0,1,0,0,0,0,1])}(t))},t.prototype.translate=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),this.transform(function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=0),new o([1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1])}(t,e,n))},t}();e.default=i}])}));